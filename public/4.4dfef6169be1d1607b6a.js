(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"/6Yf":function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n.d(e,"b",function(){return a});var r=n("os0x"),i=n("qOnz"),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),s="[DEFAULT]",u=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t=s);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.a;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=Object(r.a)({identifier:s,optional:!1},t),n=e.optional,i=this.normalizeInstanceIdentifier(e.identifier);try{var o=this.getOrInitializeService(i);if(!o){if(n)return null;throw Error("Service "+this.name+" is not available")}return o}catch(u){if(n)return null;throw u}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService(s)}catch(l){}try{for(var i=Object(r.h)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var u=Object(r.e)(o.value,2),a=u[1],c=this.normalizeInstanceIdentifier(u[0]);try{var h=this.getOrInitializeService(c);a.resolve(h)}catch(l){}}}catch(f){e={error:f}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t=s),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return Object(r.b)(this,void 0,void 0,function(){var t;return Object(r.d)(this,function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(Object(r.f)(t.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}),t.filter(function(t){return"_delete"in t}).map(function(t){return t._delete()})))];case 1:return e.sent(),[2]}})})},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,function(t){return t===s?void 0:t}(t)),this.instances.set(t,e)),e||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:s:t},t}(),a=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new u(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},os0x:function(t,e,n){"use strict";n.d(e,"c",function(){return i}),n.d(e,"a",function(){return o}),n.d(e,"b",function(){return s}),n.d(e,"d",function(){return u}),n.d(e,"h",function(){return a}),n.d(e,"e",function(){return c}),n.d(e,"f",function(){return h}),n.d(e,"g",function(){return l});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{a(r.next(t))}catch(e){o(e)}}function u(t){try{a(r.throw(t))}catch(e){o(e)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,u)}a((r=r.apply(t,e||[])).next())})}function u(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(u){o=[6,u],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}}function a(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(u){i={error:u}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function h(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(c(arguments[e]));return t}function l(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,u=o.length;s<u;s++,i++)r[i]=o[s];return r}},pKmL:function(t,e,n){"use strict";n.r(e),n.d(e,"AppCoreModule",function(){return qn});var r=n("ofXK"),i=n("tyNb"),o=function(t){return t.EMPTY="",t}({}),s=n("fXoL");let u;try{u="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(Bn){u=!1}let a,c,h=(()=>{class t{constructor(t){this._platformId=t,this.isBrowser=this._platformId?Object(r.l)(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!u)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return t.\u0275fac=function(e){return new(e||t)(s.Pb(s.B))},t.\u0275prov=Object(s.Fb)({factory:function(){return new t(Object(s.Pb)(s.B))},token:t,providedIn:"root"}),t})(),l=(()=>{class t{}return t.\u0275mod=s.Hb({type:t}),t.\u0275inj=s.Gb({factory:function(e){return new(e||t)}}),t})();function f(t){return function(){if(null==a&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>a=!0}))}finally{a=a||!1}return a}()?t:!!t.capture}var p=n("XNiG"),d=(n("quSY"),n("LRne")),v=n("vkgz"),y=(n("Kj3r"),n("pLZG")),b=n("lJxs");function m(t){return null!=t&&""+t!="false"}function g(t){return t instanceof s.l?t.nativeElement:t}n("IzEk");var w=n("HDdC");function _(t){return 0===t.buttons}"undefined"!=typeof Element&&Element;const E=new s.q("cdk-focus-monitor-default-options"),O=f({passive:!0,capture:!0});let I=(()=>{class t{constructor(t,e,n,r){this._ngZone=t,this._platform=e,this._origin=null,this._windowFocused=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._documentKeydownListener=()=>{this._lastTouchTarget=null,this._setOriginForCurrentEventQueue("keyboard")},this._documentMousedownListener=t=>{if(!this._lastTouchTarget){const e=_(t)?"keyboard":"mouse";this._setOriginForCurrentEventQueue(e)}},this._documentTouchstartListener=t=>{null!=this._touchTimeoutId&&clearTimeout(this._touchTimeoutId),this._lastTouchTarget=T(t),this._touchTimeoutId=setTimeout(()=>this._lastTouchTarget=null,650)},this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)},this._rootNodeFocusAndBlurListener=t=>{const e=T(t),n="focus"===t.type?this._onFocus:this._onBlur;for(let r=e;r;r=r.parentElement)n.call(this,t,r)},this._document=n,this._detectionMode=(null==r?void 0:r.detectionMode)||0}monitor(t,e=!1){const n=g(t);if(!this._platform.isBrowser||1!==n.nodeType)return Object(d.a)(null);const r=function(t){if(function(){if(null==c){const t="undefined"!=typeof document?document.head:null;c=!(!t||!t.createShadowRoot&&!t.attachShadow)}return c}()){const e=t.getRootNode?t.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(n)||this._getDocument(),i=this._elementInfo.get(n);if(i)return e&&(i.checkChildren=!0),i.subject;const o={checkChildren:e,subject:new p.a,rootNode:r};return this._elementInfo.set(n,o),this._registerGlobalListeners(o),o.subject}stopMonitoring(t){const e=g(t),n=this._elementInfo.get(e);n&&(n.subject.complete(),this._setClasses(e),this._elementInfo.delete(e),this._removeGlobalListeners(n))}focusVia(t,e,n){const r=g(t);r===this._getDocument().activeElement&&this._elementInfo.has(r)?this._originChanged(r,e,this._elementInfo.get(r)):(this._setOriginForCurrentEventQueue(e),"function"==typeof r.focus&&r.focus(n))}ngOnDestroy(){this._elementInfo.forEach((t,e)=>this.stopMonitoring(e))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_toggleClass(t,e,n){n?t.classList.add(e):t.classList.remove(e)}_getFocusOrigin(t){return this._origin?this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:this._wasCausedByTouch(t)?"touch":"program"}_setClasses(t,e){this._toggleClass(t,"cdk-focused",!!e),this._toggleClass(t,"cdk-touch-focused","touch"===e),this._toggleClass(t,"cdk-keyboard-focused","keyboard"===e),this._toggleClass(t,"cdk-mouse-focused","mouse"===e),this._toggleClass(t,"cdk-program-focused","program"===e)}_setOriginForCurrentEventQueue(t){this._ngZone.runOutsideAngular(()=>{this._origin=t,0===this._detectionMode&&(this._originTimeoutId=setTimeout(()=>this._origin=null,1))})}_wasCausedByTouch(t){const e=T(t);return this._lastTouchTarget instanceof Node&&e instanceof Node&&(e===this._lastTouchTarget||e.contains(this._lastTouchTarget))}_onFocus(t,e){const n=this._elementInfo.get(e);n&&(n.checkChildren||e===T(t))&&this._originChanged(e,this._getFocusOrigin(t),n)}_onBlur(t,e){const n=this._elementInfo.get(e);!n||n.checkChildren&&t.relatedTarget instanceof Node&&e.contains(t.relatedTarget)||(this._setClasses(e),this._emitOrigin(n.subject,null))}_emitOrigin(t,e){this._ngZone.run(()=>t.next(e))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const e=t.rootNode,n=this._rootNodeFocusListenerCount.get(e)||0;n||this._ngZone.runOutsideAngular(()=>{e.addEventListener("focus",this._rootNodeFocusAndBlurListener,O),e.addEventListener("blur",this._rootNodeFocusAndBlurListener,O)}),this._rootNodeFocusListenerCount.set(e,n+1),1==++this._monitoredElementCount&&this._ngZone.runOutsideAngular(()=>{const t=this._getDocument(),e=this._getWindow();t.addEventListener("keydown",this._documentKeydownListener,O),t.addEventListener("mousedown",this._documentMousedownListener,O),t.addEventListener("touchstart",this._documentTouchstartListener,O),e.addEventListener("focus",this._windowFocusListener)})}_removeGlobalListeners(t){const e=t.rootNode;if(this._rootNodeFocusListenerCount.has(e)){const t=this._rootNodeFocusListenerCount.get(e);t>1?this._rootNodeFocusListenerCount.set(e,t-1):(e.removeEventListener("focus",this._rootNodeFocusAndBlurListener,O),e.removeEventListener("blur",this._rootNodeFocusAndBlurListener,O),this._rootNodeFocusListenerCount.delete(e))}if(!--this._monitoredElementCount){const t=this._getDocument(),e=this._getWindow();t.removeEventListener("keydown",this._documentKeydownListener,O),t.removeEventListener("mousedown",this._documentMousedownListener,O),t.removeEventListener("touchstart",this._documentTouchstartListener,O),e.removeEventListener("focus",this._windowFocusListener),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._touchTimeoutId),clearTimeout(this._originTimeoutId)}}_originChanged(t,e,n){this._setClasses(t,e),this._emitOrigin(n.subject,e),this._lastFocusOrigin=e}}return t.\u0275fac=function(e){return new(e||t)(s.Pb(s.z),s.Pb(h),s.Pb(r.c,8),s.Pb(E,8))},t.\u0275prov=Object(s.Fb)({factory:function(){return new t(Object(s.Pb)(s.z),Object(s.Pb)(h),Object(s.Pb)(r.c,8),Object(s.Pb)(E,8))},token:t,providedIn:"root"}),t})();function T(t){return t.composedPath?t.composedPath()[0]:t.target}const j="cdk-high-contrast-black-on-white",x="cdk-high-contrast-white-on-black",A="cdk-high-contrast-active";let N=(()=>{class t{constructor(t,e){this._platform=t,this._document=e}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const e=this._document.defaultView||window,n=e&&e.getComputedStyle?e.getComputedStyle(t):null,r=(n&&n.backgroundColor||"").replace(/ /g,"");switch(this._document.body.removeChild(t),r){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(A),t.remove(j),t.remove(x);const e=this.getHighContrastMode();1===e?(t.add(A),t.add(j)):2===e&&(t.add(A),t.add(x))}}}return t.\u0275fac=function(e){return new(e||t)(s.Pb(h),s.Pb(r.c))},t.\u0275prov=Object(s.Fb)({factory:function(){return new t(Object(s.Pb)(h),Object(s.Pb)(r.c))},token:t,providedIn:"root"}),t})(),k=(()=>{class t{}return t.\u0275mod=s.Hb({type:t}),t.\u0275inj=s.Gb({factory:function(e){return new(e||t)}}),t})();const S=new s.P("11.0.0");var P=n("JX91"),C=n("R1ws");const D=new s.P("11.0.0"),R=new s.q("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}});let L,M=(()=>{class t{constructor(t,e,n){this._hasDoneGlobalChecks=!1,this._document=n,t._applyBodyHighContrastModeCssClasses(),this._sanityChecks=e,this._hasDoneGlobalChecks||(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._checkCdkVersionMatch(),this._hasDoneGlobalChecks=!0)}_getWindow(){const t=this._document.defaultView||window;return"object"==typeof t&&t?t:null}_checksAreEnabled(){return Object(s.V)()&&!this._isTestEnv()}_isTestEnv(){const t=this._getWindow();return t&&(t.__karma__||t.jasmine)}_checkDoctypeIsDefined(){this._checksAreEnabled()&&(!0===this._sanityChecks||this._sanityChecks.doctype)&&!this._document.doctype&&console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")}_checkThemeIsPresent(){if(!this._checksAreEnabled()||!1===this._sanityChecks||!this._sanityChecks.theme||!this._document.body||"function"!=typeof getComputedStyle)return;const t=this._document.createElement("div");t.classList.add("mat-theme-loaded-marker"),this._document.body.appendChild(t);const e=getComputedStyle(t);e&&"none"!==e.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),this._document.body.removeChild(t)}_checkCdkVersionMatch(){this._checksAreEnabled()&&(!0===this._sanityChecks||this._sanityChecks.version)&&D.full!==S.full&&console.warn("The Angular Material version ("+D.full+") does not match the Angular CDK version ("+S.full+").\nPlease ensure the versions of these two packages exactly match.")}}return t.\u0275mod=s.Hb({type:t}),t.\u0275inj=s.Gb({factory:function(e){return new(e||t)(s.Pb(N),s.Pb(R,8),s.Pb(r.c))},imports:[[k],k]}),t})();function V(t){return class extends t{constructor(...t){super(...t),this._disabled=!1}get disabled(){return this._disabled}set disabled(t){this._disabled=m(t)}}}function F(t,e){return class extends t{constructor(...t){super(...t),this.defaultColor=e,this.color=e}get color(){return this._color}set color(t){const e=t||this.defaultColor;e!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove("mat-"+this._color),e&&this._elementRef.nativeElement.classList.add("mat-"+e),this._color=e)}}}function U(t){return class extends t{constructor(...t){super(...t),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=m(t)}}}try{L="undefined"!=typeof Intl}catch(Bn){L=!1}class q{constructor(t,e,n){this._renderer=t,this.element=e,this.config=n,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const B={enterDuration:450,exitDuration:400},z=f({passive:!0}),G=["mousedown","touchstart"],K=["mouseup","mouseleave","touchend","touchcancel"];class H{constructor(t,e,n,r){this._target=t,this._ngZone=e,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=g(n))}fadeInRipple(t,e,n={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),i=Object.assign(Object.assign({},B),n.animation);n.centered&&(t=r.left+r.width/2,e=r.top+r.height/2);const o=n.radius||function(t,e,n){const r=Math.max(Math.abs(t-n.left),Math.abs(t-n.right)),i=Math.max(Math.abs(e-n.top),Math.abs(e-n.bottom));return Math.sqrt(r*r+i*i)}(t,e,r),s=t-r.left,u=e-r.top,a=i.enterDuration,c=document.createElement("div");c.classList.add("mat-ripple-element"),c.style.left=s-o+"px",c.style.top=u-o+"px",c.style.height=2*o+"px",c.style.width=2*o+"px",null!=n.color&&(c.style.backgroundColor=n.color),c.style.transitionDuration=a+"ms",this._containerElement.appendChild(c),window.getComputedStyle(c).getPropertyValue("opacity"),c.style.transform="scale(1)";const h=new q(this,c,n);return h.state=0,this._activeRipples.add(h),n.persistent||(this._mostRecentTransientRipple=h),this._runTimeoutOutsideZone(()=>{const t=h===this._mostRecentTransientRipple;h.state=1,n.persistent||t&&this._isPointerDown||h.fadeOut()},a),h}fadeOutRipple(t){const e=this._activeRipples.delete(t);if(t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!e)return;const n=t.element,r=Object.assign(Object.assign({},B),t.config.animation);n.style.transitionDuration=r.exitDuration+"ms",n.style.opacity="0",t.state=2,this._runTimeoutOutsideZone(()=>{t.state=3,n.parentNode.removeChild(n)},r.exitDuration)}fadeOutAll(){this._activeRipples.forEach(t=>t.fadeOut())}setupTriggerEvents(t){const e=g(t);e&&e!==this._triggerElement&&(this._removeTriggerEvents(),this._triggerElement=e,this._registerEvents(G))}handleEvent(t){"mousedown"===t.type?this._onMousedown(t):"touchstart"===t.type?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(K),this._pointerUpEventsRegistered=!0)}_onMousedown(t){const e=_(t),n=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;this._target.rippleDisabled||e||n||(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const e=t.changedTouches;for(let t=0;t<e.length;t++)this.fadeInRipple(e[t].clientX,e[t].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._activeRipples.forEach(t=>{!t.config.persistent&&(1===t.state||t.config.terminateOnPointerUp&&0===t.state)&&t.fadeOut()}))}_runTimeoutOutsideZone(t,e=0){this._ngZone.runOutsideAngular(()=>setTimeout(t,e))}_registerEvents(t){this._ngZone.runOutsideAngular(()=>{t.forEach(t=>{this._triggerElement.addEventListener(t,this,z)})})}_removeTriggerEvents(){this._triggerElement&&(G.forEach(t=>{this._triggerElement.removeEventListener(t,this,z)}),this._pointerUpEventsRegistered&&K.forEach(t=>{this._triggerElement.removeEventListener(t,this,z)}))}}const W=new s.q("mat-ripple-global-options");let Q=(()=>{class t{constructor(t,e,n,r,i){this._elementRef=t,this._animationMode=i,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=r||{},this._rippleRenderer=new H(this,e,t,n)}get disabled(){return this._disabled}set disabled(t){this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,e=0,n){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,e,Object.assign(Object.assign({},this.rippleConfig),n)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),t))}}return t.\u0275fac=function(e){return new(e||t)(s.Jb(s.l),s.Jb(s.z),s.Jb(h),s.Jb(W,8),s.Jb(C.a,8))},t.\u0275dir=s.Eb({type:t,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,e){2&t&&s.Bb("mat-ripple-unbounded",e.unbounded)},inputs:{radius:["matRippleRadius","radius"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"],color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],animation:["matRippleAnimation","animation"]},exportAs:["matRipple"]}),t})(),Y=(()=>{class t{}return t.\u0275mod=s.Hb({type:t}),t.\u0275inj=s.Gb({factory:function(e){return new(e||t)},imports:[[M,l],M]}),t})();const X=["*",[["mat-toolbar-row"]]],J=["*","mat-toolbar-row"];class Z{constructor(t){this._elementRef=t}}const $=F(Z);let tt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=s.Eb({type:t,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),t})(),et=(()=>{class t extends ${constructor(t,e,n){super(t),this._platform=e,this._document=n}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}}return t.\u0275fac=function(e){return new(e||t)(s.Jb(s.l),s.Jb(h),s.Jb(r.c))},t.\u0275cmp=s.Db({type:t,selectors:[["mat-toolbar"]],contentQueries:function(t,e,n){if(1&t&&s.Cb(n,tt,!0),2&t){let t;s.Yb(t=s.Tb())&&(e._toolbarRows=t)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(t,e){2&t&&s.Bb("mat-toolbar-multiple-rows",e._toolbarRows.length>0)("mat-toolbar-single-row",0===e._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[s.wb],ngContentSelectors:J,decls:2,vars:0,template:function(t,e){1&t&&(s.Wb(X),s.Vb(0),s.Vb(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}\n"],encapsulation:2,changeDetection:0}),t})(),nt=(()=>{class t{}return t.\u0275mod=s.Hb({type:t}),t.\u0275inj=s.Gb({factory:function(e){return new(e||t)},imports:[[M],M]}),t})();const rt=["mat-button",""],it=["*"],ot=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"];class st{constructor(t){this._elementRef=t}}const ut=F(V(U(st)));let at=(()=>{class t extends ut{constructor(t,e,n){super(t),this._focusMonitor=e,this._animationMode=n,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const r of ot)this._hasHostAttributes(r)&&this._getHostElement().classList.add(r);t.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(t="program",e){this._focusMonitor.focusVia(this._getHostElement(),t,e)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...t){return t.some(t=>this._getHostElement().hasAttribute(t))}}return t.\u0275fac=function(e){return new(e||t)(s.Jb(s.l),s.Jb(I),s.Jb(C.a,8))},t.\u0275cmp=s.Db({type:t,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(t,e){if(1&t&&s.fc(Q,!0),2&t){let t;s.Yb(t=s.Tb())&&(e.ripple=t.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(t,e){2&t&&(s.Ab("disabled",e.disabled||null),s.Bb("_mat-animation-noopable","NoopAnimations"===e._animationMode)("mat-button-disabled",e.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[s.wb],attrs:rt,ngContentSelectors:it,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(t,e){1&t&&(s.Wb(),s.Mb(0,"span",0),s.Vb(1),s.Lb(),s.Kb(2,"span",1),s.Kb(3,"span",2)),2&t&&(s.zb(2),s.Bb("mat-button-ripple-round",e.isRoundButton||e.isIconButton),s.Xb("matRippleDisabled",e._isRippleDisabled())("matRippleCentered",e.isIconButton)("matRippleTrigger",e._getHostElement()))},directives:[Q],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:block;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),t})(),ct=(()=>{class t{}return t.\u0275mod=s.Hb({type:t}),t.\u0275inj=s.Gb({factory:function(e){return new(e||t)},imports:[[Y,M],M]}),t})();const ht=[{path:o.EMPTY,component:(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s.Db({type:t,selectors:[["app-app-shell"]],decls:8,vars:0,consts:[["color","primary"],["mat-icon-button","",1,"mr-4"],[1,"h4","m-0"],[1,"h6","m-0"]],template:function(t,e){1&t&&(s.Mb(0,"mat-toolbar",0),s.Mb(1,"mat-toolbar-row"),s.Kb(2,"button",1),s.Mb(3,"p",2),s.dc(4,"My App"),s.Lb(),s.Lb(),s.Mb(5,"mat-toolbar-row"),s.Mb(6,"p",3),s.dc(7,"My Subtitle"),s.Lb(),s.Lb(),s.Lb())},directives:[et,tt,at],styles:[""]}),t})()}];let lt=(()=>{class t{}return t.\u0275mod=s.Hb({type:t}),t.\u0275inj=s.Gb({factory:function(e){return new(e||t)},imports:[[i.h.forChild(ht)],i.h]}),t})();var ft=n("qgXg"),pt=n("D0XW");let dt=1;const vt=(()=>Promise.resolve())(),yt={};function bt(t){return t in yt&&(delete yt[t],!0)}const mt={setImmediate(t){const e=dt++;return yt[e]=!0,vt.then(()=>bt(e)&&t()),e},clearImmediate(t){bt(t)}};var gt=n("3N8a");class wt extends gt.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=mt.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(mt.clearImmediate(e),t.scheduled=void 0)}}var _t=n("IjjT");class Et extends _t.a{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,r=-1,i=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++r<i&&(t=e.shift()));if(this.active=!1,n){for(;++r<i&&(t=e.shift());)t.unsubscribe();throw n}}}const Ot=new Et(wt);var It=n("DH7j");class Tt extends w.a{constructor(t,e=0,n=Ot){var r;super(),this.source=t,this.delayTime=e,this.scheduler=n,r=e,(Object(It.a)(r)||!(r-parseFloat(r)+1>=0)||e<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=Ot)}static create(t,e=0,n=Ot){return new Tt(t,e,n)}static dispatch(t){const{source:e,subscriber:n}=t;return this.add(e.subscribe(n))}_subscribe(t){return this.scheduler.schedule(Tt.dispatch,this.delayTime,{source:this.source,subscriber:t})}}class jt{constructor(t,e){this.scheduler=t,this.delay=e}call(t,e){return new Tt(e,this.delay,this.scheduler).subscribe(t)}}var xt=n("pxpQ"),At=n("zIRd");function Nt(){}At.a.registerVersion("firebase","8.0.2","app");class kt{constructor(t,e=ft.b){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,n){const r=this.zone;return this.delegate.schedule(function(e){r.runGuarded(()=>{t.apply(this,[e])})},e,n)}}class St{constructor(t){this.zone=t,this.task=null}call(t,e){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Nt,{},Nt,Nt)),e.pipe(Object(v.a)({next:n,complete:n,error:n})).subscribe(t).add(n)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}class Pt{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new kt(Zone.current)),this.insideAngular=t.run(()=>new kt(Zone.current,pt.b))}}const Ct=["ngOnDestroy"],Dt=new s.q("angularfire2.app.options"),Rt=new s.q("angularfire2.app.nameOrConfig"),Lt=new s.P("6.0.5");function Mt(t,e,n){const r="object"==typeof n&&n||{};return r.name=r.name||"string"==typeof n&&n||"[DEFAULT]",At.a.apps.filter(t=>t&&t.name===r.name)[0]||e.runOutsideAngular(()=>At.a.initializeApp(t,r))}const Vt={provide:class{},useFactory:Mt,deps:[Dt,s.z,[new s.A,Rt]]};let Ft=(()=>{class t{constructor(t){At.a.registerVersion("angularfire",Lt.full,t.toString()),At.a.registerVersion("angular",s.O.full)}static initializeApp(e,n){return{ngModule:t,providers:[{provide:Dt,useValue:e},{provide:Rt,useValue:n}]}}}return t.\u0275mod=s.Hb({type:t}),t.\u0275inj=s.Gb({factory:function(e){return new(e||t)(s.Pb(s.B))},providers:[Vt]}),t})();var Ut=n("Cfvw"),qt=n("Kqap");function Bt(t,e){return function(t,e=pt.b){return new w.a(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot(n)}):r=t.onSnapshot(n),()=>{null!=r&&r()}})}(t,e)}function zt(t,e){return Bt(t,e).pipe(Object(b.a)(t=>({payload:t,type:"query"})))}function Gt(t,e){return zt(t,e).pipe(Object(b.a)(t=>t.payload.docChanges().map(t=>({type:t.type,payload:t}))))}function Kt(t,e,n){return zt(t,n).pipe(Object(b.a)(t=>t.payload.docChanges()),Object(qt.a)((t,n)=>function(t,e,n){return e.forEach(e=>{n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":t[e.newIndex]&&t[e.newIndex].doc.ref.isEqual(e.doc.ref)||t.splice(e.newIndex,0,e);break;case"modified":(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref))&&(e.oldIndex!==e.newIndex?(t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e)):t.splice(e.newIndex,1,e));break;case"removed":t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref)&&t.splice(e.oldIndex,1)}return t}(t,e))}),t}(t,n,e),[]),Object(b.a)(t=>t.map(t=>({type:t.type,payload:t}))))}function Ht(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}n("xsWp");class Wt{constructor(t,e,n){this.ref=t,this.query=e,this.afs=n}stateChanges(t){return t&&0!==t.length?Gt(this.query,this.afs.schedulers.outsideAngular).pipe(Object(b.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)),Object(y.a)(t=>t.length>0),this.afs.keepUnstableUntilFirst):Gt(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(Object(qt.a)((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=Ht(t);return Kt(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return zt(this.query,this.afs.schedulers.outsideAngular).pipe(Object(b.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(Ut.a)(this.query.get(t)).pipe(Object(xt.b)(this.afs.schedulers.insideAngular))}add(t){return this.ref.add(t)}doc(t){return new Qt(this.ref.doc(t),this.afs)}}class Qt{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const n=this.ref.collection(t),{ref:r,query:i}=te(n,e);return new Wt(r,i,this.afs)}snapshotChanges(){return Bt(this.ref,this.afs.schedulers.outsideAngular).pipe(Object(b.a)(t=>({payload:t,type:"value"}))).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(){return this.snapshotChanges().pipe(Object(b.a)(t=>t.payload.data()))}get(t){return Object(Ut.a)(this.ref.get(t)).pipe(Object(xt.b)(this.afs.schedulers.insideAngular))}}class Yt{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?Gt(this.query,this.afs.schedulers.outsideAngular).pipe(Object(b.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)),Object(y.a)(t=>t.length>0),this.afs.keepUnstableUntilFirst):Gt(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(Object(qt.a)((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=Ht(t);return Kt(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(){return zt(this.query,this.afs.schedulers.outsideAngular).pipe(Object(b.a)(t=>t.payload.docs.map(t=>t.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(Ut.a)(this.query.get(t)).pipe(Object(xt.b)(this.afs.schedulers.insideAngular))}}const Xt=n("xsWp"),Jt=new s.q("angularfire2.enableFirestorePersistence"),Zt=new s.q("angularfire2.firestore.persistenceSettings"),$t=new s.q("angularfire2.firestore.settings");function te(t,e=(t=>t)){return{query:e(t),ref:t}}let ee=(()=>{class t{constructor(t,e,n,i,o,s,u){var a;this.schedulers=new Pt(s),this.keepUnstableUntilFirst=(a=this.schedulers,function(t){return(t=t.lift(new St(a.ngZone))).pipe(function(t,e=0){return function(n){return n.lift(new jt(t,e))}}(a.outsideAngular),Object(xt.b)(a.insideAngular))}),this.firestore=s.runOutsideAngular(()=>{const n=Mt(t,s,e);"registerFirestore"in Xt&&Xt.registerFirestore(At.a);const r=n.firestore();return i&&r.settings(i),r}),this.persistenceEnabled$=n&&!Object(r.m)(o)?s.runOutsideAngular(()=>{try{return Object(Ut.a)(this.firestore.enablePersistence(u||void 0).then(()=>!0,()=>!1))}catch(t){return Object(d.a)(!1)}}):Object(d.a)(!1)}collection(t,e){let n;n="string"==typeof t?this.firestore.collection(t):t;const{ref:r,query:i}=te(n,e),o=this.schedulers.ngZone.run(()=>r);return new Wt(o,i,this)}collectionGroup(t,e){const n=e||(t=>t),r=this.firestore.collectionGroup(t);return new Yt(n(r),this)}doc(t){let e;e="string"==typeof t?this.firestore.doc(t):t;const n=this.schedulers.ngZone.run(()=>e);return new Qt(n,this)}createId(){return this.firestore.collection("_").doc().id}}return t.\u0275fac=function(e){return new(e||t)(s.Pb(Dt),s.Pb(Rt,8),s.Pb(Jt,8),s.Pb($t,8),s.Pb(s.B),s.Pb(s.z),s.Pb(Zt,8))},t.\u0275prov=Object(s.Fb)({factory:function(){return new t(Object(s.Pb)(Dt),Object(s.Pb)(Rt,8),Object(s.Pb)(Jt,8),Object(s.Pb)($t,8),Object(s.Pb)(s.B),Object(s.Pb)(s.z),Object(s.Pb)(Zt,8))},token:t,providedIn:"any"}),t})(),ne=(()=>{class t{static enablePersistence(e){return{ngModule:t,providers:[{provide:Jt,useValue:!0},{provide:Zt,useValue:e}]}}}return t.\u0275mod=s.Hb({type:t}),t.\u0275inj=s.Gb({factory:function(e){return new(e||t)},providers:[ee]}),t})();var re=n("EY2u"),ie=n("eIep"),oe=n("jtHE"),se=n("zp1y"),ue=n("OQgR"),ae=n("5+tZ"),ce=n("7o/Q");class he{call(t,e){return e.subscribe(new le(t))}}class le extends ce.a{constructor(t){super(t),this.hasPrev=!1}_next(t){let e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}var fe=n("jhN1");const pe=new s.q("angularfire2.analytics.analyticsCollectionEnabled"),de=new s.q("angularfire2.analytics.appVersion"),ve=new s.q("angularfire2.analytics.appName"),ye=new s.q("angularfire2.analytics.debugMode"),be=new s.q("angularfire2.analytics.config");let me,ge;const we={};let _e=(()=>{class t{constructor(t,e,i,o,s,u,a,c,h){this.options=t,ge||(Object(r.l)(c)?(window.dataLayer=window.dataLayer||[],me=window.gtag||function(...t){window.dataLayer.push(arguments)},ge=h.runOutsideAngular(()=>new Promise(t=>{window.gtag=(...e)=>{"js"===e[0]&&t(),me(...e)}}))):(me=()=>{},ge=Promise.resolve()));let l=we[t.measurementId];return l||(l=Object(d.a)(void 0).pipe(Object(xt.b)(new Pt(h).outsideAngular),Object(ie.a)(()=>Object(r.l)(c)?n.e(5).then(n.bind(null,"AAub")):re.a),Object(b.a)(()=>Mt(t,h,e)),Object(b.a)(t=>t.analytics()),Object(v.a)(t=>{!1===i&&t.setAnalyticsCollectionEnabled(!1)}),function(t,e,n){let r;return r=t&&"object"==typeof t?t:{bufferSize:t,windowTime:void 0,refCount:!1,scheduler:void 0},t=>t.lift(function({bufferSize:t=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:n,scheduler:r}){let i,o,s=0,u=!1,a=!1;return function(c){let h;s++,!i||u?(u=!1,i=new oe.a(t,e,r),h=i.subscribe(this),o=c.subscribe({next(t){i.next(t)},error(t){u=!0,i.error(t)},complete(){a=!0,o=void 0,i.complete()}})):h=i.subscribe(this),this.add(()=>{s--,h.unsubscribe(),o&&!a&&n&&0===s&&(o.unsubscribe(),o=void 0,i=void 0)})}}(r))}({bufferSize:1,refCount:!1})),we[t.measurementId]=l),a&&this.updateConfig(a),s&&this.updateConfig({app_name:s}),o&&this.updateConfig({app_version:o}),u&&this.updateConfig({debug_mode:1}),((t,e,n)=>new Proxy(t,{get:(r,i)=>n.runOutsideAngular(()=>{if(t[i])return t[i];if(Ct.indexOf(i)>-1)return()=>{};const r=e.toPromise().then(t=>{const e=t&&t[i];return"function"==typeof e?e.bind(t):e&&e.then?e.then(t=>n.run(()=>t)):n.run(()=>e)});return new Proxy(()=>{},{get:(t,e)=>r[e],apply:(t,e,n)=>r.then(t=>t&&t(...n))})})}))(this,l,h)}updateConfig(t){return e=this,void 0,r=function*(){yield ge,me("config",this.options.measurementId,Object.assign(Object.assign({},t),{update:!0}))},new((n=void 0)||(n=Promise))(function(t,i){function o(t){try{u(r.next(t))}catch(e){i(e)}}function s(t){try{u(r.throw(t))}catch(e){i(e)}}function u(e){var r;e.done?t(e.value):(r=e.value,r instanceof n?r:new n(function(t){t(r)})).then(o,s)}u((r=r.apply(e,[])).next())});var e,n,r}}return t.\u0275fac=function(e){return new(e||t)(s.Pb(Dt),s.Pb(Rt,8),s.Pb(pe,8),s.Pb(de,8),s.Pb(ve,8),s.Pb(ye,8),s.Pb(be,8),s.Pb(s.B),s.Pb(s.z))},t.\u0275prov=Object(s.Fb)({factory:function(){return new t(Object(s.Pb)(Dt),Object(s.Pb)(Rt,8),Object(s.Pb)(pe,8),Object(s.Pb)(de,8),Object(s.Pb)(ve,8),Object(s.Pb)(ye,8),Object(s.Pb)(be,8),Object(s.Pb)(s.B),Object(s.Pb)(s.z))},token:t,providedIn:"any"}),t})();var Ee;Ee=_e,[{app:null,logEvent:null,setCurrentScreen:null,setUserId:null,setUserProperties:null,setAnalyticsCollectionEnabled:null}].forEach(t=>{Object.getOwnPropertyNames(t.prototype||t).forEach(e=>{Object.defineProperty(Ee.prototype,e,Object.getOwnPropertyDescriptor(t.prototype||t,e))})});const Oe="page_path",Ie="screen_class",Te="screen_view",je="???",xe="__annotations__";let Ae=Math.floor(Math.random()*(Math.pow(2,32)-1))-Math.pow(2,31);const Ne={},ke=t=>{const e=[t.screen_class,t.outlet].join("#");if(Ne.hasOwnProperty(e))return Ne[e];{const t=Ae++;return Ne[e]=t,t}};let Se=(()=>{class t{constructor(t,e,n,o,u,a,c,h){if(!e||!Object(r.l)(u))return this;c.runOutsideAngular(()=>{const r=e.events.pipe(Object(y.a)(t=>t instanceof i.a)),u=e.events.pipe(Object(y.a)(t=>t instanceof i.c));this.disposable=u.pipe(Object(se.a)(r),Object(ie.a)(([t,e])=>{const r=t.url,u=e.snapshot.routeConfig&&e.snapshot.routeConfig.path||r,a={screen_name:u,[Oe]:r,firebase_event_origin:"auto",firebase_screen:u,outlet:e.snapshot.outlet};n&&(a.page_title=n.getTitle());const c=e.snapshot.component,l=e.snapshot.routeConfig,f=l&&l.loadChildren;if("string"==typeof f)return Object(d.a)(Object.assign(Object.assign({},a),{[Ie]:f.split("#")[1]}));if("string"==typeof c)return Object(d.a)(Object.assign(Object.assign({},a),{[Ie]:c}));if(c){const t=o.resolveComponentFactory(c);return Object(d.a)(Object.assign(Object.assign({},a),{[Ie]:t.selector}))}if(f){const t=f();return(t instanceof w.a?t:Object(Ut.a)(Promise.resolve(t))).pipe(Object(b.a)(t=>{if(!(t instanceof s.v)){const e=[].concat.apply([],(t[xe]||[]).map(t=>t.declarations)),n=[].concat.apply([],e.map(t=>(t[xe]||[]).map(t=>t.selector)));return Object.assign(Object.assign({},a),{[Ie]:n[0]||je})}{const n=t.create(h),r=n.injector.get(i.f)[0][0].component;try{const t=n.componentFactoryResolver.resolveComponentFactory(r);return Object.assign(Object.assign({},a),{[Ie]:t.selector})}catch(e){return Object.assign(Object.assign({},a),{[Ie]:je})}}}))}return Object(d.a)(Object.assign(Object.assign({},a),{[Ie]:je}))}),Object(b.a)(t=>Object.assign({firebase_screen_class:t.screen_class,firebase_screen_id:ke(t)},t)),Object(v.a)(e=>{"primary"===e.outlet&&(t.setCurrentScreen(e.screen_name),t.updateConfig({[Oe]:e.page_path,[Ie]:e.screen_class}),n&&t.updateConfig({page_title:e.page_title}))}),Object(ue.a)(t=>t.outlet),Object(ae.a)(t=>t.pipe(Object(P.a)(void 0),t=>t.lift(new he))),Object(b.a)(([t,e])=>t?Object.assign({firebase_previous_class:t.screen_class,firebase_previous_screen:t.screen_name,firebase_previous_id:t.firebase_screen_id},e):e),Object(v.a)(t=>a&&console.info(Te,t)),Object(v.a)(e=>c.runOutsideAngular(()=>t.logEvent(Te,e)))).subscribe()})}ngOnDestroy(){this.disposable&&this.disposable.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(s.Pb(_e),s.Pb(i.g,8),s.Pb(fe.c,8),s.Pb(s.j),s.Pb(s.B),s.Pb(ye,8),s.Pb(s.z),s.Pb(s.r))},t.\u0275prov=s.Fb({token:t,factory:t.\u0275fac}),t})(),Pe=(()=>{class t{constructor(t,e,i){const o=new Pt(e);Object(r.m)(i)||e.runOutsideAngular(()=>{this.disposable=Object(Ut.a)(n.e(6).then(n.bind(null,"6nsN"))).pipe(Object(xt.b)(o.outsideAngular),Object(ie.a)(()=>t.app),Object(b.a)(t=>t.auth()),Object(ie.a)(t=>new w.a(t.onAuthStateChanged.bind(t))),Object(ie.a)(e=>t.setUserId(e?e.uid:null))).subscribe()})}ngOnDestroy(){this.disposable&&this.disposable.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(s.Pb(_e),s.Pb(s.z),s.Pb(s.B))},t.\u0275prov=s.Fb({token:t,factory:t.\u0275fac}),t})(),Ce=(()=>{class t{constructor(t,e,n){t.app.then(()=>{})}}return t.\u0275mod=s.Hb({type:t}),t.\u0275inj=s.Gb({factory:function(e){return new(e||t)(s.Pb(_e),s.Pb(Se,8),s.Pb(Pe,8))},providers:[_e]}),t})();var De=n("AytR");const Re=[Ft.initializeApp(De.a.firebaseConfig),ne,Ce,ne.enablePersistence()];let Le=(()=>{class t{}return t.\u0275mod=s.Hb({type:t}),t.\u0275inj=s.Gb({factory:function(e){return new(e||t)},imports:[[...Re],ne]}),t})();function Me(t){return(Me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ve(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Fe(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){Ve(t,e,n[e])})}return t}function Ue(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var s,u=t[Symbol.iterator]();!(r=(s=u.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(a){i=!0,o=a}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var qe={},Be={};try{"undefined"!=typeof window&&(qe=window),"undefined"!=typeof document&&(Be=document),"undefined"!=typeof MutationObserver&&MutationObserver,"undefined"!=typeof performance&&performance}catch(zn){}var ze=(qe.navigator||{}).userAgent,Ge=void 0===ze?"":ze,Ke=qe,He=Be,We=!!He.documentElement&&!!He.head&&"function"==typeof He.addEventListener&&"function"==typeof He.createElement,Qe=(~Ge.indexOf("MSIE")||Ge.indexOf("Trident/"),"svg-inline--fa"),Ye=[1,2,3,4,5,6,7,8,9,10],Xe=Ye.concat([11,12,13,14,15,16,17,18,19,20]),Je={GROUP:"group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},Ze=(["xs","sm","lg","fw","ul","li","border","pull-left","pull-right","spin","pulse","rotate-90","rotate-180","rotate-270","flip-horizontal","flip-vertical","flip-both","stack","stack-1x","stack-2x","inverse","layers","layers-text","layers-counter",Je.GROUP,Je.SWAP_OPACITY,Je.PRIMARY,Je.SECONDARY].concat(Ye.map(function(t){return"".concat(t,"x")})).concat(Xe.map(function(t){return"w-".concat(t)})),Ke.FontAwesomeConfig||{});He&&"function"==typeof He.querySelector&&[["data-family-prefix","familyPrefix"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach(function(t){var e=Ue(t,2),n=e[1],r=function(t){return""===t||"false"!==t&&("true"===t||t)}(function(t){var e=He.querySelector("script["+t+"]");if(e)return e.getAttribute(t)}(e[0]));null!=r&&(Ze[n]=r)});var $e=Fe({},{familyPrefix:"fa",replacementClass:Qe,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0},Ze);$e.autoReplaceSvg||($e.observeMutations=!1);var tn=Fe({},$e);Ke.FontAwesomeConfig=tn;var en=Ke||{};en.___FONT_AWESOME___||(en.___FONT_AWESOME___={}),en.___FONT_AWESOME___.styles||(en.___FONT_AWESOME___.styles={}),en.___FONT_AWESOME___.hooks||(en.___FONT_AWESOME___.hooks={}),en.___FONT_AWESOME___.shims||(en.___FONT_AWESOME___.shims=[]);var nn=en.___FONT_AWESOME___,rn=[];We&&((He.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(He.readyState)||He.addEventListener("DOMContentLoaded",function t(){He.removeEventListener("DOMContentLoaded",t),rn.map(function(t){return t()})}));var on,sn="pending",un="settled",an="fulfilled",cn="rejected",hn=function(){},ln="undefined"!=typeof global&&void 0!==global.process&&"function"==typeof global.process.emit,fn="undefined"==typeof setImmediate?setTimeout:setImmediate,pn=[];function dn(){for(var t=0;t<pn.length;t++)pn[t][0](pn[t][1]);pn=[],on=!1}function vn(t,e){pn.push([t,e]),on||(on=!0,fn(dn,0))}function yn(t){var e=t.owner,n=e._state,r=e._data,i=t[n],o=t.then;if("function"==typeof i){n=an;try{r=i(r)}catch(zn){wn(o,zn)}}bn(o,r)||(n===an&&mn(o,r),n===cn&&wn(o,r))}function bn(t,e){var n;try{if(t===e)throw new TypeError("A promises callback cannot return that same promise.");if(e&&("function"==typeof e||"object"===Me(e))){var r=e.then;if("function"==typeof r)return r.call(e,function(r){n||(n=!0,e===r?gn(t,r):mn(t,r))},function(e){n||(n=!0,wn(t,e))}),!0}}catch(zn){return n||wn(t,zn),!0}return!1}function mn(t,e){t!==e&&bn(t,e)||gn(t,e)}function gn(t,e){t._state===sn&&(t._state=un,t._data=e,vn(En,t))}function wn(t,e){t._state===sn&&(t._state=un,t._data=e,vn(On,t))}function _n(t){t._then=t._then.forEach(yn)}function En(t){t._state=an,_n(t)}function On(t){t._state=cn,_n(t),!t._handled&&ln&&global.process.emit("unhandledRejection",t._data,t)}function In(t){global.process.emit("rejectionHandled",t)}function Tn(t){if("function"!=typeof t)throw new TypeError("Promise resolver "+t+" is not a function");if(this instanceof Tn==0)throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this._then=[],function(t,e){function n(t){wn(e,t)}try{t(function(t){mn(e,t)},n)}catch(zn){n(zn)}}(t,this)}Tn.prototype={constructor:Tn,_state:sn,_then:null,_data:void 0,_handled:!1,then:function(t,e){var n={owner:this,then:new this.constructor(hn),fulfilled:t,rejected:e};return!e&&!t||this._handled||(this._handled=!0,this._state===cn&&ln&&vn(In,this)),this._state===an||this._state===cn?vn(yn,n):this._then.push(n),n.then},catch:function(t){return this.then(null,t)}},Tn.all=function(t){if(!Array.isArray(t))throw new TypeError("You must pass an array to Promise.all().");return new Tn(function(e,n){var r=[],i=0;function o(t){return i++,function(n){r[t]=n,--i||e(r)}}for(var s,u=0;u<t.length;u++)(s=t[u])&&"function"==typeof s.then?s.then(o(u),n):r[u]=s;i||e(r)})},Tn.race=function(t){if(!Array.isArray(t))throw new TypeError("You must pass an array to Promise.race().");return new Tn(function(e,n){for(var r,i=0;i<t.length;i++)(r=t[i])&&"function"==typeof r.then?r.then(e,n):e(r)})},Tn.resolve=function(t){return t&&"object"===Me(t)&&t.constructor===Tn?t:new Tn(function(e){e(t)})},Tn.reject=function(t){return new Tn(function(e,n){n(t)})};var jn=function(t,e,n,r){var i,o,s,u=Object.keys(t),a=u.length,c=void 0!==r?function(t,e){return function(n,r,i,o){return t.call(e,n,r,i,o)}}(e,r):e;for(void 0===n?(i=1,s=t[u[0]]):(i=0,s=n);i<a;i++)s=c(s,t[o=u[i]],o,t);return s};function xn(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.skipHooks,i=void 0!==r&&r,o=Object.keys(e).reduce(function(t,n){var r=e[n];return r.icon?t[r.iconName]=r.icon:t[n]=r,t},{});"function"!=typeof nn.hooks.addPack||i?nn.styles[t]=Fe({},nn.styles[t]||{},o):nn.hooks.addPack(t,o),"fas"===t&&xn("fa",e)}var An=nn.styles,Nn=nn.shims,kn=function(){var t=function(t){return jn(An,function(e,n,r){return e[r]=jn(n,t,{}),e},{})};t(function(t,e,n){return e[3]&&(t[e[3]]=n),t}),t(function(t,e,n){var r=e[2];return t[n]=n,r.forEach(function(e){t[e]=n}),t});var e="far"in An;jn(Nn,function(t,n){var r=n[1];return"far"!==r||e||(r="fas"),t[n[0]]={prefix:r,iconName:n[2]},t},{})};function Sn(t){this.name="MissingIcon",this.message=t||"Icon unavailable",this.stack=(new Error).stack}kn(),(Sn.prototype=Object.create(Error.prototype)).constructor=Sn;var Pn={fill:"currentColor"},Cn={attributeType:"XML",repeatCount:"indefinite",dur:"2s"},Dn=(Fe({},Pn,{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"}),Fe({},Cn,{attributeName:"opacity"}));Fe({},Pn,{cx:"256",cy:"364",r:"28"}),Fe({},Cn,{attributeName:"r",values:"28;14;28;28;14;28;"}),Fe({},Dn,{values:"1;0;1;1;0;1;"}),Fe({},Pn,{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),Fe({},Dn,{values:"1;0;0;0;0;1;"}),Fe({},Pn,{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),Fe({},Dn,{values:"0;0;1;1;0;0;"}),new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.definitions={}}var e;return(e=[{key:"add",value:function(){for(var t=this,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n.reduce(this._pullDefinitions,{});Object.keys(i).forEach(function(e){t.definitions[e]=Fe({},t.definitions[e]||{},i[e]),xn(e,i[e]),kn()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(t,e){var n=e.prefix&&e.iconName&&e.icon?{0:e}:e;return Object.keys(n).map(function(e){var r=n[e],i=r.prefix,o=r.iconName,s=r.icon;t[i]||(t[i]={}),t[i][o]=s}),t}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}());let Rn=(()=>{class t{}return t.\u0275mod=s.Hb({type:t}),t.\u0275inj=s.Gb({factory:function(e){return new(e||t)}}),t})(),Ln=(()=>{class t{}return t.\u0275mod=s.Hb({type:t}),t.\u0275inj=s.Gb({factory:function(e){return new(e||t)},imports:[[Rn],Rn]}),t})();const Mn=[nt,ct];let Vn=(()=>{class t{}return t.\u0275mod=s.Hb({type:t}),t.\u0275inj=s.Gb({factory:function(e){return new(e||t)},imports:[[...Mn],nt,ct]}),t})();const Fn=[Le,Vn,Ln],Un=[r.b,lt,(()=>{class t{}return t.\u0275mod=s.Hb({type:t}),t.\u0275inj=s.Gb({factory:function(e){return new(e||t)},imports:[[...Fn],Le,Vn,Ln]}),t})()];let qn=(()=>{class t{}return t.\u0275mod=s.Hb({type:t}),t.\u0275inj=s.Gb({factory:function(e){return new(e||t)},imports:[[...Un]]}),t})()},"q/0M":function(t,e,n){"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,u=o.length;s<u;s++,i++)r[i]=o[s];return r}var i;n.d(e,"a",function(){return s}),n.d(e,"b",function(){return l}),n.d(e,"c",function(){return f}),n.d(e,"d",function(){return p});var o=[],s=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}({}),u={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},a=s.INFO,c=((i={})[s.DEBUG]="log",i[s.VERBOSE]="log",i[s.INFO]="info",i[s.WARN]="warn",i[s.ERROR]="error",i),h=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),s=c[e];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[s].apply(console,r(["["+o+"]  "+t.name+":"],n))}},l=function(){function t(t){this.name=t,this._logLevel=a,this._logHandler=h,this._userLogHandler=null,o.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in s))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?u[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.DEBUG],t)),this._logHandler.apply(this,r([this,s.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.VERBOSE],t)),this._logHandler.apply(this,r([this,s.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.INFO],t)),this._logHandler.apply(this,r([this,s.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.WARN],t)),this._logHandler.apply(this,r([this,s.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.ERROR],t)),this._logHandler.apply(this,r([this,s.ERROR],t))},t}();function f(t){o.forEach(function(e){e.setLogLevel(t)})}function p(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=u[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var u=i.map(function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}}).filter(function(t){return t}).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:s[n].toLowerCase(),message:u,args:i,type:e.name})}},r=0,i=o;r<i.length;r++)n(i[r])}},qOnz:function(t,e,n){"use strict";n.d(e,"a",function(){return s}),n.d(e,"b",function(){return w}),n.d(e,"c",function(){return g}),n.d(e,"d",function(){return m}),n.d(e,"e",function(){return x}),n.d(e,"f",function(){return O}),n.d(e,"g",function(){return I}),n.d(e,"h",function(){return i}),n.d(e,"i",function(){return o}),n.d(e,"j",function(){return u}),n.d(e,"k",function(){return h}),n.d(e,"l",function(){return l}),n.d(e,"m",function(){return p}),n.d(e,"n",function(){return d}),n.d(e,"o",function(){return y}),n.d(e,"p",function(){return a}),n.d(e,"q",function(){return c}),n.d(e,"r",function(){return f}),n.d(e,"s",function(){return v}),n.d(e,"t",function(){return b});var r=n("os0x");function i(t){return o(void 0,t)}function o(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=o(t[n],e[n]));return t}var s=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,r))}},t}();function u(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function a(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(u())}function c(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}function h(){return"object"==typeof self&&self.self===self}function l(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function f(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function p(){return u().indexOf("Electron/")>=0}function d(){var t=u();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function v(){return u().indexOf("MSAppHost/")>=0}function y(){return"indexedDB"in self&&null!=indexedDB}function b(){return new Promise(function(t,e){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=window.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||window.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var t;e((null===(t=i.error)||void 0===t?void 0:t.message)||"")}}catch(o){e(o)}})}function m(){return!(!navigator||!navigator.cookieEnabled)}var g=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,w.prototype.create),o}return Object(r.c)(e,t),e}(Error),w=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?_(o,r):"Error",u=this.serviceName+": "+s+" ("+i+").",a=new g(i,u,r);return a},t}();function _(t,e){return t.replace(E,function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"})}var E=/\{\$([^}]+)}/g;function O(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function I(t,e){var n=new T(t,e);return n.subscribe.bind(n)}var T=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=j),void 0===r.error&&(r.error=j),void 0===r.complete&&(r.complete=j);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}();function j(){}function x(t,e,n){void 0===e&&(e=1e3),void 0===n&&(n=2);var r=e*Math.pow(n,t),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(144e5,r+i)}},xsWp:function(t,e,n){"use strict";n.r(e),n.d(e,"__PRIVATE_registerFirestore",function(){return Yf});var r=n("os0x"),i=n("zIRd"),o=n("q/0M"),s=n("qOnz"),u=function(t,e){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function a(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var c,h="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},l=l||{},f=h||self;function p(){}function d(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function v(t){var e=d(t);return"array"==e||"object"==e&&"number"==typeof t.length}function y(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var b="closure_uid_"+(1e9*Math.random()>>>0),m=0;function g(t,e,n){return t.call.apply(t.bind,arguments)}function w(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function _(t,e,n){return(_=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?g:w).apply(null,arguments)}function E(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var O=Date.now;function I(t,e){function n(){}n.prototype=e.prototype,t.S=e.prototype,t.prototype=new n,t.prototype.constructor=t}function T(){this.j=this.j,this.i=this.i}T.prototype.j=!1,T.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,b)&&t[b]||(t[b]=++m)}(this)},T.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var j=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},x=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function A(t){return Array.prototype.concat.apply([],arguments)}function N(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function k(t){return/^[\s\xa0]*$/.test(t)}var S,P=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function C(t,e){return-1!=t.indexOf(e)}function D(t,e){return t<e?-1:t>e?1:0}t:{var R=f.navigator;if(R){var L=R.userAgent;if(L){S=L;break t}}S=""}function M(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function V(t){var e={};for(var n in t)e[n]=t[n];return e}var F="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function U(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<F.length;o++)n=F[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function q(t){return q[" "](t),t}q[" "]=p;var B,z,G=C(S,"Opera"),K=C(S,"Trident")||C(S,"MSIE"),H=C(S,"Edge"),W=H||K,Q=C(S,"Gecko")&&!(C(S.toLowerCase(),"webkit")&&!C(S,"Edge"))&&!(C(S,"Trident")||C(S,"MSIE"))&&!C(S,"Edge"),Y=C(S.toLowerCase(),"webkit")&&!C(S,"Edge");function X(){var t=f.document;return t?t.documentMode:void 0}t:{var J="",Z=(z=S,Q?/rv:([^\);]+)(\)|;)/.exec(z):H?/Edge\/([\d\.]+)/.exec(z):K?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(z):Y?/WebKit\/(\S+)/.exec(z):G?/(?:Version)[ \/]?(\S+)/.exec(z):void 0);if(Z&&(J=Z?Z[1]:""),K){var $=X();if(null!=$&&$>parseFloat(J)){B=String($);break t}}B=J}var tt={};function et(t){return function(t,e){var n=tt;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,function(){for(var e=0,n=P(String(B)).split("."),r=P(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",u=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==s[0].length&&0==u[0].length)break;e=D(0==s[1].length?0:parseInt(s[1],10),0==u[1].length?0:parseInt(u[1],10))||D(0==s[2].length,0==u[2].length)||D(s[2],u[2]),s=s[3],u=u[3]}while(0==e)}return 0<=e})}var nt=f.document&&K&&(X()||parseInt(B,10))||void 0,rt=!K||9<=Number(nt),it=K&&!et("9"),ot=function(){if(!f.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{f.addEventListener("test",p,e),f.removeEventListener("test",p,e)}catch(n){}return t}();function st(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function ut(t,e){if(st.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(Q){t:{try{q(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:at[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}st.prototype.b=function(){this.defaultPrevented=!0},I(ut,st);var at={2:"touch",3:"pen",4:"mouse"};ut.prototype.b=function(){ut.S.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,it)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(ar){}};var ct="closure_listenable_"+(1e6*Math.random()|0),ht=0;function lt(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++ht,this.Y=this.Z=!1}function ft(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function pt(t){this.src=t,this.a={},this.b=0}function dt(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=j(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(ft(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function vt(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}pt.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=vt(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new lt(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var yt="closure_lm_"+(1e6*Math.random()|0),bt={};function mt(t,e,n,r,i){if(r&&r.once)return wt(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)mt(t,e[o],n,r,i);return null}return n=At(n),t&&t[ct]?t.va(e,n,y(r)?!!r.capture:!!r,i):gt(t,e,n,!1,r,i)}function gt(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=y(i)?!!i.capture:!!i;if(s&&!rt)return null;var u=jt(t);if(u||(t[yt]=u=new pt(t)),(n=u.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=Tt,e=rt?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)ot||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Ot(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function wt(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)wt(t,e[o],n,r,i);return null}return n=At(n),t&&t[ct]?t.wa(e,n,y(r)?!!r.capture:!!r,i):gt(t,e,n,!0,r,i)}function _t(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)_t(t,e[o],n,r,i);else r=y(r)?!!r.capture:!!r,n=At(n),t&&t[ct]?(t=t.c,(e=String(e).toString())in t.a&&-1<(n=vt(o=t.a[e],n,r,i))&&(ft(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=jt(t))&&(e=t.a[e.toString()],t=-1,e&&(t=vt(e,n,r,i)),(n=-1<t?e[t]:null)&&Et(n))}function Et(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[ct])dt(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Ot(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=jt(e))?(dt(n,t),0==n.b&&(n.src=null,e[yt]=null)):ft(t)}}}function Ot(t){return t in bt?bt[t]:bt[t]="on"+t}function It(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&Et(t),n.call(r,e)}function Tt(t,e){if(t.Y)return!0;if(!rt){if(!e)t:{e=["window","event"];for(var n=f,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return It(t,e=new ut(e,this))}return It(t,new ut(e,this))}function jt(t){return(t=t[yt])instanceof pt?t:null}var xt="__closure_events_fn_"+(1e9*Math.random()>>>0);function At(t){return"function"==d(t)?t:(t[xt]||(t[xt]=function(e){return t.handleEvent(e)}),t[xt])}function Nt(){T.call(this),this.c=new pt(this),this.J=this,this.C=null}function kt(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var u=s.listener,a=s.ca||s.src;s.Z&&dt(t.c,s),i=!1!==u.call(a,r)&&i}}return i&&!r.defaultPrevented}I(Nt,T),Nt.prototype[ct]=!0,(c=Nt.prototype).addEventListener=function(t,e,n,r){mt(this,t,e,n,r)},c.removeEventListener=function(t,e,n,r){_t(this,t,e,n,r)},c.dispatchEvent=function(t){var e,n=this.C;if(n)for(e=[];n;n=n.C)e.push(n);n=this.J;var r=t.type||t;if("string"==typeof t)t=new st(t,n);else if(t instanceof st)t.target=t.target||n;else{var i=t;U(t=new st(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var s=t.a=e[o];i=kt(s,r,!0,t)&&i}if(i=kt(s=t.a=n,r,!0,t)&&i,i=kt(s,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=kt(s=t.a=e[o],r,!1,t)&&i;return i},c.G=function(){if(Nt.S.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)ft(n[r]);delete e.a[t],e.b--}}this.C=null},c.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},c.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var St=f.JSON.stringify;function Pt(){this.b=this.a=null}var Ct,Dt=new(function(){function t(t,e,n){this.f=n,this.c=t,this.g=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,this.a=(t=this.a).next,t.next=null):t=this.c(),t},t}())(function(){return new Lt},function(t){t.reset()},100);function Rt(){var t=Ut,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function Lt(){this.next=this.b=this.a=null}function Mt(t){f.setTimeout(function(){throw t},0)}function Vt(t,e){Ct||function(){var t=f.Promise.resolve(void 0);Ct=function(){t.then(qt)}}(),Ft||(Ct(),Ft=!0),Ut.add(t,e)}Pt.prototype.add=function(t,e){var n=Dt.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Lt.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},Lt.prototype.reset=function(){this.next=this.b=this.a=null};var Ft=!1,Ut=new Pt;function qt(){for(var t;t=Rt();){try{t.a.call(t.b)}catch(n){Mt(n)}var e=Dt;e.g(t),e.b<e.f&&(e.b++,t.next=e.a,e.a=t)}Ft=!1}function Bt(t,e){Nt.call(this),this.b=t||1,this.a=e||f,this.f=_(this.Ya,this),this.g=O()}function zt(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function Gt(t,e,n){if("function"==d(t))n&&(t=_(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=_(t.handleEvent,t)}return 2147483647<Number(e)?-1:f.setTimeout(t,e||0)}function Kt(t){t.a=Gt(function(){t.a=null,t.c&&(t.c=!1,Kt(t))},t.h);var e=t.b;t.b=null,t.g.apply(null,e)}I(Bt,Nt),(c=Bt.prototype).aa=!1,c.M=null,c.Ya=function(){if(this.aa){var t=O()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),this.dispatchEvent("tick"),this.aa&&(zt(this),this.start()))}},c.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=O())},c.G=function(){Bt.S.G.call(this),zt(this),delete this.a};var Ht=function(t){function e(e,n,r){var i=t.call(this)||this;return i.g=null!=r?e.bind(r):e,i.h=n,i.b=null,i.c=!1,i.a=null,i}return function(t,e){function n(){this.constructor=t}u(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:Kt(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(f.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(T);function Wt(t){T.call(this),this.b=t,this.a={}}I(Wt,T);var Qt=[];function Yt(t,e,n,r){Array.isArray(n)||(n&&(Qt[0]=n.toString()),n=Qt);for(var i=0;i<n.length;i++){var o=mt(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function Xt(t){M(t.a,function(t,e){this.a.hasOwnProperty(e)&&Et(t)},t),t.a={}}function Jt(){this.a=!0}function Zt(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return St(n)}catch(u){return e}}(t,n)+(r?" "+r:"")})}Wt.prototype.G=function(){Wt.S.G.call(this),Xt(this)},Wt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Jt.prototype.info=function(){};var $t=null;function te(){return $t=$t||new Nt}function ee(t){st.call(this,"serverreachability",t)}function ne(t){var e=te();e.dispatchEvent(new ee(e,t))}function re(t){st.call(this,"statevent",t)}function ie(t){var e=te();e.dispatchEvent(new re(e,t))}function oe(t){st.call(this,"timingevent",t)}function se(t,e){if("function"!=d(t))throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){t()},e)}I(ee,st),I(re,st),I(oe,st);var ue={NO_ERROR:0,Za:1,gb:2,fb:3,bb:4,eb:5,hb:6,Da:7,TIMEOUT:8,kb:9},ae={ab:"complete",ob:"success",Ea:"error",Da:"abort",mb:"ready",nb:"readystatechange",TIMEOUT:"timeout",ib:"incrementaldata",lb:"progress",cb:"downloadprogress",pb:"uploadprogress"};function ce(){}function he(){}ce.prototype.a=null;var le,fe={OPEN:"a",$a:"b",Ea:"c",jb:"d"};function pe(){st.call(this,"d")}function de(){st.call(this,"c")}function ve(){}function ye(t,e,n,r){this.g=t,this.c=e,this.f=n,this.T=r||1,this.J=new Wt(this),this.P=be,this.R=new Bt(t=W?125:void 0),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.U=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.W=this.C=this.V=this.I=!1}I(pe,st),I(de,st),I(ve,ce),le=new ve;var be=45e3,me={},ge={};function we(t,e,n){t.H=1,t.i=Be(Le(e)),t.j=n,t.I=!0,_e(t,null)}function _e(t,e){t.u=O(),Ie(t),t.l=Le(t.i);var n=t.l,r=t.T;Array.isArray(r)||(r=[String(r)]),en(n.b,"t",r),t.D=0,t.a=Xn(t.g,t.g.C?e:null),0<t.O&&(t.F=new Ht(_(t.Ca,t,t.a),t.O)),Yt(t.J,t.a,"readystatechange",t.Wa),e=t.B?V(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),ne(1),function(t,e,n,r,i,o){t.info(function(){if(t.a)if(o)for(var s="",u=o.split("&"),a=0;a<u.length;a++){var c=u[a].split("=");if(1<c.length){var h=c[0];c=c[1];var l=h.split("_");s=2<=l.length&&"type"==l[1]?s+(h+"=")+c+"&":s+(h+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s})}(t.c,t.m,t.l,t.f,t.T,t.j)}function Ee(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=Oe(t,n);if(i==ge){4==e&&(t.h=4,ie(14),r=!1),Zt(t.c,t.f,null,"[Incomplete Response]");break}if(i==me){t.h=4,ie(15),Zt(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}Zt(t.c,t.f,i,null),Ne(t,i)}4==e&&0==n.length&&(t.h=1,ie(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.W&&(t.W=!0,(e=t.g).a==t&&e.V&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),Bn(e),e.F=!0)):(Zt(t.c,t.f,n,"[Invalid Chunked Response]"),Ae(t),xe(t))}function Oe(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?ge:(n=Number(e.substring(n,r)),isNaN(n)?me:(r+=1)+n>e.length?ge:(e=e.substr(r,n),t.D=r+n,e))}function Ie(t){t.U=O()+t.P,Te(t,t.P)}function Te(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=se(_(t.Ua,t),e)}function je(t){t.o&&(f.clearTimeout(t.o),t.o=null)}function xe(t){0==t.g.v||t.A||Kn(t.g,t)}function Ae(t){je(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,zt(t.R),Xt(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function Ne(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||cn(n.b,t)))if(n.I=t.N,!t.C&&cn(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(Yf){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;Gn(n),Cn(n)}qn(n),ie(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=se(_(n.Ra,n),6e3));if(1>=an(n.b)&&n.ea){try{n.ea()}catch(Yf){}n.ea=void 0}}else Wn(n,11)}else if((t.C||n.a==t)&&Gn(n),!k(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(n.P=(i=e[r])[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var s=i[4];null!=s&&(n.pa=s,n.c.info("SVER="+n.pa));var u=i[5];if(null!=u&&"number"==typeof u&&0<u){var a=1.5*u;n.D=a,n.c.info("backChannelRequestTimeoutMs_="+a)}a=n;var c=t.a;if(c){var h=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(h){var l=a.b;!l.a&&(C(h,"spdy")||C(h,"quic")||C(h,"h2"))&&(l.f=l.g,l.a=new Set,l.b&&(hn(l,l.b),l.b=null))}if(a.A){var f=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;f&&(a.na=f,qe(a.B,a.A,f))}}n.v=3,n.f&&n.f.ta(),n.V&&(n.N=O()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var p=t;if((a=n).la=Yn(a,a.C?a.ga:null,a.fa),p.C){ln(a.b,p);var d=p,v=a.D;v&&d.setTimeout(v),d.o&&(je(d),Ie(d)),a.a=p}else Un(a);0<n.g.length&&Ln(n)}else"stop"!=i[0]&&"close"!=i[0]||Wn(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?Wn(n,7):Pn(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);ne(4)}catch(Yf){}}function ke(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(v(t)||"string"==typeof t)x(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(v(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(v(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Se(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Se)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Pe(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Ce(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Ce(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Ce(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(c=ye.prototype).setTimeout=function(t){this.P=t},c.Wa=function(t){t=t.target;var e=this.F;e&&3==An(t)?e.f():this.Ca(t)},c.Ca=function(t){try{if(t==this.a)t:{var e=An(this.a),n=this.a.ua(),r=this.a.X();if(!(3>e||3==e&&!W&&!this.a.$())){this.A||4!=e||7==n||ne(8==n||0>=r?3:2),je(this);var i=this.a.X();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,s){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s})}(this.c,this.m,this.l,this.f,this.T,e,i),this.b){if(this.V&&!this.C){e:{if(this.a){var s,u=this.a;if((s=u.a?u.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(s)){var a=s;break e}}a=null}if(!a){this.b=!1,this.h=3,ie(12),Ae(this),xe(this);break t}Zt(this.c,this.f,a,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,Ne(this,a)}this.I?(Ee(this,e,o),W&&this.b&&3==e&&(Yt(this.J,this.R,"tick",this.Va),this.R.start())):(Zt(this.c,this.f,o,null),Ne(this,o)),4==e&&Ae(this),this.b&&!this.A&&(4==e?Kn(this.g,this):(this.b=!1,Ie(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,ie(12)):(this.h=0,ie(13)),Ae(this),xe(this)}}}catch(c){}},c.Va=function(){if(this.a){var t=An(this.a),e=this.a.$();this.D<e.length&&(je(this),Ee(this,t,e),this.b&&4!=t&&Ie(this))}},c.cancel=function(){this.A=!0,Ae(this)},c.Ua=function(){this.o=null;var t=O();0<=t-this.U?(function(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.c,this.l),2!=this.H&&(ne(3),ie(17)),Ae(this),this.h=2,xe(this)):Te(this,this.U-t)},(c=Se.prototype).K=function(){Pe(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},c.L=function(){return Pe(this),this.a.concat()},c.get=function(t,e){return Ce(this.b,t)?this.b[t]:e},c.set=function(t,e){Ce(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},c.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var De=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Re(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof Re){this.a=void 0!==e?e:t.a,Me(this,t.f),this.j=t.j,Ve(this,t.c),Fe(this,t.h),this.g=t.g,e=t.b;var n=new Je;n.c=e.c,e.a&&(n.a=new Se(e.a),n.b=e.b),Ue(this,n),this.i=t.i}else t&&(n=String(t).match(De))?(this.a=!!e,Me(this,n[1]||"",!0),this.j=ze(n[2]||""),Ve(this,n[3]||"",!0),Fe(this,n[4]),this.g=ze(n[5]||"",!0),Ue(this,n[6]||"",!0),this.i=ze(n[7]||"")):(this.a=!!e,this.b=new Je(null,this.a))}function Le(t){return new Re(t)}function Me(t,e,n){t.f=n?ze(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Ve(t,e,n){t.c=n?ze(e,!0):e}function Fe(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function Ue(t,e,n){e instanceof Je?(t.b=e,function(t,e){e&&!t.f&&(Ze(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&($e(this,e),en(this,n,t))},t)),t.f=e}(t.b,t.a)):(n||(e=Ge(e,Ye)),t.b=new Je(e,t.a))}function qe(t,e,n){t.b.set(e,n)}function Be(t){return qe(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^O()).toString(36)),t}function ze(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Ge(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Ke),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Ke(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Re.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Ge(e,He,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(Ge(e,He,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(Ge(n,"/"==n.charAt(0)?Qe:We,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",Ge(n,Xe)),t.join("")};var He=/[#\/\?@]/g,We=/[#\?:]/g,Qe=/[#\?]/g,Ye=/[#\?@]/g,Xe=/#/g;function Je(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Ze(t){t.a||(t.a=new Se,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function $e(t,e){Ze(t),e=nn(t,e),Ce(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Ce((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Pe(t)))}function tn(t,e){return Ze(t),e=nn(t,e),Ce(t.a.b,e)}function en(t,e,n){$e(t,e),0<n.length&&(t.c=null,t.a.set(nn(t,e),N(n)),t.b+=n.length)}function nn(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function rn(t,e){this.b=t,this.a=e}function on(t){this.g=t||sn,t=f.PerformanceNavigationTiming?0<(t=f.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(f.ia&&f.ia.ya&&f.ia.ya()&&f.ia.ya().qb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}(c=Je.prototype).add=function(t,e){Ze(this),this.c=null,t=nn(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},c.forEach=function(t,e){Ze(this),this.a.forEach(function(n,r){x(n,function(n){t.call(e,n,r,this)},this)},this)},c.L=function(){Ze(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},c.K=function(t){Ze(this);var e=[];if("string"==typeof t)tn(this,t)&&(e=A(e,this.a.get(nn(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=A(e,t[n])}return e},c.set=function(t,e){return Ze(this),this.c=null,tn(this,t=nn(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},c.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},c.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var sn=10;function un(t){return!!t.b||!!t.a&&t.a.size>=t.f}function an(t){return t.b?1:t.a?t.a.size:0}function cn(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function hn(t,e){t.a?t.a.add(e):t.b=e}function ln(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function fn(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=a(t.a.values()),o=i.next();!o.done;o=i.next())r=r.concat(o.value.s)}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return N(t.c)}function pn(){}function dn(){this.a=new pn}function vn(t,e,n){var r=n||"";try{ke(t,function(t,n){var i=t;y(t)&&(i=St(t)),e.push(r+n+"="+encodeURIComponent(i))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function yn(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}on.prototype.cancel=function(){var t,e;if(this.c=fn(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=a(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},pn.prototype.stringify=function(t){return f.JSON.stringify(t,void 0)},pn.prototype.parse=function(t){return f.JSON.parse(t,void 0)};var bn=f.JSON.parse;function mn(t){Nt.call(this),this.headers=new Se,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=gn,this.D=this.F=!1}I(mn,Nt);var gn="",wn=/^https?$/i,_n=["POST","PUT"];function En(t){return"content-type"==t.toLowerCase()}function On(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,In(t),jn(t)}function In(t){t.u||(t.u=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function Tn(t){if(t.b&&void 0!==l&&(!t.s[1]||4!=An(t)||2!=t.X()))if(t.l&&4==An(t))Gt(t.za,0,t);else if(t.dispatchEvent("readystatechange"),4==An(t)){t.b=!1;try{var e,n=t.X();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(De)[1]||null;if(!o&&f.self&&f.self.location){var s=f.self.location.protocol;o=s.substr(0,s.length-1)}i=!wn.test(o?o.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{t.h=6;try{var u=2<An(t)?t.a.statusText:""}catch(a){u=""}t.f=u+" ["+t.X()+"]",In(t)}}finally{jn(t)}}}function jn(t,e){if(t.a){xn(t);var n=t.a,r=t.s[0]?p:null;t.a=null,t.s=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(i){}}}function xn(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(f.clearTimeout(t.m),t.m=null)}function An(t){return t.a?t.a.readyState:0}function Nn(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return M(t,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):qe(t,e,n))}function kn(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Sn(t){this.pa=0,this.g=[],this.c=new Jt,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.W=this.i=this.O=this.l=null,this.La=this.R=0,this.Ia=kn("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.T=!0,this.I=this.oa=this.P=-1,this.U=this.o=this.u=0,this.Fa=kn("baseRetryDelayMs",5e3,t),this.Ma=kn("retryDelaySeedMs",1e4,t),this.Ja=kn("forwardChannelMaxRetries",2,t),this.ma=kn("forwardChannelRequestTimeoutMs",2e4,t),this.Ka=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new on(t&&t.concurrentRequestLimit),this.ka=new dn,this.da=t&&t.fastHandshake||!1,this.Ga=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.T=!1),this.V=!this.da&&this.T&&t&&t.c||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null}function Pn(t){if(Dn(t),3==t.v){var e=t.R++,n=Le(t.B);qe(n,"SID",t.J),qe(n,"RID",e),qe(n,"TYPE","terminate"),Vn(t,n),(e=new ye(t,t.c,e,void 0)).H=2,e.i=Be(Le(n)),n=!1,f.navigator&&f.navigator.sendBeacon&&(n=f.navigator.sendBeacon(e.i.toString(),"")),!n&&f.Image&&((new Image).src=e.i,n=!0),n||(e.a=Xn(e.g,null),e.a.ba(e.i)),e.u=O(),Ie(e)}Qn(t)}function Cn(t){t.a&&(Bn(t),t.a.cancel(),t.a=null)}function Dn(t){Cn(t),t.j&&(f.clearTimeout(t.j),t.j=null),Gn(t),t.b.cancel(),t.h&&("number"==typeof t.h&&f.clearTimeout(t.h),t.h=null)}function Rn(t,e){t.g.push(new rn(t.La++,e)),3==t.v&&Ln(t)}function Ln(t){un(t.b)||t.h||(t.h=!0,Vt(t.Ba,t),t.u=0)}function Mn(t,e){var n;n=e?e.f:t.R++;var r=Le(t.B);qe(r,"SID",t.J),qe(r,"RID",n),qe(r,"AID",t.P),Vn(t,r),t.i&&t.l&&Nn(r,t.i,t.l),n=new ye(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=Fn(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),hn(t.b,n),we(n,r,e)}function Vn(t,e){t.f&&ke({},function(t,n){qe(e,n,t)})}function Fn(t,e,n){n=Math.min(t.g.length,n);var r=t.f?_(t.f.Ha,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?s.push("ofs="+(o=i[0].b)):o=0:s.push("ofs="+o);for(var u=!0,a=0;a<n;a++){var c=i[a].b,h=i[a].a;if(0>(c-=o))o=Math.max(0,i[a].b-100),u=!1;else try{vn(h,s,"req"+c+"_")}catch(Sr){r&&r(h)}}if(u){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function Un(t){t.a||t.j||(t.U=1,Vt(t.Aa,t),t.o=0)}function qn(t){return!(t.a||t.j||3<=t.o||(t.U++,t.j=se(_(t.Aa,t),Hn(t,t.o)),t.o++,0))}function Bn(t){null!=t.s&&(f.clearTimeout(t.s),t.s=null)}function zn(t){t.a=new ye(t,t.c,"rpc",t.U),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=Le(t.la);qe(e,"RID","rpc"),qe(e,"SID",t.J),qe(e,"CI",t.H?"0":"1"),qe(e,"AID",t.P),Vn(t,e),qe(e,"TYPE","xmlhttp"),t.i&&t.l&&Nn(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=Be(Le(e)),n.j=null,n.I=!0,_e(n,t)}function Gn(t){null!=t.m&&(f.clearTimeout(t.m),t.m=null)}function Kn(t,e){var n=null;if(t.a==e){Gn(t),Bn(t),t.a=null;var r=2}else{if(!cn(t.b,e))return;n=e.s,ln(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=O()-e.u;var i=t.u;(r=te()).dispatchEvent(new oe(r,n,e,i)),Ln(t)}else Un(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(an(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.Ia?0:t.Ja)||(t.h=se(_(t.Ba,t,e),Hn(t,t.u)),t.u++,0)))}(t,e)||2==r&&qn(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:Wn(t,5);break;case 4:Wn(t,10);break;case 3:Wn(t,6);break;default:Wn(t,2)}}function Hn(t,e){var n=t.Fa+Math.floor(Math.random()*t.Ma);return t.f||(n*=2),n*e}function Wn(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=_(t.Xa,t);n||(n=new Re("//www.google.com/images/cleardot.gif"),f.location&&"http"==f.location.protocol||Me(n,"https"),Be(n)),function(t,e){var n=new Jt;if(f.Image){var r=new Image;r.onload=E(yn,n,r,"TestLoadImage: loaded",!0,e),r.onerror=E(yn,n,r,"TestLoadImage: error",!1,e),r.onabort=E(yn,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=E(yn,n,r,"TestLoadImage: timeout",!1,e),f.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else ie(2);t.v=0,t.f&&t.f.ra(e),Qn(t),Dn(t)}function Qn(t){t.v=0,t.I=-1,t.f&&(0==fn(t.b).length&&0==t.g.length||(t.b.c.length=0,N(t.g),t.g.length=0),t.f.qa())}function Yn(t,e,n){var r=function(t){return t instanceof Re?Le(t):new Re(t,void 0)}(n);if(""!=r.c)e&&Ve(r,e+"."+r.c),Fe(r,r.h);else{var i=f.location;r=function(t,e,n,r){var i=new Re(null,void 0);return t&&Me(i,t),e&&Ve(i,e),n&&Fe(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.W&&M(t.W,function(t,e){qe(r,e,t)}),n=t.na,(e=t.A)&&n&&qe(r,e,n),qe(r,"VER",t.ha),Vn(t,r),r}function Xn(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new mn(t.Ka)).F=t.C,e}function Jn(){}function Zn(){if(K&&!(10<=Number(nt)))throw Error("Environmental error: no available transport.")}function $n(t,e){Nt.call(this),this.a=new Sn(e),this.l=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!k(t)&&(this.a.i=t),this.h=e&&e.supportsCrossDomainXhr||!1,this.g=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!k(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new nr(this)}function tr(t){pe.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function er(){de.call(this),this.status=1}function nr(t){this.a=t}(c=mn.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=function(t){var e;return(e=t.a)||(e=t.a={}),e}(this.H?this.H:le),this.a.onreadystatechange=_(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(o){return void On(this,o)}t=n||"";var i=new Se(this.headers);r&&ke(r,function(t,e){i.set(e,t)}),r=function(t){t:{for(var e=En,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=f.FormData&&t instanceof f.FormData,!(0<=j(_n,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{xn(this),0<this.o&&((this.D=function(t){return K&&et(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=_(this.xa,this)):this.m=Gt(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(o){On(this,o)}},c.xa=function(){void 0!==l&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},c.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),jn(this))},c.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),jn(this,!0)),mn.S.G.call(this)},c.za=function(){this.j||(this.A||this.l||this.g?Tn(this):this.Ta())},c.Ta=function(){Tn(this)},c.X=function(){try{return 2<An(this)?this.a.status:-1}catch(z){return-1}},c.$=function(){try{return this.a?this.a.responseText:""}catch(z){return""}},c.Na=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),bn(e)}},c.ua=function(){return this.h},c.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(c=Sn.prototype).ha=8,c.v=1,c.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new ye(this,this.c,t,void 0),r=this.l;if(this.O&&(r?U(r=V(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=Fn(this,n,e),qe(i=Le(this.B),"RID",t),qe(i,"CVER",22),this.A&&qe(i,"X-HTTP-Session-Id",this.A),Vn(this,i),this.i&&r&&Nn(i,this.i,r),hn(this.b,n),this.Ga&&qe(i,"TYPE","init"),this.da?(qe(i,"$req",e),qe(i,"SID","null"),n.V=!0,we(n,i,null)):we(n,i,e),this.v=2}}else 3==this.v&&(t?Mn(this,t):0==this.g.length||un(this.b)||Mn(this))},c.Aa=function(){if(this.j=null,zn(this),this.V&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=se(_(this.Sa,this),t)}},c.Sa=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,Cn(this),zn(this))},c.Ra=function(){null!=this.m&&(this.m=null,Cn(this),qn(this),ie(19))},c.Xa=function(t){t?(this.c.info("Successfully pinged google.com"),ie(2)):(this.c.info("Failed to ping google.com"),ie(1))},(c=Jn.prototype).ta=function(){},c.sa=function(){},c.ra=function(){},c.qa=function(){},c.Ha=function(){},Zn.prototype.a=function(t,e){return new $n(t,e)},I($n,Nt),(c=$n.prototype).addEventListener=function(t,e,n,r){$n.S.addEventListener.call(this,t,e,n,r)},c.removeEventListener=function(t,e,n,r){$n.S.removeEventListener.call(this,t,e,n,r)},c.Oa=function(){this.a.f=this.f,this.h&&(this.a.C=!0);var t=this.a,e=this.l,n=this.b||void 0;ie(0),t.fa=e,t.W=n||{},t.H=t.T,t.B=Yn(t,null,t.fa),Ln(t)},c.close=function(){Pn(this.a)},c.Pa=function(t){if("string"==typeof t){var e={};e.__data__=t,Rn(this.a,e)}else this.g?((e={}).__data__=St(t),Rn(this.a,e)):Rn(this.a,t)},c.G=function(){this.a.f=null,delete this.f,Pn(this.a),delete this.a,$n.S.G.call(this)},I(tr,pe),I(er,de),I(nr,Jn),nr.prototype.ta=function(){this.a.dispatchEvent("a")},nr.prototype.sa=function(t){this.a.dispatchEvent(new tr(t))},nr.prototype.ra=function(t){this.a.dispatchEvent(new er(t))},nr.prototype.qa=function(){this.a.dispatchEvent("b")},Zn.prototype.createWebChannel=Zn.prototype.a,$n.prototype.send=$n.prototype.Pa,$n.prototype.open=$n.prototype.Oa,$n.prototype.close=$n.prototype.close,ue.NO_ERROR=0,ue.TIMEOUT=8,ue.HTTP_ERROR=6,ae.COMPLETE="complete",he.EventType=fe,fe.OPEN="a",fe.CLOSE="b",fe.ERROR="c",fe.MESSAGE="d",Nt.prototype.listen=Nt.prototype.va,mn.prototype.listenOnce=mn.prototype.wa,mn.prototype.getLastError=mn.prototype.Qa,mn.prototype.getLastErrorCode=mn.prototype.ua,mn.prototype.getStatus=mn.prototype.X,mn.prototype.getResponseJson=mn.prototype.Na,mn.prototype.getResponseText=mn.prototype.$,mn.prototype.send=mn.prototype.ba;var rr=ue,ir=ae,or=he,sr=mn,ur=n("/6Yf"),ar=function(t,e,n,r,i,o){this.t=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i,this.i=o},cr=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"o",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),hr=new o.b("@firebase/firestore");function lr(){return hr.logLevel}function fr(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(hr.logLevel<=o.a.DEBUG){var i=e.map(vr);hr.debug.apply(hr,Object(r.g)(["Firestore (8.0.2): "+t],i))}}function pr(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(hr.logLevel<=o.a.ERROR){var i=e.map(vr);hr.error.apply(hr,Object(r.g)(["Firestore (8.0.2): "+t],i))}}function dr(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(hr.logLevel<=o.a.WARN){var i=e.map(vr);hr.warn.apply(hr,Object(r.g)(["Firestore (8.0.2): "+t],i))}}function vr(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(e){return t}}function yr(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.0.2) INTERNAL ASSERTION FAILED: "+t;throw pr(e),new Error(e)}function br(t,e){t||yr()}function mr(t,e){return t}function gr(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var wr=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=gr(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function _r(t,e){return t<e?-1:t>e?1:0}function Er(t,e,n){return t.length===e.length&&t.every(function(t,r){return n(t,e[r])})}function Or(t){return t+"\0"}function Ir(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Tr(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function jr(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var xr=function(){function t(t,e){this.h=t,this.l=e,this._={}}return t.prototype.get=function(t){var e=this.h(t),n=this._[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[1];if(this.l(o[0],t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.h(t),r=this._[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.l(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this._[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.h(t),n=this._[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.l(n[r][0],t))return 1===n.length?delete this._[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){Tr(this._,function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}})},t.prototype.T=function(){return jr(this._)},t}(),Ar={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Nr=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Object(r.c)(e,t),e}(Error),kr=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Nr(Ar.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Nr(Ar.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Nr(Ar.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Nr(Ar.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype.I=function(t){return this.seconds===t.seconds?_r(this.nanoseconds,t.nanoseconds):_r(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),Sr=function(){function t(t){this.timestamp=t}return t.m=function(e){return new t(e)},t.min=function(){return new t(new kr(0,0))},t.prototype.A=function(t){return this.timestamp.I(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.R=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.P=function(){return this.timestamp},t}(),Pr=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&yr(),void 0===n?n=t.length-e:n>t.length-e&&yr(),this.segments=t,this.offset=e,this.g=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.g},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.V(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(t){n.push(t)}):n.push(e),this.p(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.v=function(t){return this.p(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.S=function(){return this.p(this.segments,this.offset,this.length-1)},t.prototype.D=function(){return this.segments[this.offset]},t.prototype.C=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.T=function(){return 0===this.length},t.prototype.N=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.F=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.O=function(){return this.segments.slice(this.offset,this.limit())},t.V=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),Cr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.c)(e,t),e.prototype.p=function(t,n,r){return new e(t,n,r)},e.prototype.M=function(){return this.O().join("/")},e.prototype.toString=function(){return this.M()},e.k=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new Nr(Ar.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter(function(t){return t.length>0}))}return new e(r)},e.$=function(){return new e([])},e}(Pr),Dr=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Rr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.c)(e,t),e.prototype.p=function(t,n,r){return new e(t,n,r)},e.L=function(t){return Dr.test(t)},e.prototype.M=function(){return this.O().map(function(t){return t=t.replace("\\","\\\\").replace("`","\\`"),e.L(t)||(t="`"+t+"`"),t}).join(".")},e.prototype.toString=function(){return this.M()},e.prototype.B=function(){return 1===this.length&&"__name__"===this.get(0)},e.q=function(){return new e(["__name__"])},e.U=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new Nr(Ar.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var u=t[i];if("\\"===u){if(i+1===t.length)throw new Nr(Ar.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var a=t[i+1];if("\\"!==a&&"."!==a&&"`"!==a)throw new Nr(Ar.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=a,i+=2}else"`"===u?(s=!s,i++):"."!==u||s?(r+=u,i++):(o(),i++)}if(o(),s)throw new Nr(Ar.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.$=function(){return new e([])},e}(Pr),Lr=function(){function t(t){this.path=t}return t.K=function(e){return new t(Cr.k(e))},t.W=function(e){return new t(Cr.k(e).v(5))},t.prototype.j=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===Cr.V(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.V=function(t,e){return Cr.V(t.path,e.path)},t.G=function(t){return t.length%2==0},t.H=function(e){return new t(new Cr(e.slice()))},t}();function Mr(t){return null==t}function Vr(t){return 0===t&&1/t==-1/0}function Fr(t){return"number"==typeof t&&Number.isInteger(t)&&!Vr(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var Ur=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.J=null};function qr(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new Ur(t,e,n,r,i,o,s)}function Br(t){var e=mr(t);if(null===e.J){var n=e.path.M();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(function(t){return function(t){return t.field.M()+t.op.toString()+Di(t.value)}(t)}).join(","),n+="|ob:",n+=e.orderBy.map(function(t){return(e=t).field.M()+e.dir;var e}).join(","),Mr(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Fs(e.startAt)),e.endAt&&(n+="|ub:",n+=Fs(e.endAt)),e.J=n}return e.J}function zr(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!Gs(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if((i=t.filters[r]).op!==(o=e.filters[r]).op||!i.field.isEqual(o.field)||!ki(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!qs(t.startAt,e.startAt)&&qs(t.endAt,e.endAt)}function Gr(t){return Lr.G(t.path)&&null===t.collectionGroup&&0===t.filters.length}var Kr=function(){function t(t){this.Y=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.Y)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.Y)},t.prototype.X=function(){return 2*this.Y.length},t.prototype.A=function(t){return _r(this.Y,t.Y)},t.prototype.isEqual=function(t){return this.Y===t.Y},t}();Kr.Z=new Kr("");var Hr,Wr,Qr=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=Sr.min()),void 0===o&&(o=Sr.min()),void 0===s&&(s=Kr.Z),this.target=t,this.targetId=e,this.tt=n,this.sequenceNumber=r,this.et=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.nt=function(e){return new t(this.target,this.targetId,this.tt,e,this.et,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.st=function(e,n){return new t(this.target,this.targetId,this.tt,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.it=function(e){return new t(this.target,this.targetId,this.tt,this.sequenceNumber,this.et,e,this.resumeToken)},t}(),Yr=function(t){this.count=t};function Xr(t){switch(t){case Ar.OK:return yr();case Ar.CANCELLED:case Ar.UNKNOWN:case Ar.DEADLINE_EXCEEDED:case Ar.RESOURCE_EXHAUSTED:case Ar.INTERNAL:case Ar.UNAVAILABLE:case Ar.UNAUTHENTICATED:return!1;case Ar.INVALID_ARGUMENT:case Ar.NOT_FOUND:case Ar.ALREADY_EXISTS:case Ar.PERMISSION_DENIED:case Ar.FAILED_PRECONDITION:case Ar.ABORTED:case Ar.OUT_OF_RANGE:case Ar.UNIMPLEMENTED:case Ar.DATA_LOSS:return!0;default:return yr()}}function Jr(t){if(void 0===t)return pr("GRPC error has no .code"),Ar.UNKNOWN;switch(t){case Hr.OK:return Ar.OK;case Hr.CANCELLED:return Ar.CANCELLED;case Hr.UNKNOWN:return Ar.UNKNOWN;case Hr.DEADLINE_EXCEEDED:return Ar.DEADLINE_EXCEEDED;case Hr.RESOURCE_EXHAUSTED:return Ar.RESOURCE_EXHAUSTED;case Hr.INTERNAL:return Ar.INTERNAL;case Hr.UNAVAILABLE:return Ar.UNAVAILABLE;case Hr.UNAUTHENTICATED:return Ar.UNAUTHENTICATED;case Hr.INVALID_ARGUMENT:return Ar.INVALID_ARGUMENT;case Hr.NOT_FOUND:return Ar.NOT_FOUND;case Hr.ALREADY_EXISTS:return Ar.ALREADY_EXISTS;case Hr.PERMISSION_DENIED:return Ar.PERMISSION_DENIED;case Hr.FAILED_PRECONDITION:return Ar.FAILED_PRECONDITION;case Hr.ABORTED:return Ar.ABORTED;case Hr.OUT_OF_RANGE:return Ar.OUT_OF_RANGE;case Hr.UNIMPLEMENTED:return Ar.UNIMPLEMENTED;case Hr.DATA_LOSS:return Ar.DATA_LOSS;default:return yr()}}(Wr=Hr||(Hr={}))[Wr.OK=0]="OK",Wr[Wr.CANCELLED=1]="CANCELLED",Wr[Wr.UNKNOWN=2]="UNKNOWN",Wr[Wr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Wr[Wr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Wr[Wr.NOT_FOUND=5]="NOT_FOUND",Wr[Wr.ALREADY_EXISTS=6]="ALREADY_EXISTS",Wr[Wr.PERMISSION_DENIED=7]="PERMISSION_DENIED",Wr[Wr.UNAUTHENTICATED=16]="UNAUTHENTICATED",Wr[Wr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Wr[Wr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Wr[Wr.ABORTED=10]="ABORTED",Wr[Wr.OUT_OF_RANGE=11]="OUT_OF_RANGE",Wr[Wr.UNIMPLEMENTED=12]="UNIMPLEMENTED",Wr[Wr.INTERNAL=13]="INTERNAL",Wr[Wr.UNAVAILABLE=14]="UNAVAILABLE",Wr[Wr.DATA_LOSS=15]="DATA_LOSS";var Zr=function(){function t(t,e){this.V=t,this.root=e||ti.EMPTY}return t.prototype.rt=function(e,n){return new t(this.V,this.root.rt(e,n,this.V).copy(null,null,ti.ot,null,null))},t.prototype.remove=function(e){return new t(this.V,this.root.remove(e,this.V).copy(null,null,ti.ot,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.T();){var n=this.V(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.T();){var r=this.V(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.T=function(){return this.root.T()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.at=function(){return this.root.at()},t.prototype.ct=function(){return this.root.ct()},t.prototype.ut=function(t){return this.root.ut(t)},t.prototype.forEach=function(t){this.ut(function(e,n){return t(e,n),!1})},t.prototype.toString=function(){var t=[];return this.ut(function(e,n){return t.push(e+":"+n),!1}),"{"+t.join(", ")+"}"},t.prototype.ht=function(t){return this.root.ht(t)},t.prototype.lt=function(){return new $r(this.root,null,this.V,!1)},t.prototype._t=function(t){return new $r(this.root,t,this.V,!1)},t.prototype.ft=function(){return new $r(this.root,null,this.V,!0)},t.prototype.dt=function(t){return new $r(this.root,t,this.V,!0)},t}(),$r=function(){function t(t,e,n,r){this.wt=r,this.Tt=[];for(var i=1;!t.T();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.wt?t.left:t.right;else{if(0===i){this.Tt.push(t);break}this.Tt.push(t),t=this.wt?t.right:t.left}}return t.prototype.Et=function(){var t=this.Tt.pop(),e={key:t.key,value:t.value};if(this.wt)for(t=t.left;!t.T();)this.Tt.push(t),t=t.right;else for(t=t.right;!t.T();)this.Tt.push(t),t=t.left;return e},t.prototype.It=function(){return this.Tt.length>0},t.prototype.At=function(){if(0===this.Tt.length)return null;var t=this.Tt[this.Tt.length-1];return{key:t.key,value:t.value}},t}(),ti=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.T=function(){return!1},t.prototype.ut=function(t){return this.left.ut(t)||t(this.key,this.value)||this.right.ut(t)},t.prototype.ht=function(t){return this.right.ht(t)||t(this.key,this.value)||this.left.ht(t)},t.prototype.min=function(){return this.left.T()?this:this.left.min()},t.prototype.at=function(){return this.min().key},t.prototype.ct=function(){return this.right.T()?this.key:this.right.ct()},t.prototype.rt=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.rt(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.rt(t,e,n))).Rt()},t.prototype.Pt=function(){if(this.left.T())return t.EMPTY;var e=this;return e.left.gt()||e.left.left.gt()||(e=e.Vt()),(e=e.copy(null,null,null,e.left.Pt(),null)).Rt()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.T()||i.left.gt()||i.left.left.gt()||(i=i.Vt()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.gt()&&(i=i.yt()),i.right.T()||i.right.gt()||i.right.left.gt()||(i=i.vt()),0===n(e,i.key)){if(i.right.T())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.Pt())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.Rt()},t.prototype.gt=function(){return this.color},t.prototype.Rt=function(){var t=this;return t.right.gt()&&!t.left.gt()&&(t=t.bt()),t.left.gt()&&t.left.left.gt()&&(t=t.yt()),t.left.gt()&&t.right.gt()&&(t=t.St()),t},t.prototype.Vt=function(){var t=this.St();return t.right.left.gt()&&(t=(t=(t=t.copy(null,null,null,null,t.right.yt())).bt()).St()),t},t.prototype.vt=function(){var t=this.St();return t.left.left.gt()&&(t=(t=t.yt()).St()),t},t.prototype.bt=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.yt=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.St=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.Dt=function(){var t=this.Ct();return Math.pow(2,t)<=this.size+1},t.prototype.Ct=function(){if(this.gt()&&this.left.gt())throw yr();if(this.right.gt())throw yr();var t=this.left.Ct();if(t!==this.right.Ct())throw yr();return t+(this.gt()?0:1)},t}();ti.EMPTY=null,ti.RED=!0,ti.ot=!1,ti.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw yr()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw yr()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw yr()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw yr()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw yr()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.rt=function(t,e,n){return new ti(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.T=function(){return!0},t.prototype.ut=function(t){return!1},t.prototype.ht=function(t){return!1},t.prototype.at=function(){return null},t.prototype.ct=function(){return null},t.prototype.gt=function(){return!1},t.prototype.Dt=function(){return!0},t.prototype.Ct=function(){return 0},t}());var ei=function(){function t(t){this.V=t,this.data=new Zr(this.V)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.at()},t.prototype.last=function(){return this.data.ct()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.ut(function(e,n){return t(e),!1})},t.prototype.Nt=function(t,e){for(var n=this.data._t(t[0]);n.It();){var r=n.Et();if(this.V(r.key,t[1])>=0)return;e(r.key)}},t.prototype.xt=function(t,e){var n;for(n=void 0!==e?this.data._t(e):this.data.lt();n.It();)if(!t(n.Et().key))return},t.prototype.Ft=function(t){var e=this.data._t(t);return e.It()?e.Et().key:null},t.prototype.lt=function(){return new ni(this.data.lt())},t.prototype._t=function(t){return new ni(this.data._t(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).rt(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.T=function(){return this.data.T()},t.prototype.Ot=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.lt(),r=e.data.lt();n.It();){var i=n.Et().key,o=r.Et().key;if(0!==this.V(i,o))return!1}return!0},t.prototype.O=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},t.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.V);return n.data=e,n},t}(),ni=function(){function t(t){this.Mt=t}return t.prototype.Et=function(){return this.Mt.Et().key},t.prototype.It=function(){return this.Mt.It()},t}(),ri=new Zr(Lr.V);function ii(){return ri}function oi(){return ii()}var si=new Zr(Lr.V);function ui(){return si}var ai=new Zr(Lr.V),ci=new ei(Lr.V);function hi(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=ci,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var li=new ei(_r);function fi(){return li}var pi=function(){function t(t){this.V=t?function(e,n){return t(e,n)||Lr.V(e.key,n.key)}:function(t,e){return Lr.V(t.key,e.key)},this.kt=ui(),this.$t=new Zr(this.V)}return t.Lt=function(e){return new t(e.V)},t.prototype.has=function(t){return null!=this.kt.get(t)},t.prototype.get=function(t){return this.kt.get(t)},t.prototype.first=function(){return this.$t.at()},t.prototype.last=function(){return this.$t.ct()},t.prototype.T=function(){return this.$t.T()},t.prototype.indexOf=function(t){var e=this.kt.get(t);return e?this.$t.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.$t.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.$t.ut(function(e,n){return t(e),!1})},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.kt.rt(t.key,t),e.$t.rt(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.kt.remove(t),this.$t.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.$t.lt(),r=e.$t.lt();n.It();){var i=n.Et().key,o=r.Et().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.V=this.V,r.kt=e,r.$t=n,r},t}(),di=function(){function t(){this.Bt=new Zr(Lr.V)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Bt.get(e);n?0!==t.type&&3===n.type?this.Bt=this.Bt.rt(e,t):3===t.type&&1!==n.type?this.Bt=this.Bt.rt(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Bt=this.Bt.rt(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Bt=this.Bt.rt(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Bt=this.Bt.remove(e):1===t.type&&2===n.type?this.Bt=this.Bt.rt(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Bt=this.Bt.rt(e,{type:2,doc:t.doc}):yr():this.Bt=this.Bt.rt(e,t)},t.prototype.qt=function(){var t=[];return this.Bt.ut(function(e,n){t.push(n)}),t},t}(),vi=function(){function t(t,e,n,r,i,o,s,u){this.query=t,this.docs=e,this.Ut=n,this.docChanges=r,this.Qt=i,this.fromCache=o,this.Kt=s,this.Wt=u}return t.jt=function(e,n,r,i){var o=[];return n.forEach(function(t){o.push({type:0,doc:t})}),new t(e,n,pi.Lt(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.Qt.T()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.Kt===t.Kt&&this.Qt.isEqual(t.Qt)&&Is(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.Ut.isEqual(t.Ut)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),yi=function(){function t(t,e,n,r,i){this.et=t,this.Gt=e,this.zt=n,this.Ht=r,this.Jt=i}return t.Yt=function(e,n){var r=new Map;return r.set(e,bi.Xt(e,n)),new t(Sr.min(),r,fi(),ii(),hi())},t}(),bi=function(){function t(t,e,n,r,i){this.resumeToken=t,this.Zt=e,this.te=n,this.ee=r,this.ne=i}return t.Xt=function(e,n){return new t(Kr.Z,n,hi(),hi(),hi())},t}(),mi=function(t,e,n,r){this.se=t,this.removedTargetIds=e,this.key=n,this.ie=r},gi=function(t,e){this.targetId=t,this.re=e},wi=function(t,e,n,r){void 0===n&&(n=Kr.Z),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},_i=function(){function t(){this.oe=0,this.ae=Ii(),this.ce=Kr.Z,this.ue=!1,this.he=!0}return Object.defineProperty(t.prototype,"Zt",{get:function(){return this.ue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.ce},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"le",{get:function(){return 0!==this.oe},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_e",{get:function(){return this.he},enumerable:!1,configurable:!0}),t.prototype.fe=function(t){t.X()>0&&(this.he=!0,this.ce=t)},t.prototype.de=function(){var t=hi(),e=hi(),n=hi();return this.ae.forEach(function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:yr()}}),new bi(this.ce,this.ue,t,e,n)},t.prototype.we=function(){this.he=!1,this.ae=Ii()},t.prototype.Te=function(t,e){this.he=!0,this.ae=this.ae.rt(t,e)},t.prototype.Ee=function(t){this.he=!0,this.ae=this.ae.remove(t)},t.prototype.Ie=function(){this.oe+=1},t.prototype.me=function(){this.oe-=1},t.prototype.Ae=function(){this.he=!0,this.ue=!0},t}(),Ei=function(){function t(t){this.Re=t,this.Pe=new Map,this.ge=ii(),this.Ve=Oi(),this.ye=new ei(_r)}return t.prototype.pe=function(t){for(var e=0,n=t.se;e<n.length;e++){var r=n[e];t.ie instanceof as?this.ve(r,t.ie):t.ie instanceof cs&&this.be(r,t.key,t.ie)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)this.be(o[i],t.key,t.ie)},t.prototype.Se=function(t){var e=this;this.De(t,function(n){var r=e.Ce(n);switch(t.state){case 0:e.Ne(n)&&r.fe(t.resumeToken);break;case 1:r.me(),r.le||r.we(),r.fe(t.resumeToken);break;case 2:r.me(),r.le||e.removeTarget(n);break;case 3:e.Ne(n)&&(r.Ae(),r.fe(t.resumeToken));break;case 4:e.Ne(n)&&(e.xe(n),r.fe(t.resumeToken));break;default:yr()}})},t.prototype.De=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.Pe.forEach(function(t,r){n.Ne(r)&&e(r)})},t.prototype.Fe=function(t){var e=t.targetId,n=t.re.count,r=this.Oe(e);if(r){var i=r.target;if(Gr(i))if(0===n){var o=new Lr(i.path);this.be(e,o,new cs(o,Sr.min()))}else br(1===n);else this.Me(e)!==n&&(this.xe(e),this.ye=this.ye.add(e))}},t.prototype.ke=function(t){var e=this,n=new Map;this.Pe.forEach(function(r,i){var o=e.Oe(i);if(o){if(r.Zt&&Gr(o.target)){var s=new Lr(o.target.path);null!==e.ge.get(s)||e.$e(i,s)||e.be(i,s,new cs(s,t))}r._e&&(n.set(i,r.de()),r.we())}});var r=hi();this.Ve.forEach(function(t,n){var i=!0;n.xt(function(t){var n=e.Oe(t);return!n||2===n.tt||(i=!1,!1)}),i&&(r=r.add(t))});var i=new yi(t,n,this.ye,this.ge,r);return this.ge=ii(),this.Ve=Oi(),this.ye=new ei(_r),i},t.prototype.ve=function(t,e){if(this.Ne(t)){var n=this.$e(t,e.key)?2:0;this.Ce(t).Te(e.key,n),this.ge=this.ge.rt(e.key,e),this.Ve=this.Ve.rt(e.key,this.Le(e.key).add(t))}},t.prototype.be=function(t,e,n){if(this.Ne(t)){var r=this.Ce(t);this.$e(t,e)?r.Te(e,1):r.Ee(e),this.Ve=this.Ve.rt(e,this.Le(e).delete(t)),n&&(this.ge=this.ge.rt(e,n))}},t.prototype.removeTarget=function(t){this.Pe.delete(t)},t.prototype.Me=function(t){var e=this.Ce(t).de();return this.Re.Be(t).size+e.te.size-e.ne.size},t.prototype.Ie=function(t){this.Ce(t).Ie()},t.prototype.Ce=function(t){var e=this.Pe.get(t);return e||(e=new _i,this.Pe.set(t,e)),e},t.prototype.Le=function(t){var e=this.Ve.get(t);return e||(e=new ei(_r),this.Ve=this.Ve.rt(t,e)),e},t.prototype.Ne=function(t){var e=null!==this.Oe(t);return e||fr("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.Oe=function(t){var e=this.Pe.get(t);return e&&e.le?null:this.Re.qe(t)},t.prototype.xe=function(t){var e=this;this.Pe.set(t,new _i),this.Re.Be(t).forEach(function(n){e.be(t,n,null)})},t.prototype.$e=function(t,e){return this.Re.Be(t).has(e)},t}();function Oi(){return new Zr(Lr.V)}function Ii(){return new Zr(Lr.V)}function Ti(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function ji(t){var e=t.mapValue.fields.__previous_value__;return Ti(e)?ji(e):e}function xi(t){var e=Li(t.mapValue.fields.__local_write_time__.timestampValue);return new kr(e.seconds,e.nanos)}var Ai=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ni(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ti(t)?4:10:yr()}function ki(t,e){var n=Ni(t);if(n!==Ni(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return xi(t).isEqual(xi(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=Li(t.timestampValue),r=Li(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Vi(t.bytesValue).isEqual(Vi(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Mi(t.geoPointValue.latitude)===Mi(e.geoPointValue.latitude)&&Mi(t.geoPointValue.longitude)===Mi(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Mi(t.integerValue)===Mi(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=Mi(t.doubleValue),r=Mi(e.doubleValue);return n===r?Vr(n)===Vr(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return Er(t.arrayValue.values||[],e.arrayValue.values||[],ki);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(Ir(n)!==Ir(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!ki(n[i],r[i])))return!1;return!0}(t,e);default:return yr()}}function Si(t,e){return void 0!==(t.values||[]).find(function(t){return ki(t,e)})}function Pi(t,e){var n=Ni(t),r=Ni(e);if(n!==r)return _r(n,r);switch(n){case 0:return 0;case 1:return _r(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=Mi(t.integerValue||t.doubleValue),r=Mi(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return Ci(t.timestampValue,e.timestampValue);case 4:return Ci(xi(t),xi(e));case 5:return _r(t.stringValue,e.stringValue);case 6:return function(t,e){var n=Vi(t),r=Vi(e);return n.A(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=_r(n[i],r[i]);if(0!==o)return o}return _r(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=_r(Mi(t.latitude),Mi(e.latitude));return 0!==n?n:_r(Mi(t.longitude),Mi(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=Pi(n[i],r[i]);if(o)return o}return _r(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var u=_r(r[s],o[s]);if(0!==u)return u;var a=Pi(n[r[s]],i[o[s]]);if(0!==a)return a}return _r(r.length,o.length)}(t.mapValue,e.mapValue);default:throw yr()}}function Ci(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return _r(t,e);var n=Li(t),r=Li(e),i=_r(n.seconds,r.seconds);return 0!==i?i:_r(n.nanos,r.nanos)}function Di(t){return Ri(t)}function Ri(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=Li(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Vi(t.bytesValue).toBase64():"referenceValue"in t?Lr.W(t.referenceValue).toString():"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=Ri(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+Ri(t.fields[o])}return e+"}"}(t.mapValue):yr();var e}function Li(t){if(br(!!t),"string"==typeof t){var e=0,n=Ai.exec(t);if(br(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Mi(t.seconds),nanos:Mi(t.nanos)}}function Mi(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Vi(t){return"string"==typeof t?Kr.fromBase64String(t):Kr.fromUint8Array(t)}function Fi(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.M()}}function Ui(t){return!!t&&"integerValue"in t}function qi(t){return!!t&&"arrayValue"in t}function Bi(t){return!!t&&"nullValue"in t}function zi(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Gi(t){return!!t&&"mapValue"in t}var Ki={asc:"ASCENDING",desc:"DESCENDING"},Hi={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Wi=function(t,e){this.t=t,this.Ue=e};function Qi(t){return{integerValue:""+t}}function Yi(t,e){if(t.Ue){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Vr(e)?"-0":e}}function Xi(t,e){return Fr(e)?Qi(e):Yi(t,e)}function Ji(t,e){return t.Ue?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function Zi(t,e){return t.Ue?e.toBase64():e.toUint8Array()}function $i(t,e){return Ji(t,e.P())}function to(t){return br(!!t),Sr.m(function(t){var e=Li(t);return new kr(e.seconds,e.nanos)}(t))}function eo(t,e){return function(t){return new Cr(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).M()}function no(t){var e=Cr.k(t);return br(jo(e)),e}function ro(t,e){return eo(t.t,e.path)}function io(t,e){var n=no(e);if(n.get(1)!==t.t.projectId)throw new Nr(Ar.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.t.projectId);if(n.get(3)!==t.t.database)throw new Nr(Ar.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.t.database);return new Lr(ao(n))}function oo(t,e){return eo(t.t,e)}function so(t){var e=no(t);return 4===e.length?Cr.$():ao(e)}function uo(t){return new Cr(["projects",t.t.projectId,"databases",t.t.database]).M()}function ao(t){return br(t.length>4&&"documents"===t.get(4)),t.v(5)}function co(t,e,n){return{name:ro(t,e),fields:n.proto.mapValue.fields}}function ho(t,e){var n;if(e instanceof Xo)n={update:co(t,e.key,e.value)};else if(e instanceof ns)n={delete:ro(t,e.key)};else if(e instanceof Jo)n={update:co(t,e.key,e.data),updateMask:To(e.Qe)};else if(e instanceof $o)n={transform:{document:ro(t,e.key),fieldTransforms:e.fieldTransforms.map(function(t){return function(t,e){var n=e.transform;if(n instanceof So)return{fieldPath:e.field.M(),setToServerValue:"REQUEST_TIME"};if(n instanceof Po)return{fieldPath:e.field.M(),appendMissingElements:{values:n.elements}};if(n instanceof Do)return{fieldPath:e.field.M(),removeAllFromArray:{values:n.elements}};if(n instanceof Lo)return{fieldPath:e.field.M(),increment:n.Ke};throw yr()}(0,t)})}};else{if(!(e instanceof rs))return yr();n={verify:ro(t,e.key)}}return e.je.We||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:$i(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:yr()}(t,e.je)),n}function lo(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?Bo.updateTime(to(t.updateTime)):void 0!==t.exists?Bo.exists(t.exists):Bo.Ge()}(e.currentDocument):Bo.Ge();if(e.update){var r=io(t,e.update.name),i=new is({mapValue:{fields:e.update.fields}});if(e.updateMask){var o=function(t){return new Fo((t.fieldPaths||[]).map(function(t){return Rr.U(t)}))}(e.updateMask);return new Jo(r,i,o,n)}return new Xo(r,i,n)}if(e.delete){var s=io(t,e.delete);return new ns(s,n)}if(e.transform){var u=io(t,e.transform.document),a=e.transform.fieldTransforms.map(function(e){return function(t,e){var n=null;"setToServerValue"in e?(br("REQUEST_TIME"===e.setToServerValue),n=new So):"appendMissingElements"in e?n=new Po(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new Do(e.removeAllFromArray.values||[]):"increment"in e?n=new Lo(t,e.increment):yr();var r=Rr.U(e.fieldPath);return new Uo(r,n)}(t,e)});return br(!0===n.exists),new $o(u,a)}if(e.verify){var c=io(t,e.verify);return new rs(c,n)}return yr()}function fo(t,e){return{documents:[oo(t,e.path)]}}function po(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=oo(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=oo(t,r.S()),n.structuredQuery.from=[{collectionId:r.C()}]);var i=function(t){if(0!==t.length){var e=t.map(function(t){return function(t){if("=="===t.op){if(zi(t.value))return{unaryFilter:{field:_o(t.field),op:"IS_NAN"}};if(Bi(t.value))return{unaryFilter:{field:_o(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(zi(t.value))return{unaryFilter:{field:_o(t.field),op:"IS_NOT_NAN"}};if(Bi(t.value))return{unaryFilter:{field:_o(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:_o(t.field),op:wo(t.op),value:t.value}}}(t)});return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map(function(t){return function(t){return{field:_o(t.field),direction:go(t.dir)}}(t)})}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.Ue||Mr(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=bo(e.startAt)),e.endAt&&(n.structuredQuery.endAt=bo(e.endAt)),n}function vo(t){var e=so(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){br(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=yo(n.where));var u=[];n.orderBy&&(u=n.orderBy.map(function(t){return function(t){return new Bs(Eo(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)}));var a=null;n.limit&&(a=function(t){var e;return Mr(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=mo(n.startAt));var h=null;return n.endAt&&(h=mo(n.endAt)),fs(e,i,u,s,a,"F",c,h)}function yo(t){return t?void 0!==t.unaryFilter?[Io(t)]:void 0!==t.fieldFilter?[Oo(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return yo(t)}).reduce(function(t,e){return t.concat(e)}):yr():[]}function bo(t){return{before:t.before,values:t.position}}function mo(t){return new Vs(t.values||[],!!t.before)}function go(t){return Ki[t]}function wo(t){return Hi[t]}function _o(t){return{fieldPath:t.M()}}function Eo(t){return Rr.U(t.fieldPath)}function Oo(t){return Ns.create(Eo(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return yr()}}(t.fieldFilter.op),t.fieldFilter.value)}function Io(t){switch(t.unaryFilter.op){case"IS_NAN":var e=Eo(t.unaryFilter.field);return Ns.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=Eo(t.unaryFilter.field);return Ns.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Eo(t.unaryFilter.field);return Ns.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Eo(t.unaryFilter.field);return Ns.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return yr()}}function To(t){var e=[];return t.fields.forEach(function(t){return e.push(t.M())}),{fieldPaths:e}}function jo(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}var xo=function(){this.ze=void 0};function Ao(t,e,n){return t instanceof So?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Po?Co(t,e):t instanceof Do?Ro(t,e):function(t,e){var n=ko(t,e),r=Mo(n)+Mo(t.Ke);return Ui(n)&&Ui(t.Ke)?Qi(r):Yi(t.serializer,r)}(t,e)}function No(t,e,n){return t instanceof Po?Co(t,e):t instanceof Do?Ro(t,e):n}function ko(t,e){return t instanceof Lo?Ui(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var So=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.c)(e,t),e}(xo),Po=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(r.c)(e,t),e}(xo);function Co(t,e){for(var n=Vo(e),r=function(t){n.some(function(e){return ki(e,t)})||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Do=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(r.c)(e,t),e}(xo);function Ro(t,e){for(var n=Vo(e),r=function(t){n=n.filter(function(e){return!ki(e,t)})},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Lo=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).serializer=e,r.Ke=n,r}return Object(r.c)(e,t),e}(xo);function Mo(t){return Mi(t.integerValue||t.doubleValue)}function Vo(t){return qi(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Fo=function(){function t(t){this.fields=t,t.sort(Rr.V)}return t.prototype.He=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].N(t))return!0;return!1},t.prototype.isEqual=function(t){return Er(this.fields,t.fields,function(t,e){return t.isEqual(e)})},t}(),Uo=function(t,e){this.field=t,this.transform=e},qo=function(t,e){this.version=t,this.transformResults=e},Bo=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.Ge=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"We",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function zo(t,e){return void 0!==t.updateTime?e instanceof as&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof as}var Go=function(){};function Ko(t,e,n){return t instanceof Xo?function(t,e,n){return new as(t.key,n.version,t.value,{hasCommittedMutations:!0})}(t,0,n):t instanceof Jo?function(t,e,n){if(!zo(t.je,e))return new hs(t.key,n.version);var r=Zo(t,e);return new as(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):t instanceof $o?function(t,e,n){if(br(null!=n.transformResults),!zo(t.je,e))return new hs(t.key,n.version);var r=ts(0,e),i=function(t,e,n){var r=[];br(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,u=null;e instanceof as&&(u=e.field(o.field)),r.push(No(s,u,n[i]))}return r}(t.fieldTransforms,e,n.transformResults),o=n.version,s=es(t,r.data(),i);return new as(t.key,o,s,{hasCommittedMutations:!0})}(t,e,n):function(t,e,n){return new cs(t.key,n.version,{hasCommittedMutations:!0})}(t,0,n)}function Ho(t,e,n,r){return t instanceof Xo?function(t,e){if(!zo(t.je,e))return e;var n=Yo(e);return new as(t.key,n,t.value,{Je:!0})}(t,e):t instanceof Jo?function(t,e){if(!zo(t.je,e))return e;var n=Yo(e),r=Zo(t,e);return new as(t.key,n,r,{Je:!0})}(t,e):t instanceof $o?function(t,e,n,r){if(!zo(t.je,e))return e;var i=ts(0,e),o=function(t,e,n,r){for(var i=[],o=0,s=t;o<s.length;o++){var u=s[o],a=u.transform,c=null;n instanceof as&&(c=n.field(u.field)),null===c&&r instanceof as&&(c=r.field(u.field)),i.push(Ao(a,c,e))}return i}(t.fieldTransforms,n,e,r),s=es(t,i.data(),o);return new as(t.key,i.version,s,{Je:!0})}(t,e,r,n):function(t,e){return zo(t.je,e)?new cs(t.key,Sr.min()):e}(t,e)}function Wo(t,e){return t instanceof $o?function(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],s=e instanceof as?e.field(o.field):void 0,u=ko(o.transform,s||null);null!=u&&(n=null==n?(new os).set(o.field,u):n.set(o.field,u))}return n?n.Ye():null}(t,e):null}function Qo(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.je.isEqual(e.je)&&(0===t.type?t.value.isEqual(e.value):1===t.type?t.data.isEqual(e.data)&&t.Qe.isEqual(e.Qe):2!==t.type||Er(t.fieldTransforms,t.fieldTransforms,function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Po&&e instanceof Po||t instanceof Do&&e instanceof Do?Er(t.elements,e.elements,ki):t instanceof Lo&&e instanceof Lo?ki(t.Ke,e.Ke):t instanceof So&&e instanceof So}(t.transform,e.transform)}(t,e)}))}function Yo(t){return t instanceof as?t.version:Sr.min()}var Xo=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).key=e,i.value=n,i.je=r,i.type=0,i}return Object(r.c)(e,t),e}(Go),Jo=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this)||this).key=e,o.data=n,o.Qe=r,o.je=i,o.type=1,o}return Object(r.c)(e,t),e}(Go);function Zo(t,e){return function(t,e){var n=new os(e);return t.Qe.fields.forEach(function(e){if(!e.T()){var r=t.data.field(e);null!==r?n.set(e,r):n.delete(e)}}),n.Ye()}(t,e instanceof as?e.data():is.empty())}var $o=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.fieldTransforms=n,r.type=2,r.je=Bo.exists(!0),r}return Object(r.c)(e,t),e}(Go);function ts(t,e){return e}function es(t,e,n){for(var r=new os(e),i=0;i<t.fieldTransforms.length;i++)r.set(t.fieldTransforms[i].field,n[i]);return r.Ye()}var ns=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.je=n,r.type=3,r}return Object(r.c)(e,t),e}(Go),rs=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.je=n,r.type=4,r}return Object(r.c)(e,t),e}(Go),is=function(){function t(t){this.proto=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.T())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!Gi(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.C()])||null},t.prototype.isEqual=function(t){return ki(this.proto,t.proto)},t}(),os=function(){function t(t){void 0===t&&(t=is.empty()),this.Xe=t,this.Ze=new Map}return t.prototype.set=function(t,e){return this.tn(t,e),this},t.prototype.delete=function(t){return this.tn(t,null),this},t.prototype.tn=function(t,e){for(var n=this.Ze,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===Ni(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.C(),e)},t.prototype.Ye=function(){var t=this.en(Rr.$(),this.Ze);return null!=t?new is(t):this.Xe},t.prototype.en=function(t,e){var n=this,r=!1,i=this.Xe.field(t),o=Gi(i)?Object.assign({},i.mapValue.fields):{};return e.forEach(function(e,i){if(e instanceof Map){var s=n.en(t.child(i),e);null!=s&&(o[i]=s,r=!0)}else null!==e?(o[i]=e,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)}),r?{mapValue:{fields:o}}:null},t}();function ss(t){var e=[];return Tr(t.fields||{},function(t,n){var r=new Rr([t]);if(Gi(n)){var i=ss(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++)e.push(r.child(s[o]))}else e.push(r)}),new Fo(e)}var us=function(t,e){this.key=t,this.version=e},as=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this,e,n)||this).nn=r,o.Je=!!i.Je,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return Object(r.c)(e,t),e.prototype.field=function(t){return this.nn.field(t)},e.prototype.data=function(){return this.nn},e.prototype.sn=function(){return this.nn.proto},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.Je===t.Je&&this.hasCommittedMutations===t.hasCommittedMutations&&this.nn.isEqual(t.nn)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.nn.toString()+", {hasLocalMutations: "+this.Je+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.Je||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e}(us),cs=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n)||this).hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return Object(r.c)(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(us),hs=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.c)(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(us),ls=function(t,e,n,r,i,o,s,u){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===u&&(u=null),this.path=t,this.collectionGroup=e,this.rn=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=u,this.on=null,this.an=null};function fs(t,e,n,r,i,o,s,u){return new ls(t,e,n,r,i,o,s,u)}function ps(t){return new ls(t)}function ds(t){return!Mr(t.limit)&&"F"===t.limitType}function vs(t){return!Mr(t.limit)&&"L"===t.limitType}function ys(t){return t.rn.length>0?t.rn[0].field:null}function bs(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.cn())return r.field}return null}function ms(t){return null!==t.collectionGroup}function gs(t){var e=mr(t);if(null===e.on){e.on=[];var n=bs(e),r=ys(e);if(null!==n&&null===r)n.B()||e.on.push(new Bs(n)),e.on.push(new Bs(Rr.q(),"asc"));else{for(var i=!1,o=0,s=e.rn;o<s.length;o++){var u=s[o];e.on.push(u),u.field.B()&&(i=!0)}if(!i){var a=e.rn.length>0?e.rn[e.rn.length-1].dir:"asc";e.on.push(new Bs(Rr.q(),a))}}}return e.on}function ws(t){var e=mr(t);if(!e.an)if("F"===e.limitType)e.an=qr(e.path,e.collectionGroup,gs(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=gs(e);r<i.length;r++){var o=i[r];n.push(new Bs(o.field,"desc"===o.dir?"asc":"desc"))}var s=e.endAt?new Vs(e.endAt.position,!e.endAt.before):null,u=e.startAt?new Vs(e.startAt.position,!e.startAt.before):null;e.an=qr(e.path,e.collectionGroup,n,e.filters,e.limit,s,u)}return e.an}function _s(t,e,n){return new ls(t.path,t.collectionGroup,t.rn.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Es(t,e){return new ls(t.path,t.collectionGroup,t.rn.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}function Os(t,e){return new ls(t.path,t.collectionGroup,t.rn.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}function Is(t,e){return zr(ws(t),ws(e))&&t.limitType===e.limitType}function Ts(t){return Br(ws(t))+"|lt:"+t.limitType}function js(t){return"Query(target="+function(t){var e=t.path.M();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map(function(t){return(e=t).field.M()+" "+e.op+" "+Di(e.value);var e}).join(", ")+"]"),Mr(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map(function(t){return(e=t).field.M()+" ("+e.dir+")";var e}).join(", ")+"]"),t.startAt&&(e+=", startAt: "+Fs(t.startAt)),t.endAt&&(e+=", endAt: "+Fs(t.endAt)),"Target("+e+")"}(ws(t))+"; limitType="+t.limitType+")"}function xs(t,e){return function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.j(t.collectionGroup)&&t.path.N(n):Lr.G(t.path)?t.path.isEqual(n):t.path.F(n)}(t,e)&&function(t,e){for(var n=0,r=t.rn;n<r.length;n++){var i=r[n];if(!i.field.B()&&null===e.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!Us(t.startAt,gs(t),e)||t.endAt&&Us(t.endAt,gs(t),e))}(t,e)}function As(t){return function(e,n){for(var r=!1,i=0,o=gs(t);i<o.length;i++){var s=o[i],u=zs(s,e,n);if(0!==u)return u;r=r||s.field.B()}return 0}}var Ns=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return Object(r.c)(e,t),e.create=function(t,n,r){return t.B()?"in"===n||"not-in"===n?this.un(t,n,r):new ks(t,n,r):"array-contains"===n?new Ds(t,r):"in"===n?new Rs(t,r):"not-in"===n?new Ls(t,r):"array-contains-any"===n?new Ms(t,r):new e(t,n,r)},e.un=function(t,e,n){return"in"===e?new Ss(t,n):new Ps(t,n)},e.prototype.matches=function(t){var e=t.field(this.field);return"!="===this.op?null!==e&&this.hn(Pi(e,this.value)):null!==e&&Ni(this.value)===Ni(e)&&this.hn(Pi(e,this.value))},e.prototype.hn=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return yr()}},e.prototype.cn=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}(function(){}),ks=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=Lr.W(r.referenceValue),i}return Object(r.c)(e,t),e.prototype.matches=function(t){var e=Lr.V(t.key,this.key);return this.hn(e)},e}(Ns),Ss=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=Cs(0,n),r}return Object(r.c)(e,t),e.prototype.matches=function(t){return this.keys.some(function(e){return e.isEqual(t.key)})},e}(Ns),Ps=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=Cs(0,n),r}return Object(r.c)(e,t),e.prototype.matches=function(t){return!this.keys.some(function(e){return e.isEqual(t.key)})},e}(Ns);function Cs(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(function(t){return Lr.W(t.referenceValue)})}var Ds=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return Object(r.c)(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return qi(e)&&Si(e.arrayValue,this.value)},e}(Ns),Rs=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return Object(r.c)(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&Si(this.value.arrayValue,e)},e}(Ns),Ls=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return Object(r.c)(e,t),e.prototype.matches=function(t){if(Si(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.field(this.field);return null!==e&&!Si(this.value.arrayValue,e)},e}(Ns),Ms=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return Object(r.c)(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!qi(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(t){return Si(e.value.arrayValue,t)})},e}(Ns),Vs=function(t,e){this.position=t,this.before=e};function Fs(t){return(t.before?"b":"a")+":"+t.position.map(function(t){return Di(t)}).join(",")}function Us(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.B()?Lr.V(Lr.W(s.referenceValue),n.key):Pi(s,n.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function qs(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!ki(t.position[n],e.position[n]))return!1;return!0}var Bs=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function zs(t,e,n){var r=t.field.B()?Lr.V(e.key,n.key):function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?Pi(r,i):yr()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return yr()}}function Gs(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var Ks=function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})},Hs=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.ln=t,this._n=e,this.fn=n,this.dn=r,this.wn=i,this.Tn=0,this.En=null,this.In=Date.now(),this.reset()}return t.prototype.reset=function(){this.Tn=0},t.prototype.mn=function(){this.Tn=this.wn},t.prototype.An=function(t){var e=this;this.cancel();var n=Math.floor(this.Tn+this.Rn()),r=Math.max(0,Date.now()-this.In),i=Math.max(0,n-r);i>0&&fr("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.Tn+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.En=this.ln.Pn(this._n,i,function(){return e.In=Date.now(),t()}),this.Tn*=this.dn,this.Tn<this.fn&&(this.Tn=this.fn),this.Tn>this.wn&&(this.Tn=this.wn)},t.prototype.gn=function(){null!==this.En&&(this.En.Vn(),this.En=null)},t.prototype.cancel=function(){null!==this.En&&(this.En.cancel(),this.En=null)},t.prototype.Rn=function(){return(Math.random()-.5)*this.Tn},t}(),Ws=function(){function t(t){var e=this;this.yn=null,this.pn=null,this.result=void 0,this.error=void 0,this.vn=!1,this.bn=!1,t(function(t){e.vn=!0,e.result=t,e.yn&&e.yn(t)},function(t){e.vn=!0,e.error=t,e.pn&&e.pn(t)})}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.bn&&yr(),this.bn=!0,this.vn?this.error?this.Sn(n,this.error):this.Dn(e,this.result):new t(function(t,i){r.yn=function(n){r.Dn(e,n).next(t,i)},r.pn=function(e){r.Sn(n,e).next(t,i)}})},t.prototype.Cn=function(){var t=this;return new Promise(function(e,n){t.next(e,n)})},t.prototype.Nn=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.Dn=function(e,n){return e?this.Nn(function(){return e(n)}):t.resolve(n)},t.prototype.Sn=function(e,n){return e?this.Nn(function(){return e(n)}):t.reject(n)},t.resolve=function(e){return new t(function(t,n){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.xn=function(e){return new t(function(t,n){var r=0,i=0,o=!1;e.forEach(function(e){++r,e.next(function(){++i,o&&i===r&&t()},function(t){return n(t)})}),o=!0,i===r&&t()})},t.Fn=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next(function(n){return n?t.resolve(n):e()})},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach(function(t,i){r.push(e.call(n,t,i))}),this.xn(r)},t}(),Qs=function(){function t(e,n,r){this.name=e,this.version=n,this.On=r,12.2===t.Mn(Object(s.j)())&&pr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return fr("SimpleDb","Removing database:",t),tu(window.indexedDB.deleteDatabase(t)).Cn()},t.kn=function(){if("undefined"==typeof indexedDB)return!1;if(t.$n())return!0;var e=Object(s.j)(),n=t.Mn(e),r=0<n&&n<10,i=t.Ln(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.$n=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Bn)},t.qn=function(t,e){return t.store(e)},t.Mn=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Ln=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.Un=function(t){return Object(r.b)(this,void 0,void 0,function(){var e,n=this;return Object(r.d)(this,function(r){switch(r.label){case 0:return this.db?[3,2]:(fr("SimpleDb","Opening database:",this.name),e=this,[4,new Promise(function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){e(t.target.result)},i.onblocked=function(){r(new Xs(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;r("VersionError"===n.name?new Nr(Ar.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new Xs(t,n))},i.onupgradeneeded=function(t){fr("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion),n.On.createOrUpgrade(t.target.result,i.transaction,t.oldVersion,n.version).next(function(){fr("SimpleDb","Database upgrade to version "+n.version+" complete")})}})]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.Qn&&(this.db.onversionchange=function(t){return n.Qn(t)}),this.db)]}})})},t.prototype.Kn=function(t){this.Qn=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,i){return Object(r.b)(this,void 0,void 0,function(){var o,s,u,a,c;return Object(r.d)(this,function(h){switch(h.label){case 0:o="readonly"===e,s=0,u=function(){var e,u,c,h,l;return Object(r.d)(this,function(r){switch(r.label){case 0:++s,r.label=1;case 1:return r.trys.push([1,4,,5]),[4,a.Un(t)];case 2:return a.db=r.sent(),e=Zs.open(a.db,t,o?"readonly":"readwrite",n),u=i(e).catch(function(t){return e.abort(t),Ws.reject(t)}).Cn(),c={},u.catch(function(){}),[4,e.Wn];case 3:return[2,(c.value=(r.sent(),u),c)];case 4:return fr("SimpleDb","Transaction failed with error:",(h=r.sent()).message,"Retrying:",l="FirebaseError"!==h.name&&s<3),a.close(),l?[3,5]:[2,{value:Promise.reject(h)}];case 5:return[2]}})},a=this,h.label=1;case 1:return[5,u()];case 2:if("object"==typeof(c=h.sent()))return[2,c.value];h.label=3;case 3:return[3,1];case 4:return[2]}})})},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),Ys=function(){function t(t){this.jn=t,this.Gn=!1,this.zn=null}return Object.defineProperty(t.prototype,"vn",{get:function(){return this.Gn},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Hn",{get:function(){return this.zn},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.jn=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Gn=!0},t.prototype.Jn=function(t){this.zn=t},t.prototype.delete=function(){return tu(this.jn.delete())},t}(),Xs=function(t){function e(e,n){var r=this;return(r=t.call(this,Ar.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Object(r.c)(e,t),e}(Nr);function Js(t){return"IndexedDbTransactionError"===t.name}var Zs=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.Yn=new Ks,this.transaction.oncomplete=function(){n.Yn.resolve()},this.transaction.onabort=function(){e.error?n.Yn.reject(new Xs(t,e.error)):n.Yn.resolve()},this.transaction.onerror=function(e){var r=nu(e.target.error);n.Yn.reject(new Xs(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new Xs(n,e)}},Object.defineProperty(t.prototype,"Wn",{get:function(){return this.Yn.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.Yn.reject(t),this.aborted||(fr("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new $s(e)},t}(),$s=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(fr("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(fr("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),tu(n)},t.prototype.add=function(t){return fr("SimpleDb","ADD",this.store.name,t,t),tu(this.store.add(t))},t.prototype.get=function(t){var e=this;return tu(this.store.get(t)).next(function(n){return void 0===n&&(n=null),fr("SimpleDb","GET",e.store.name,t,n),n})},t.prototype.delete=function(t){return fr("SimpleDb","DELETE",this.store.name,t),tu(this.store.delete(t))},t.prototype.count=function(){return fr("SimpleDb","COUNT",this.store.name),tu(this.store.count())},t.prototype.Xn=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.Zn(n,function(t,e){r.push(e)}).next(function(){return r})},t.prototype.ts=function(t,e){fr("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.es=!1;var r=this.cursor(n);return this.Zn(r,function(t,e,n){return n.delete()})},t.prototype.ns=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.Zn(r,e)},t.prototype.ss=function(t){var e=this.cursor({});return new Ws(function(n,r){e.onerror=function(t){var e=nu(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next(function(t){t?r.continue():n()}):n()}})},t.prototype.Zn=function(t,e){var n=[];return new Ws(function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new Ys(i),s=e(i.primaryKey,i.value,o);if(s instanceof Ws){var u=s.catch(function(t){return o.done(),Ws.reject(t)});n.push(u)}o.vn?r():null===o.Hn?i.continue():i.continue(o.Hn)}else r()}}).next(function(){return Ws.xn(n)})},t.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.es?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function tu(t){return new Ws(function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=nu(t.target.error);n(e)}})}var eu=!1;function nu(t){var e=Qs.Mn(Object(s.j)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new Nr("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return eu||(eu=!0,setTimeout(function(){throw r},0)),r}}return t}function ru(){return"undefined"!=typeof window?window:null}function iu(){return"undefined"!=typeof document?document:null}var ou=function(){function t(t,e,n,r,i){this.rs=t,this._n=e,this.os=n,this.op=r,this.cs=i,this.us=new Ks,this.then=this.us.promise.then.bind(this.us.promise),this.us.promise.catch(function(t){})}return t.hs=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.ls=setTimeout(function(){return e._s()},t)},t.prototype.Vn=function(){return this._s()},t.prototype.cancel=function(t){null!==this.ls&&(this.clearTimeout(),this.us.reject(new Nr(Ar.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype._s=function(){var t=this;this.rs.fs(function(){return null!==t.ls?(t.clearTimeout(),t.op().then(function(e){return t.us.resolve(e)})):Promise.resolve()})},t.prototype.clearTimeout=function(){null!==this.ls&&(this.cs(this),clearTimeout(this.ls),this.ls=null)},t}(),su=function(){function t(){var t=this;this.ds=Promise.resolve(),this.ws=[],this.Ts=!1,this.Es=[],this.Is=null,this.As=!1,this.Rs=[],this.Ps=new Hs(this,"async_queue_retry"),this.gs=function(){var e=iu();e&&fr("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Ps.gn()};var e=iu();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.gs)}return Object.defineProperty(t.prototype,"Vs",{get:function(){return this.Ts},enumerable:!1,configurable:!0}),t.prototype.fs=function(t){this.enqueue(t)},t.prototype.ys=function(t){this.ps(),this.vs(t)},t.prototype.bs=function(){if(!this.Ts){this.Ts=!0;var t=iu();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.gs)}},t.prototype.enqueue=function(t){return this.ps(),this.Ts?new Promise(function(t){}):this.vs(t)},t.prototype.Ss=function(t){var e=this;this.fs(function(){return e.ws.push(t),e.Ds()})},t.prototype.Ds=function(){return Object(r.b)(this,void 0,void 0,function(){var t,e=this;return Object(r.d)(this,function(n){switch(n.label){case 0:if(0===this.ws.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.ws[0]()];case 2:return n.sent(),this.ws.shift(),this.Ps.reset(),[3,4];case 3:if(!Js(t=n.sent()))throw t;return fr("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.ws.length>0&&this.Ps.An(function(){return e.Ds()}),n.label=5;case 5:return[2]}})})},t.prototype.vs=function(t){var e=this,n=this.ds.then(function(){return e.As=!0,t().catch(function(t){throw e.Is=t,e.As=!1,pr("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t}).then(function(t){return e.As=!1,t})});return this.ds=n,n},t.prototype.Pn=function(t,e,n){var r=this;this.ps(),this.Rs.indexOf(t)>-1&&(e=0);var i=ou.hs(this,t,e,n,function(t){return r.Cs(t)});return this.Es.push(i),i},t.prototype.ps=function(){this.Is&&yr()},t.prototype.Ns=function(){},t.prototype.xs=function(){return Object(r.b)(this,void 0,void 0,function(){var t;return Object(r.d)(this,function(e){switch(e.label){case 0:return[4,t=this.ds];case 1:e.sent(),e.label=2;case 2:if(t!==this.ds)return[3,0];e.label=3;case 3:return[2]}})})},t.prototype.Fs=function(t){for(var e=0,n=this.Es;e<n.length;e++)if(n[e]._n===t)return!0;return!1},t.prototype.Os=function(t){var e=this;return this.xs().then(function(){e.Es.sort(function(t,e){return t.os-e.os});for(var n=0,r=e.Es;n<r.length;n++){var i=r[n];if(i.Vn(),"all"!==t&&i._n===t)break}return e.xs()})},t.prototype.Ms=function(t){this.Rs.push(t)},t.prototype.Cs=function(t){var e=this.Es.indexOf(t);this.Es.splice(e,1)},t}();function uu(t,e){if(pr("AsyncQueue",e+": "+t),Js(t))return new Nr(Ar.UNAVAILABLE,e+": "+t);throw t}var au=function(){this.ks=void 0,this.listeners=[]},cu=function(){this.queries=new xr(function(t){return Ts(t)},Is),this.onlineState="Unknown",this.$s=new Set};function hu(t,e){return Object(r.b)(this,void 0,void 0,function(){var n,i,o,s,u,a,c;return Object(r.d)(this,function(r){switch(r.label){case 0:if(n=mr(t),o=!1,(s=n.queries.get(i=e.query))||(o=!0,s=new au),!o)return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),u=s,[4,n.Ls(i)];case 2:return u.ks=r.sent(),[3,4];case 3:return a=r.sent(),c=uu(a,"Initialization of query '"+js(e.query)+"' failed"),[2,void e.onError(c)];case 4:return n.queries.set(i,s),s.listeners.push(e),e.Bs(n.onlineState),s.ks&&e.qs(s.ks)&&du(n),[2]}})})}function lu(t,e){return Object(r.b)(this,void 0,void 0,function(){var n,i,o,s,u;return Object(r.d)(this,function(r){return n=mr(t),o=!1,(s=n.queries.get(i=e.query))&&(u=s.listeners.indexOf(e))>=0&&(s.listeners.splice(u,1),o=0===s.listeners.length),o?[2,(n.queries.delete(i),n.Us(i))]:[2]})})}function fu(t,e){for(var n=mr(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],u=n.queries.get(s.query);if(u){for(var a=0,c=u.listeners;a<c.length;a++)c[a].qs(s)&&(r=!0);u.ks=s}}r&&du(n)}function pu(t,e,n){var r=mr(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function du(t){t.$s.forEach(function(t){t.next()})}var vu=function(){function t(t,e,n){this.query=t,this.Qs=e,this.Ks=!1,this.Ws=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.qs=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new vi(t.query,t.docs,t.Ut,e,t.Qt,t.fromCache,t.Kt,!0)}var o=!1;return this.Ks?this.js(t)&&(this.Qs.next(t),o=!0):this.Gs(t,this.onlineState)&&(this.zs(t),o=!0),this.Ws=t,o},t.prototype.onError=function(t){this.Qs.error(t)},t.prototype.Bs=function(t){this.onlineState=t;var e=!1;return this.Ws&&!this.Ks&&this.Gs(this.Ws,t)&&(this.zs(this.Ws),e=!0),e},t.prototype.Gs=function(t,e){return!t.fromCache||!(this.options.Hs&&"Offline"!==e||t.docs.T()&&"Offline"!==e)},t.prototype.js=function(t){return t.docChanges.length>0||!!(t.Kt||this.Ws&&this.Ws.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.zs=function(t){t=vi.jt(t.query,t.docs,t.Qt,t.fromCache),this.Ks=!0,this.Qs.next(t)},t}(),yu=function(){function t(t){this.uid=t}return t.prototype.Js=function(){return null!=this.uid},t.prototype.Ys=function(){return this.Js()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();yu.UNAUTHENTICATED=new yu(null),yu.Xs=new yu("google-credentials-uid"),yu.Zs=new yu("first-party-uid");var bu=function(t,e){this.user=e,this.type="OAuth",this.ti={},this.ti.Authorization="Bearer "+t},mu=function(){function t(){this.ei=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.ni=function(){},t.prototype.si=function(t){this.ei=t,t(yu.UNAUTHENTICATED)},t.prototype.ii=function(){this.ei=null},t}(),gu=function(){function t(t){var e=this;this.ri=null,this.currentUser=yu.UNAUTHENTICATED,this.oi=!1,this.ai=0,this.ei=null,this.forceRefresh=!1,this.ri=function(){e.ai++,e.currentUser=e.ci(),e.oi=!0,e.ei&&e.ei(e.currentUser)},this.ai=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.ri):(this.ri(null),t.get().then(function(t){e.auth=t,e.ri&&e.auth.addAuthTokenListener(e.ri)},function(){}))}return t.prototype.getToken=function(){var t=this,e=this.ai,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(function(n){return t.ai!==e?(fr("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(br("string"==typeof n.accessToken),new bu(n.accessToken,t.currentUser)):null}):Promise.resolve(null)},t.prototype.ni=function(){this.forceRefresh=!0},t.prototype.si=function(t){this.ei=t,this.oi&&t(this.currentUser)},t.prototype.ii=function(){this.auth&&this.auth.removeAuthTokenListener(this.ri),this.ri=null,this.ei=null},t.prototype.ci=function(){var t=this.auth&&this.auth.getUid();return br(null===t||"string"==typeof t),new yu(t)},t}(),wu=function(){function t(t,e){this.ui=t,this.hi=e,this.type="FirstParty",this.user=yu.Zs}return Object.defineProperty(t.prototype,"ti",{get:function(){var t={"X-Goog-AuthUser":this.hi},e=this.ui.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),t}(),_u=function(){function t(t,e){this.ui=t,this.hi=e}return t.prototype.getToken=function(){return Promise.resolve(new wu(this.ui,this.hi))},t.prototype.si=function(t){t(yu.Zs)},t.prototype.ii=function(){},t.prototype.ni=function(){},t}(),Eu=function(){function t(t,e,n,r){this.batchId=t,this.li=e,this.baseMutations=n,this.mutations=r}return t.prototype._i=function(t,e,n){for(var r=n.fi,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=Ko(o,e,r[i]))}return e},t.prototype.di=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++){var i=r[n];i.key.isEqual(t)&&(e=Ho(i,e,e,this.li))}for(var o=e,s=0,u=this.mutations;s<u.length;s++){var a=u[s];a.key.isEqual(t)&&(e=Ho(a,e,o,this.li))}return e},t.prototype.wi=function(t){var e=this,n=t;return this.mutations.forEach(function(r){var i=e.di(r.key,t.get(r.key));i&&(n=n.rt(r.key,i))}),n},t.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},hi())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&Er(this.mutations,t.mutations,function(t,e){return Qo(t,e)})&&Er(this.baseMutations,t.baseMutations,function(t,e){return Qo(t,e)})},t}(),Ou=function(){function t(t,e,n,r){this.batch=t,this.Ti=e,this.fi=n,this.Ei=r}return t.from=function(e,n,r){br(e.mutations.length===r.length);for(var i=ai,o=e.mutations,s=0;s<o.length;s++)i=i.rt(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),Iu=function(){function t(){this.Ii=new xr(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.mi=!1}return t.prototype.Ai=function(t){var e=this.Ii.get(t);return e?e.readTime:Sr.min()},t.prototype.Ri=function(t,e){this.Pi(),this.Ii.set(t.key,{gi:t,readTime:e})},t.prototype.Vi=function(t,e){void 0===e&&(e=null),this.Pi(),this.Ii.set(t,{gi:null,readTime:e})},t.prototype.yi=function(t,e){this.Pi();var n=this.Ii.get(e);return void 0!==n?Ws.resolve(n.gi):this.pi(t,e)},t.prototype.getEntries=function(t,e){return this.vi(t,e)},t.prototype.apply=function(t){return this.Pi(),this.mi=!0,this.bi(t)},t.prototype.Pi=function(){},t}();function Tu(t){return new Wi(t,!0)}function ju(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var xu="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Au=function(){function t(){this.Si=[]}return t.prototype.Di=function(t){this.Si.push(t)},t.prototype.Ci=function(){this.Si.forEach(function(t){return t()})},t}(),Nu=function(){function t(t,e,n){this.Ni=t,this.xi=e,this.Fi=n}return t.prototype.Oi=function(t,e){var n=this;return this.xi.Mi(t,e).next(function(r){return n.ki(t,e,r)})},t.prototype.ki=function(t,e,n){return this.Ni.yi(t,e).next(function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].di(e,t);return t})},t.prototype.$i=function(t,e,n){var r=oi();return e.forEach(function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].di(t,e);r=r.rt(t,e)}),r},t.prototype.Li=function(t,e){var n=this;return this.Ni.getEntries(t,e).next(function(e){return n.Bi(t,e)})},t.prototype.Bi=function(t,e){var n=this;return this.xi.qi(t,e).next(function(r){var i=n.$i(t,e,r),o=ii();return i.forEach(function(t,e){e||(e=new cs(t,Sr.min())),o=o.rt(t,e)}),o})},t.prototype.Ui=function(t,e,n){return function(t){return Lr.G(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Qi(t,e.path):ms(e)?this.Ki(t,e,n):this.Wi(t,e,n)},t.prototype.Qi=function(t,e){return this.Oi(t,new Lr(e)).next(function(t){var e=ui();return t instanceof as&&(e=e.rt(t.key,t)),e})},t.prototype.Ki=function(t,e,n){var r=this,i=e.collectionGroup,o=ui();return this.Fi.ji(t,i).next(function(s){return Ws.forEach(s,function(s){var u=function(t,e){return new ls(e,null,t.rn.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.Wi(t,u,n).next(function(t){t.forEach(function(t,e){o=o.rt(t,e)})})}).next(function(){return o})})},t.prototype.Wi=function(t,e,n){var r,i,o=this;return this.Ni.Ui(t,e,n).next(function(n){return r=n,o.xi.Gi(t,e)}).next(function(e){return o.zi(t,i=e,r).next(function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,u=o.mutations;s<u.length;s++){var a=u[s],c=a.key,h=r.get(c),l=Ho(a,h,h,o.li);r=l instanceof as?r.rt(c,l):r.remove(c)}})}).next(function(){return r.forEach(function(t,n){xs(e,n)||(r=r.remove(t))}),r})},t.prototype.zi=function(t,e,n){for(var r=hi(),i=0,o=e;i<o.length;i++)for(var s=0,u=o[i].mutations;s<u.length;s++){var a=u[s];a instanceof Jo&&null===n.get(a.key)&&(r=r.add(a.key))}var c=n;return this.Ni.getEntries(t,r).next(function(t){return t.forEach(function(t,e){null!==e&&e instanceof as&&(c=c.rt(t,e))}),c})},t}(),ku=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.Hi=n,this.Ji=r}return t.Yi=function(e,n){for(var r=hi(),i=hi(),o=0,s=n.docChanges;o<s.length;o++){var u=s[o];switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:i=i.add(u.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),Su=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.Xi=function(t){return n.Zi(t)},this.tr=function(t){return e.er(t)})}return t.prototype.Zi=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.tr&&this.tr(t),t},t}();function Pu(t,e){var n=t[1],r=e[1],i=_r(t[0],e[0]);return 0===i?_r(n,r):i}Su.nr=-1;var Cu=function(){function t(t){this.sr=t,this.buffer=new ei(Pu),this.ir=0}return t.prototype.rr=function(){return++this.ir},t.prototype.ar=function(t){var e=[t,this.rr()];if(this.buffer.size<this.sr)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();Pu(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),Du={cr:!1,ur:0,hr:0,lr:0},Ru=function(){function t(t,e,n){this._r=t,this.dr=e,this.wr=n}return t.Tr=function(e){return new t(e,t.Er,t.Ir)},t}();Ru.Er=10,Ru.Ir=1e3,Ru.mr=new Ru(41943040,Ru.Er,Ru.Ir),Ru.Ar=new Ru(-1,0,0);var Lu=function(){function t(t,e){this.Rr=t,this.rs=e,this.Pr=!1,this.gr=null}return t.prototype.start=function(t){-1!==this.Rr.params._r&&this.Vr(t)},t.prototype.stop=function(){this.gr&&(this.gr.cancel(),this.gr=null)},Object.defineProperty(t.prototype,"yr",{get:function(){return null!==this.gr},enumerable:!1,configurable:!0}),t.prototype.Vr=function(t){var e=this,n=this.Pr?3e5:6e4;fr("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.gr=this.rs.Pn("lru_garbage_collection",n,function(){return Object(r.b)(e,void 0,void 0,function(){var e;return Object(r.d)(this,function(n){switch(n.label){case 0:this.gr=null,this.Pr=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.pr(this.Rr)];case 2:return n.sent(),[3,7];case 3:return Js(e=n.sent())?(fr("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,cc(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.Vr(t)];case 8:return n.sent(),[2]}})})})},t}(),Mu=function(){function t(t,e){this.vr=t,this.params=e}return t.prototype.br=function(t,e){return this.vr.Sr(t).next(function(t){return Math.floor(e/100*t)})},t.prototype.Dr=function(t,e){var n=this;if(0===e)return Ws.resolve(Su.nr);var r=new Cu(e);return this.vr.De(t,function(t){return r.ar(t.sequenceNumber)}).next(function(){return n.vr.Cr(t,function(t){return r.ar(t)})}).next(function(){return r.maxValue})},t.prototype.Nr=function(t,e,n){return this.vr.Nr(t,e,n)},t.prototype.Fr=function(t,e){return this.vr.Fr(t,e)},t.prototype.Or=function(t,e){var n=this;return-1===this.params._r?(fr("LruGarbageCollector","Garbage collection skipped; disabled"),Ws.resolve(Du)):this.Mr(t).next(function(r){return r<n.params._r?(fr("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params._r),Du):n.kr(t,e)})},t.prototype.Mr=function(t){return this.vr.Mr(t)},t.prototype.kr=function(t,e){var n,r,i,s,u,a,c,h=this,l=Date.now();return this.br(t,this.params.dr).next(function(e){return e>h.params.wr?(fr("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+h.params.wr+" from "+e),r=h.params.wr):r=e,s=Date.now(),h.Dr(t,r)}).next(function(r){return n=r,u=Date.now(),h.Nr(t,n,e)}).next(function(e){return i=e,a=Date.now(),h.Fr(t,n)}).next(function(t){return c=Date.now(),lr()<=o.a.DEBUG&&fr("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(s-l)+"ms\n\tDetermined least recently used "+r+" in "+(u-s)+"ms\n\tRemoved "+i+" targets in "+(a-u)+"ms\n\tRemoved "+t+" documents in "+(c-a)+"ms\nTotal Duration: "+(c-l)+"ms"),Ws.resolve({cr:!0,ur:r,hr:i,lr:t})})},t}();function Vu(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=Uu(e)),e=Fu(t.get(n),e);return Uu(e)}function Fu(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function Uu(t){return t+"\x01\x01"}function qu(t){var e=t.length;if(br(e>=2),2===e)return br("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),Cr.$();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("\x01",o);switch((s<0||s>n)&&yr(),t.charAt(s+1)){case"\x01":var u=t.substring(o,s),a=void 0;0===i.length?a=u:(a=i+=u,i=""),r.push(a);break;case"\x10":i+=t.substring(o,s),i+="\0";break;case"\x11":i+=t.substring(o,s+1);break;default:yr()}o=s+2}return new Cr(r)}var Bu=function(t){this.$r=t};function zu(t,e){if(e.document)return function(t,e,n){var r=io(t,e.name),i=to(e.updateTime),o=new is({mapValue:{fields:e.fields}});return new as(r,i,o,{hasCommittedMutations:!!n})}(t.$r,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=Lr.H(e.noDocument.path),r=Qu(e.noDocument.readTime);return new cs(n,r,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var i=Lr.H(e.unknownDocument.path),o=Qu(e.unknownDocument.version);return new hs(i,o)}return yr()}function Gu(t,e,n){var r=Ku(n),i=e.key.path.S().O();if(e instanceof as){var o=function(t,e){return{name:ro(t,e.key),fields:e.sn().mapValue.fields,updateTime:Ji(t,e.version.P())}}(t.$r,e);return new _a(null,null,o,e.hasCommittedMutations,r,i)}if(e instanceof cs){var s=e.key.path.O(),u=Wu(e.version),a=e.hasCommittedMutations;return new _a(null,new ga(s,u),null,a,r,i)}if(e instanceof hs){var c=e.key.path.O(),h=Wu(e.version);return new _a(new wa(c,h),null,null,!0,r,i)}return yr()}function Ku(t){var e=t.P();return[e.seconds,e.nanoseconds]}function Hu(t){var e=new kr(t[0],t[1]);return Sr.m(e)}function Wu(t){var e=t.P();return new da(e.seconds,e.nanoseconds)}function Qu(t){var e=new kr(t.seconds,t.nanoseconds);return Sr.m(e)}function Yu(t,e){var n=(e.baseMutations||[]).map(function(e){return lo(t.$r,e)}),r=e.mutations.map(function(e){return lo(t.$r,e)}),i=kr.fromMillis(e.localWriteTimeMs);return new Eu(e.batchId,i,n,r)}function Xu(t){var e,n,r=Qu(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?Qu(t.lastLimboFreeSnapshotVersion):Sr.min();return void 0!==t.query.documents?(br(1===(n=t.query).documents.length),e=ws(ps(so(n.documents[0])))):e=function(t){return ws(vo(t))}(t.query),new Qr(e,t.targetId,0,t.lastListenSequenceNumber,r,i,Kr.fromBase64String(t.resumeToken))}function Ju(t,e){var n,r=Wu(e.et),i=Wu(e.lastLimboFreeSnapshotVersion);n=Gr(e.target)?fo(t.$r,e.target):po(t.$r,e.target);var o=e.resumeToken.toBase64();return new Oa(e.targetId,Br(e.target),r,o,e.sequenceNumber,i,n)}function Zu(t){var e=vo({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?_s(e,e.limit,"L"):e}var $u=function(){function t(t,e,n,r){this.userId=t,this.serializer=e,this.Fi=n,this.Lr=r,this.Br={}}return t.qr=function(e,n,r,i){return br(""!==e.uid),new t(e.Js()?e.uid:"",n,r,i)},t.prototype.Ur=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return na(t).ns({index:ba.userMutationsIndex,range:n},function(t,n,r){e=!1,r.done()}).next(function(){return e})},t.prototype.Qr=function(t,e,n,r){var i=this,o=ra(t),s=na(t);return s.add({}).next(function(u){br("number"==typeof u);for(var a=new Eu(u,e,n,r),c=function(t,e,n){var r=n.baseMutations.map(function(e){return ho(t.$r,e)}),i=n.mutations.map(function(e){return ho(t.$r,e)});return new ba(e,n.batchId,n.li.toMillis(),r,i)}(i.serializer,i.userId,a),h=[],l=new ei(function(t,e){return _r(t.M(),e.M())}),f=0,p=r;f<p.length;f++){var d=p[f],v=ma.key(i.userId,d.key.path,u);l=l.add(d.key.path.S()),h.push(s.put(c)),h.push(o.put(v,ma.PLACEHOLDER))}return l.forEach(function(e){h.push(i.Fi.Kr(t,e))}),t.Di(function(){i.Br[u]=a.keys()}),Ws.xn(h).next(function(){return a})})},t.prototype.Wr=function(t,e){var n=this;return na(t).get(e).next(function(t){return t?(br(t.userId===n.userId),Yu(n.serializer,t)):null})},t.prototype.jr=function(t,e){var n=this;return this.Br[e]?Ws.resolve(this.Br[e]):this.Wr(t,e).next(function(t){if(t){var r=t.keys();return n.Br[e]=r,r}return null})},t.prototype.Gr=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return na(t).ns({index:ba.userMutationsIndex,range:i},function(t,e,i){e.userId===n.userId&&(br(e.batchId>=r),o=Yu(n.serializer,e)),i.done()}).next(function(){return o})},t.prototype.zr=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return na(t).ns({index:ba.userMutationsIndex,range:e,reverse:!0},function(t,e,r){n=e.batchId,r.done()}).next(function(){return n})},t.prototype.Hr=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return na(t).Xn(ba.userMutationsIndex,n).next(function(t){return t.map(function(t){return Yu(e.serializer,t)})})},t.prototype.Mi=function(t,e){var n=this,r=ma.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return ra(t).ns({range:i},function(r,i,s){var u=r[0],a=r[2],c=qu(r[1]);if(u===n.userId&&e.path.isEqual(c))return na(t).get(a).next(function(t){if(!t)throw yr();br(t.userId===n.userId),o.push(Yu(n.serializer,t))});s.done()}).next(function(){return o})},t.prototype.qi=function(t,e){var n=this,r=new ei(_r),i=[];return e.forEach(function(e){var o=ma.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),u=ra(t).ns({range:s},function(t,i,o){var s=t[0],u=t[2],a=qu(t[1]);s===n.userId&&e.path.isEqual(a)?r=r.add(u):o.done()});i.push(u)}),Ws.xn(i).next(function(){return n.Jr(t,r)})},t.prototype.Gi=function(t,e){var n=this,r=e.path,i=r.length+1,o=ma.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),u=new ei(_r);return ra(t).ns({range:s},function(t,e,o){var s=t[0],a=t[2],c=qu(t[1]);s===n.userId&&r.N(c)?c.length===i&&(u=u.add(a)):o.done()}).next(function(){return n.Jr(t,u)})},t.prototype.Jr=function(t,e){var n=this,r=[],i=[];return e.forEach(function(e){i.push(na(t).get(e).next(function(t){if(null===t)throw yr();br(t.userId===n.userId),r.push(Yu(n.serializer,t))}))}),Ws.xn(i).next(function(){return r})},t.prototype.Yr=function(t,e){var n=this;return ea(t.Xr,this.userId,e).next(function(r){return t.Di(function(){n.Zr(e.batchId)}),Ws.forEach(r,function(e){return n.Lr.eo(t,e)})})},t.prototype.Zr=function(t){delete this.Br[t]},t.prototype.no=function(t){var e=this;return this.Ur(t).next(function(n){if(!n)return Ws.resolve();var r=IDBKeyRange.lowerBound(ma.prefixForUser(e.userId)),i=[];return ra(t).ns({range:r},function(t,n,r){if(t[0]===e.userId){var o=qu(t[1]);i.push(o)}else r.done()}).next(function(){br(0===i.length)})})},t.prototype.so=function(t,e){return ta(t,this.userId,e)},t.prototype.io=function(t){var e=this;return ia(t).get(this.userId).next(function(t){return t||new ya(e.userId,-1,"")})},t}();function ta(t,e,n){var r=ma.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return ra(t).ns({range:o,es:!0},function(t,n,r){t[0]===e&&t[1]===i&&(s=!0),r.done()}).next(function(){return s})}function ea(t,e,n){var r=t.store(ba.store),i=t.store(ma.store),o=[],s=IDBKeyRange.only(n.batchId),u=0,a=r.ns({range:s},function(t,e,n){return u++,n.delete()});o.push(a.next(function(){br(1===u)}));for(var c=[],h=0,l=n.mutations;h<l.length;h++){var f=l[h],p=ma.key(e,f.key.path,n.batchId);o.push(i.delete(p)),c.push(f.key)}return Ws.xn(o).next(function(){return c})}function na(t){return Ga.qn(t,ba.store)}function ra(t){return Ga.qn(t,ma.store)}function ia(t){return Ga.qn(t,ya.store)}var oa=function(){function t(t,e){this.serializer=t,this.Fi=e}return t.prototype.Ri=function(t,e,n){return aa(t).put(ca(e),n)},t.prototype.Vi=function(t,e){var n=aa(t),r=ca(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next(function(r){return r.byteSize+=e,n.ro(t,r)})},t.prototype.yi=function(t,e){var n=this;return aa(t).get(ca(e)).next(function(t){return n.oo(t)})},t.prototype.ao=function(t,e){var n=this;return aa(t).get(ca(e)).next(function(t){var e=n.oo(t);return e?{gi:e,size:ha(t)}:null})},t.prototype.getEntries=function(t,e){var n=this,r=oi();return this.co(t,e,function(t,e){var i=n.oo(e);r=r.rt(t,i)}).next(function(){return r})},t.prototype.uo=function(t,e){var n=this,r=oi(),i=new Zr(Lr.V);return this.co(t,e,function(t,e){var o=n.oo(e);o?(r=r.rt(t,o),i=i.rt(t,ha(e))):(r=r.rt(t,null),i=i.rt(t,0))}).next(function(){return{ho:r,lo:i}})},t.prototype.co=function(t,e,n){if(e.T())return Ws.resolve();var r=IDBKeyRange.bound(e.first().path.O(),e.last().path.O()),i=e.lt(),o=i.Et();return aa(t).ns({range:r},function(t,e,r){for(var s=Lr.H(t);o&&Lr.V(o,s)<0;)n(o,null),o=i.Et();o&&o.isEqual(s)&&(n(o,e),o=i.It()?i.Et():null),o?r.Jn(o.path.O()):r.done()}).next(function(){for(;o;)n(o,null),o=i.It()?i.Et():null})},t.prototype.Ui=function(t,e,n){var r=this,i=ui(),o=e.path.length+1,s={};if(n.isEqual(Sr.min())){var u=e.path.O();s.range=IDBKeyRange.lowerBound(u)}else{var a=e.path.O(),c=Ku(n);s.range=IDBKeyRange.lowerBound([a,c],!0),s.index=_a.collectionReadTimeIndex}return aa(t).ns(s,function(t,n,s){if(t.length===o){var u=zu(r.serializer,n);e.path.N(u.key.path)?u instanceof as&&xs(e,u)&&(i=i.rt(u.key,u)):s.done()}}).next(function(){return i})},t.prototype._o=function(t){return new sa(this,!!t&&t.fo)},t.prototype.wo=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},t.prototype.getMetadata=function(t){return ua(t).get(Ea.key).next(function(t){return br(!!t),t})},t.prototype.ro=function(t,e){return ua(t).put(Ea.key,e)},t.prototype.oo=function(t){if(t){var e=zu(this.serializer,t);return e instanceof cs&&e.version.isEqual(Sr.min())?null:e}return null},t}(),sa=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).To=e,r.fo=n,r.Eo=new xr(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),r}return Object(r.c)(e,t),e.prototype.bi=function(t){var e=this,n=[],r=0,i=new ei(function(t,e){return _r(t.M(),e.M())});return this.Ii.forEach(function(o,s){var u=e.Eo.get(o);if(s.gi){var a=Gu(e.To.serializer,s.gi,e.Ai(o));i=i.add(o.path.S());var c=ha(a);r+=c-u,n.push(e.To.Ri(t,o,a))}else if(r-=u,e.fo){var h=Gu(e.To.serializer,new cs(o,Sr.min()),e.Ai(o));n.push(e.To.Ri(t,o,h))}else n.push(e.To.Vi(t,o))}),i.forEach(function(r){n.push(e.To.Fi.Kr(t,r))}),n.push(this.To.updateMetadata(t,r)),Ws.xn(n)},e.prototype.pi=function(t,e){var n=this;return this.To.ao(t,e).next(function(t){return null===t?(n.Eo.set(e,0),null):(n.Eo.set(e,t.size),t.gi)})},e.prototype.vi=function(t,e){var n=this;return this.To.uo(t,e).next(function(t){var e=t.ho;return t.lo.forEach(function(t,e){n.Eo.set(t,e)}),e})},e}(Iu);function ua(t){return Ga.qn(t,Ea.store)}function aa(t){return Ga.qn(t,_a.store)}function ca(t){return t.path.O()}function ha(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw yr();e=t.noDocument}return JSON.stringify(e).length}var la=function(){function t(){this.Io=new fa}return t.prototype.Kr=function(t,e){return this.Io.add(e),Ws.resolve()},t.prototype.ji=function(t,e){return Ws.resolve(this.Io.getEntries(e))},t}(),fa=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.C(),n=t.S(),r=this.index[e]||new ei(Cr.V),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.C(),n=t.S(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new ei(Cr.V)).O()},t}(),pa=function(){function t(t){this.serializer=t}return t.prototype.createOrUpgrade=function(t,e,n,r){var i=this;br(n<r&&n>=0&&r<=11);var o=new Zs("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(va.store)}(t),function(t){t.createObjectStore(ya.store,{keyPath:ya.keyPath}),t.createObjectStore(ba.store,{keyPath:ba.keyPath,autoIncrement:!0}).createIndex(ba.userMutationsIndex,ba.userMutationsKeyPath,{unique:!0}),t.createObjectStore(ma.store)}(t),xa(t),function(t){t.createObjectStore(_a.store)}(t));var s=Ws.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(Ia.store),t.deleteObjectStore(Oa.store),t.deleteObjectStore(Ta.store)}(t),xa(t)),s=s.next(function(){return function(t){var e=t.store(Ta.store),n=new Ta(0,0,Sr.min().P(),0);return e.put(Ta.key,n)}(o)})),n<4&&r>=4&&(0!==n&&(s=s.next(function(){return function(t,e){return e.store(ba.store).Xn().next(function(n){t.deleteObjectStore(ba.store),t.createObjectStore(ba.store,{keyPath:ba.keyPath,autoIncrement:!0}).createIndex(ba.userMutationsIndex,ba.userMutationsKeyPath,{unique:!0});var r=e.store(ba.store),i=n.map(function(t){return r.put(t)});return Ws.xn(i)})}(t,o)})),s=s.next(function(){!function(t){t.createObjectStore(Aa.store,{keyPath:Aa.keyPath})}(t)})),n<5&&r>=5&&(s=s.next(function(){return i.removeAcknowledgedMutations(o)})),n<6&&r>=6&&(s=s.next(function(){return function(t){t.createObjectStore(Ea.store)}(t),i.addDocumentGlobal(o)})),n<7&&r>=7&&(s=s.next(function(){return i.ensureSequenceNumbers(o)})),n<8&&r>=8&&(s=s.next(function(){return i.createCollectionParentIndex(t,o)})),n<9&&r>=9&&(s=s.next(function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(_a.store);e.createIndex(_a.readTimeIndex,_a.readTimeIndexPath,{unique:!1}),e.createIndex(_a.collectionReadTimeIndex,_a.collectionReadTimeIndexPath,{unique:!1})}(e)})),n<10&&r>=10&&(s=s.next(function(){return i.rewriteCanonicalIds(o)})),n<11&&r>=11&&(s=s.next(function(){!function(t){t.createObjectStore(Na.store,{keyPath:Na.keyPath})}(t),function(t){t.createObjectStore(ka.store,{keyPath:ka.keyPath})}(t)})),s},t.prototype.addDocumentGlobal=function(t){var e=0;return t.store(_a.store).ns(function(t,n){e+=ha(n)}).next(function(){var n=new Ea(e);return t.store(Ea.store).put(Ea.key,n)})},t.prototype.removeAcknowledgedMutations=function(t){var e=this,n=t.store(ya.store),r=t.store(ba.store);return n.Xn().next(function(n){return Ws.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Xn(ba.userMutationsIndex,i).next(function(r){return Ws.forEach(r,function(r){br(r.userId===n.userId);var i=Yu(e.serializer,r);return ea(t,n.userId,i).next(function(){})})})})})},t.prototype.ensureSequenceNumbers=function(t){var e=t.store(Ia.store),n=t.store(_a.store);return t.store(Ta.store).get(Ta.key).next(function(t){var r=[];return n.ns(function(n,i){var o=new Cr(n),s=function(t){return[0,Vu(t)]}(o);r.push(e.get(s).next(function(n){return n?Ws.resolve():function(n){return e.put(new Ia(0,Vu(n),t.highestListenSequenceNumber))}(o)}))}).next(function(){return Ws.xn(r)})})},t.prototype.createCollectionParentIndex=function(t,e){t.createObjectStore(ja.store,{keyPath:ja.keyPath});var n=e.store(ja.store),r=new fa,i=function(t){if(r.add(t)){var e=t.C(),i=t.S();return n.put({collectionId:e,parent:Vu(i)})}};return e.store(_a.store).ns({es:!0},function(t,e){var n=new Cr(t);return i(n.S())}).next(function(){return e.store(ma.store).ns({es:!0},function(t,e){var n=qu(t[1]);return i(n.S())})})},t.prototype.rewriteCanonicalIds=function(t){var e=this,n=t.store(Oa.store);return n.ns(function(t,r){var i=Xu(r),o=Ju(e.serializer,i);return n.put(o)})},t}(),da=function(t,e){this.seconds=t,this.nanoseconds=e},va=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};va.store="owner",va.key="owner";var ya=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};ya.store="mutationQueues",ya.keyPath="userId";var ba=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};ba.store="mutations",ba.keyPath="batchId",ba.userMutationsIndex="userMutationsIndex",ba.userMutationsKeyPath=["userId","batchId"];var ma=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,Vu(e)]},t.key=function(t,e,n){return[t,Vu(e),n]},t}();ma.store="documentMutations",ma.PLACEHOLDER=new ma;var ga=function(t,e){this.path=t,this.readTime=e},wa=function(t,e){this.path=t,this.version=e},_a=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};_a.store="remoteDocuments",_a.readTimeIndex="readTimeIndex",_a.readTimeIndexPath="readTime",_a.collectionReadTimeIndex="collectionReadTimeIndex",_a.collectionReadTimeIndexPath=["parentPath","readTime"];var Ea=function(t){this.byteSize=t};Ea.store="remoteDocumentGlobal",Ea.key="remoteDocumentGlobalKey";var Oa=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};Oa.store="targets",Oa.keyPath="targetId",Oa.queryTargetsIndexName="queryTargetsIndex",Oa.queryTargetsKeyPath=["canonicalId","targetId"];var Ia=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};Ia.store="targetDocuments",Ia.keyPath=["targetId","path"],Ia.documentTargetsIndex="documentTargetsIndex",Ia.documentTargetsKeyPath=["path","targetId"];var Ta=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};Ta.key="targetGlobalKey",Ta.store="targetGlobal";var ja=function(t,e){this.collectionId=t,this.parent=e};function xa(t){t.createObjectStore(Ia.store,{keyPath:Ia.keyPath}).createIndex(Ia.documentTargetsIndex,Ia.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Oa.store,{keyPath:Oa.keyPath}).createIndex(Oa.queryTargetsIndexName,Oa.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Ta.store)}ja.store="collectionParents",ja.keyPath=["collectionId","parent"];var Aa=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};Aa.store="clientMetadata",Aa.keyPath="clientId";var Na=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};Na.store="bundles",Na.keyPath="bundleId";var ka=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};ka.store="namedQueries",ka.keyPath="name";var Sa=Object(r.g)(Object(r.g)(Object(r.g)(Object(r.g)([ya.store,ba.store,ma.store,_a.store,Oa.store,va.store,Ta.store,Ia.store],[Aa.store]),[Ea.store]),[ja.store]),[Na.store,ka.store]),Pa=function(){function t(t){this.serializer=t}return t.prototype.mo=function(t,e){return Ca(t).get(e).next(function(t){if(t)return{id:(e=t).bundleId,createTime:Qu(e.createTime),version:e.version};var e})},t.prototype.Ao=function(t,e){return Ca(t).put({bundleId:(n=e).id,createTime:Wu(to(n.createTime)),version:n.version});var n},t.prototype.Ro=function(t,e){return Da(t).get(e).next(function(t){if(t)return{name:(e=t).name,query:Zu(e.bundledQuery),readTime:Qu(e.readTime)};var e})},t.prototype.Po=function(t,e){return Da(t).put(function(t){return{name:t.name,readTime:Wu(to(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function Ca(t){return Ga.qn(t,Na.store)}function Da(t){return Ga.qn(t,ka.store)}var Ra=function(){function t(){this.Vo=new fa}return t.prototype.Kr=function(t,e){var n=this;if(!this.Vo.has(e)){var r=e.C(),i=e.S();t.Di(function(){n.Vo.add(e)});var o={collectionId:r,parent:Vu(i)};return La(t).put(o)}return Ws.resolve()},t.prototype.ji=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Or(e),""],!1,!0);return La(t).Xn(r).next(function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(qu(o.parent))}return n})},t}();function La(t){return Ga.qn(t,ja.store)}var Ma=function(){function t(t){this.yo=t}return t.prototype.next=function(){return this.yo+=2,this.yo},t.po=function(){return new t(0)},t.vo=function(){return new t(-1)},t}(),Va=function(){function t(t,e){this.Lr=t,this.serializer=e}return t.prototype.bo=function(t){var e=this;return this.So(t).next(function(n){var r=new Ma(n.highestTargetId);return n.highestTargetId=r.next(),e.Do(t,n).next(function(){return n.highestTargetId})})},t.prototype.Co=function(t){return this.So(t).next(function(t){return Sr.m(new kr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.No=function(t){return this.So(t).next(function(t){return t.highestListenSequenceNumber})},t.prototype.xo=function(t,e,n){var r=this;return this.So(t).next(function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.P()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Do(t,i)})},t.prototype.Fo=function(t,e){var n=this;return this.Oo(t,e).next(function(){return n.So(t).next(function(r){return r.targetCount+=1,n.Mo(e,r),n.Do(t,r)})})},t.prototype.ko=function(t,e){return this.Oo(t,e)},t.prototype.$o=function(t,e){var n=this;return this.Lo(t,e.targetId).next(function(){return Fa(t).delete(e.targetId)}).next(function(){return n.So(t)}).next(function(e){return br(e.targetCount>0),e.targetCount-=1,n.Do(t,e)})},t.prototype.Nr=function(t,e,n){var r=this,i=0,o=[];return Fa(t).ns(function(s,u){var a=Xu(u);a.sequenceNumber<=e&&null===n.get(a.targetId)&&(i++,o.push(r.$o(t,a)))}).next(function(){return Ws.xn(o)}).next(function(){return i})},t.prototype.De=function(t,e){return Fa(t).ns(function(t,n){var r=Xu(n);e(r)})},t.prototype.So=function(t){return Ua(t).get(Ta.key).next(function(t){return br(null!==t),t})},t.prototype.Do=function(t,e){return Ua(t).put(Ta.key,e)},t.prototype.Oo=function(t,e){return Fa(t).put(Ju(this.serializer,e))},t.prototype.Mo=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.Bo=function(t){return this.So(t).next(function(t){return t.targetCount})},t.prototype.qo=function(t,e){var n=Br(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Fa(t).ns({range:r,index:Oa.queryTargetsIndexName},function(t,n,r){var o=Xu(n);zr(e,o.target)&&(i=o,r.done())}).next(function(){return i})},t.prototype.Uo=function(t,e,n){var r=this,i=[],o=qa(t);return e.forEach(function(e){var s=Vu(e.path);i.push(o.put(new Ia(n,s))),i.push(r.Lr.Qo(t,n,e))}),Ws.xn(i)},t.prototype.Ko=function(t,e,n){var r=this,i=qa(t);return Ws.forEach(e,function(e){var o=Vu(e.path);return Ws.xn([i.delete([n,o]),r.Lr.Wo(t,n,e)])})},t.prototype.Lo=function(t,e){var n=qa(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.jo=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=qa(t),i=hi();return r.ns({range:n,es:!0},function(t,e,n){var r=qu(t[1]),o=new Lr(r);i=i.add(o)}).next(function(){return i})},t.prototype.so=function(t,e){var n=Vu(e.path),r=IDBKeyRange.bound([n],[Or(n)],!1,!0),i=0;return qa(t).ns({index:Ia.documentTargetsIndex,es:!0,range:r},function(t,e,n){0!==t[0]&&(i++,n.done())}).next(function(){return i>0})},t.prototype.qe=function(t,e){return Fa(t).get(e).next(function(t){return t?Xu(t):null})},t}();function Fa(t){return Ga.qn(t,Oa.store)}function Ua(t){return Ga.qn(t,Ta.store)}function qa(t){return Ga.qn(t,Ia.store)}var Ba="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",za=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Xr=e,r.Go=n,r}return Object(r.c)(e,t),e}(Au),Ga=function(){function t(e,n,r,i,o,s,u,a,c,h){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.ln=o,this.window=s,this.document=u,this.zo=c,this.Ho=h,this.Jo=null,this.Yo=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Xo=null,this.inForeground=!1,this.Zo=null,this.ta=null,this.ea=Number.NEGATIVE_INFINITY,this.na=function(t){return Promise.resolve()},!t.kn())throw new Nr(Ar.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.Lr=new Wa(this,i),this.sa=n+"main",this.serializer=new Bu(a),this.ia=new Qs(this.sa,11,new pa(this.serializer)),this.ra=new Va(this.Lr,this.serializer),this.Fi=new Ra,this.Ni=function(t,e){return new oa(t,e)}(this.serializer,this.Fi),this.oa=new Pa(this.serializer),this.window&&this.window.localStorage?this.aa=this.window.localStorage:(this.aa=null,!1===h&&pr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.qn=function(t,e){if(t instanceof za)return Qs.qn(t.Xr,e);throw yr()},t.prototype.start=function(){var t=this;return this.ca().then(function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new Nr(Ar.FAILED_PRECONDITION,Ba);return t.ua(),t.ha(),t.la(),t.runTransaction("getHighestListenSequenceNumber","readonly",function(e){return t.ra.No(e)})}).then(function(e){t.Jo=new Su(e,t.zo)}).then(function(){t.Yo=!0}).catch(function(e){return t.ia&&t.ia.close(),Promise.reject(e)})},t.prototype._a=function(t){var e=this;return this.na=function(n){return Object(r.b)(e,void 0,void 0,function(){return Object(r.d)(this,function(e){return this.yr?[2,t(n)]:[2]})})},t(this.isPrimary)},t.prototype.fa=function(t){var e=this;this.ia.Kn(function(n){return Object(r.b)(e,void 0,void 0,function(){return Object(r.d)(this,function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})})},t.prototype.da=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.ln.fs(function(){return Object(r.b)(e,void 0,void 0,function(){return Object(r.d)(this,function(t){switch(t.label){case 0:return this.yr?[4,this.ca()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},t.prototype.ca=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return Ha(e).put(new Aa(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.wa(e).next(function(e){e||(t.isPrimary=!1,t.ln.Ss(function(){return t.na(!1)}))})}).next(function(){return t.Ta(e)}).next(function(n){return t.isPrimary&&!n?t.Ea(e).next(function(){return!1}):!!n&&t.Ia(e).next(function(){return!0})})}).catch(function(e){if(Js(e))return fr("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return fr("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(function(e){t.isPrimary!==e&&t.ln.Ss(function(){return t.na(e)}),t.isPrimary=e})},t.prototype.wa=function(t){var e=this;return Ka(t).get(va.key).next(function(t){return Ws.resolve(e.ma(t))})},t.prototype.Aa=function(t){return Ha(t).delete(this.clientId)},t.prototype.Ra=function(){return Object(r.b)(this,void 0,void 0,function(){var e,n,i,o=this;return Object(r.d)(this,function(r){switch(r.label){case 0:return!this.isPrimary||this.Pa(this.ea,18e5)?[3,2]:(this.ea=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(e){var n=t.qn(e,Aa.store);return n.Xn().next(function(t){var e=o.ga(t,18e5),r=t.filter(function(t){return-1===e.indexOf(t)});return Ws.forEach(r,function(t){return n.delete(t.clientId)}).next(function(){return r})})}).catch(function(){return[]})]);case 1:if(e=r.sent(),this.aa)for(n=0,i=e;n<i.length;n++)this.aa.removeItem(this.Va(i[n].clientId));r.label=2;case 2:return[2]}})})},t.prototype.la=function(){var t=this;this.ta=this.ln.Pn("client_metadata_refresh",4e3,function(){return t.ca().then(function(){return t.Ra()}).then(function(){return t.la()})})},t.prototype.ma=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ta=function(t){var e=this;return this.Ho?Ws.resolve(!0):Ka(t).get(va.key).next(function(n){if(null!==n&&e.Pa(n.leaseTimestampMs,5e3)&&!e.ya(n.ownerId)){if(e.ma(n)&&e.networkEnabled)return!0;if(!e.ma(n)){if(!n.allowTabSynchronization)throw new Nr(Ar.FAILED_PRECONDITION,Ba);return!1}}return!(!e.networkEnabled||!e.inForeground)||Ha(t).Xn().next(function(t){return void 0===e.ga(t,5e3).find(function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))})})}).next(function(t){return e.isPrimary!==t&&fr("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},t.prototype.pa=function(){return Object(r.b)(this,void 0,void 0,function(){var t=this;return Object(r.d)(this,function(e){switch(e.label){case 0:return this.Yo=!1,this.va(),this.ta&&(this.ta.cancel(),this.ta=null),this.ba(),this.Sa(),[4,this.ia.runTransaction("shutdown","readwrite",[va.store,Aa.store],function(e){var n=new za(e,Su.nr);return t.Ea(n).next(function(){return t.Aa(n)})})];case 1:return e.sent(),this.ia.close(),this.Da(),[2]}})})},t.prototype.ga=function(t,e){var n=this;return t.filter(function(t){return n.Pa(t.updateTimeMs,e)&&!n.ya(t.clientId)})},t.prototype.Ca=function(){var t=this;return this.runTransaction("getActiveClients","readonly",function(e){return Ha(e).Xn().next(function(e){return t.ga(e,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(t.prototype,"yr",{get:function(){return this.Yo},enumerable:!1,configurable:!0}),t.prototype.Na=function(t){return $u.qr(t,this.serializer,this.Fi,this.Lr)},t.prototype.xa=function(){return this.ra},t.prototype.Fa=function(){return this.Ni},t.prototype.Oa=function(){return this.Fi},t.prototype.Ma=function(){return this.oa},t.prototype.runTransaction=function(t,e,n){var r,i=this;return fr("IndexedDbPersistence","Starting transaction:",t),this.ia.runTransaction(t,"readonly"===e?"readonly":"readwrite",Sa,function(o){return r=new za(o,i.Jo?i.Jo.next():Su.nr),"readwrite-primary"===e?i.wa(r).next(function(t){return!!t||i.Ta(r)}).next(function(e){if(!e)throw pr("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.ln.Ss(function(){return i.na(!1)}),new Nr(Ar.FAILED_PRECONDITION,xu);return n(r)}).next(function(t){return i.Ia(r).next(function(){return t})}):i.ka(r).next(function(){return n(r)})}).then(function(t){return r.Ci(),t})},t.prototype.ka=function(t){var e=this;return Ka(t).get(va.key).next(function(t){if(null!==t&&e.Pa(t.leaseTimestampMs,5e3)&&!e.ya(t.ownerId)&&!e.ma(t)&&!(e.Ho||e.allowTabSynchronization&&t.allowTabSynchronization))throw new Nr(Ar.FAILED_PRECONDITION,Ba)})},t.prototype.Ia=function(t){var e=new va(this.clientId,this.allowTabSynchronization,Date.now());return Ka(t).put(va.key,e)},t.kn=function(){return Qs.kn()},t.prototype.Ea=function(t){var e=this,n=Ka(t);return n.get(va.key).next(function(t){return e.ma(t)?(fr("IndexedDbPersistence","Releasing primary lease."),n.delete(va.key)):Ws.resolve()})},t.prototype.Pa=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(pr("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.ua=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Zo=function(){t.ln.fs(function(){return t.inForeground="visible"===t.document.visibilityState,t.ca()})},this.document.addEventListener("visibilitychange",this.Zo),this.inForeground="visible"===this.document.visibilityState)},t.prototype.ba=function(){this.Zo&&(this.document.removeEventListener("visibilitychange",this.Zo),this.Zo=null)},t.prototype.ha=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Xo=function(){e.va(),e.ln.fs(function(){return e.pa()})},this.window.addEventListener("unload",this.Xo))},t.prototype.Sa=function(){this.Xo&&(this.window.removeEventListener("unload",this.Xo),this.Xo=null)},t.prototype.ya=function(t){var e;try{var n=null!==(null===(e=this.aa)||void 0===e?void 0:e.getItem(this.Va(t)));return fr("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return pr("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.va=function(){if(this.aa)try{this.aa.setItem(this.Va(this.clientId),String(Date.now()))}catch(t){pr("Failed to set zombie client id.",t)}},t.prototype.Da=function(){if(this.aa)try{this.aa.removeItem(this.Va(this.clientId))}catch(t){}},t.prototype.Va=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function Ka(t){return Ga.qn(t,va.store)}function Ha(t){return Ga.qn(t,Aa.store)}var Wa=function(){function t(t,e){this.db=t,this.Rr=new Mu(this,e)}return t.prototype.Sr=function(t){var e=this.$a(t);return this.db.xa().Bo(t).next(function(t){return e.next(function(e){return t+e})})},t.prototype.$a=function(t){var e=0;return this.Cr(t,function(t){e++}).next(function(){return e})},t.prototype.De=function(t,e){return this.db.xa().De(t,e)},t.prototype.Cr=function(t,e){return this.La(t,function(t,n){return e(n)})},t.prototype.Qo=function(t,e,n){return Qa(t,n)},t.prototype.Wo=function(t,e,n){return Qa(t,n)},t.prototype.Nr=function(t,e,n){return this.db.xa().Nr(t,e,n)},t.prototype.eo=function(t,e){return Qa(t,e)},t.prototype.Ba=function(t,e){return function(t,e){var n=!1;return ia(t).ss(function(r){return ta(t,r,e).next(function(t){return t&&(n=!0),Ws.resolve(!t)})}).next(function(){return n})}(t,e)},t.prototype.Fr=function(t,e){var n=this,r=this.db.Fa()._o(),i=[],o=0;return this.La(t,function(s,u){if(u<=e){var a=n.Ba(t,s).next(function(e){if(!e)return o++,r.yi(t,s).next(function(){return r.Vi(s),qa(t).delete([0,Vu(s.path)])})});i.push(a)}}).next(function(){return Ws.xn(i)}).next(function(){return r.apply(t)}).next(function(){return o})},t.prototype.removeTarget=function(t,e){var n=e.nt(t.Go);return this.db.xa().ko(t,n)},t.prototype.qa=function(t,e){return Qa(t,e)},t.prototype.La=function(t,e){var n,r=qa(t),i=Su.nr;return r.ns({index:Ia.documentTargetsIndex},function(t,r){var o=r.path,s=r.sequenceNumber;0===t[0]?(i!==Su.nr&&e(new Lr(qu(n)),i),i=s,n=o):i=Su.nr}).next(function(){i!==Su.nr&&e(new Lr(qu(n)),i)})},t.prototype.Mr=function(t){return this.db.Fa().wo(t)},t}();function Qa(t,e){return qa(t).put(function(t,e){return new Ia(0,Vu(t.path),e)}(e,t.Go))}function Ya(t,e){var n=t.projectId;return t.o||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var Xa=function(){function t(t,e,n,r){this.persistence=t,this.Ua=e,this.serializer=r,this.Qa=new Zr(_r),this.Ka=new xr(function(t){return Br(t)},zr),this.Wa=Sr.min(),this.xi=t.Na(n),this.ja=t.Fa(),this.ra=t.xa(),this.Ga=new Nu(this.ja,this.xi,this.persistence.Oa()),this.oa=t.Ma(),this.Ua.za(this.Ga)}return t.prototype.pr=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return t.Or(n,e.Qa)})},t}();function Ja(t,e,n,r){return new Xa(t,e,n,r)}function Za(t,e){return Object(r.b)(this,void 0,void 0,function(){var n,i,o,s;return Object(r.d)(this,function(r){switch(r.label){case 0:return n=mr(t),i=n.xi,o=n.Ga,[4,n.persistence.runTransaction("Handle user change","readonly",function(t){var r;return n.xi.Hr(t).next(function(s){return r=s,i=n.persistence.Na(e),o=new Nu(n.ja,i,n.persistence.Oa()),i.Hr(t)}).next(function(e){for(var n=[],i=[],s=hi(),u=0,a=r;u<a.length;u++){var c=a[u];n.push(c.batchId);for(var h=0,l=c.mutations;h<l.length;h++)s=s.add(l[h].key)}for(var f=0,p=e;f<p.length;f++){var d=p[f];i.push(d.batchId);for(var v=0,y=d.mutations;v<y.length;v++)s=s.add(y[v].key)}return o.Li(t,s).next(function(t){return{Ha:t,Ja:n,Ya:i}})})})];case 1:return s=r.sent(),[2,(n.xi=i,n.Ga=o,n.Ua.za(n.Ga),s)]}})})}function $a(t,e){var n=mr(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var r=e.batch.keys(),i=n.ja._o({fo:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=Ws.resolve();return o.forEach(function(t){s=s.next(function(){return r.yi(e,t)}).next(function(e){var o=e,s=n.Ei.get(t);br(null!==s),(!o||o.version.A(s)<0)&&(o=i._i(t,o,n))&&r.Ri(o,n.Ti)})}),s.next(function(){return t.xi.Yr(e,i)})}(n,t,e,i).next(function(){return i.apply(t)}).next(function(){return n.xi.no(t)}).next(function(){return n.Ga.Li(t,r)})})}function tc(t){var e=mr(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.ra.Co(t)})}function ec(t,e){var n=mr(t),r=e.et,i=n.Qa;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(t){var o=n.ja._o({fo:!0});i=n.Qa;var s=[];e.Gt.forEach(function(e,o){var u=i.get(o);if(u){s.push(n.ra.Ko(t,e.ne,o).next(function(){return n.ra.Uo(t,e.te,o)}));var a=e.resumeToken;if(a.X()>0){var c=u.st(a,r).nt(t.Go);i=i.rt(o,c),function(t,e,n){return br(e.resumeToken.X()>0),0===t.resumeToken.X()||e.et.R()-t.et.R()>=3e8||n.te.size+n.ee.size+n.ne.size>0}(u,c,e)&&s.push(n.ra.ko(t,c))}}});var u=ii();if(e.Ht.forEach(function(r,i){e.Jt.has(r)&&s.push(n.persistence.Lr.qa(t,r))}),s.push(function(t,e,n,r,i){var o=hi();return n.forEach(function(t){return o=o.add(t)}),e.getEntries(t,o).next(function(t){var i=ii();return n.forEach(function(n,o){var s=t.get(n),u=r;o instanceof cs&&o.version.isEqual(Sr.min())?(e.Vi(n,u),i=i.rt(n,o)):null==s||o.version.A(s.version)>0||0===o.version.A(s.version)&&s.hasPendingWrites?(e.Ri(o,u),i=i.rt(n,o)):fr("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",o.version)}),i})}(t,o,e.Ht,r).next(function(t){u=t})),!r.isEqual(Sr.min())){var a=n.ra.Co(t).next(function(e){return n.ra.xo(t,t.Go,r)});s.push(a)}return Ws.xn(s).next(function(){return o.apply(t)}).next(function(){return n.Ga.Bi(t,u)})}).then(function(t){return n.Qa=i,t})}function nc(t,e){var n=mr(t);return n.persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===e&&(e=-1),n.xi.Gr(t,e)})}function rc(t,e){var n=mr(t);return n.persistence.runTransaction("Allocate target","readwrite",function(t){var r;return n.ra.qo(t,e).next(function(i){return i?Ws.resolve(r=i):n.ra.bo(t).next(function(i){return r=new Qr(e,i,0,t.Go),n.ra.Fo(t,r).next(function(){return r})})})}).then(function(t){var r=n.Qa.get(t.targetId);return(null===r||t.et.A(r.et)>0)&&(n.Qa=n.Qa.rt(t.targetId,t),n.Ka.set(e,t.targetId)),t})}function ic(t,e,n){return Object(r.b)(this,void 0,void 0,function(){var i,o,s,u;return Object(r.d)(this,function(r){switch(r.label){case 0:i=mr(t),o=i.Qa.get(e),s=n?"readwrite":"readwrite-primary",r.label=1;case 1:return r.trys.push([1,4,,5]),n?[3,3]:[4,i.persistence.runTransaction("Release target",s,function(t){return i.persistence.Lr.removeTarget(t,o)})];case 2:r.sent(),r.label=3;case 3:return[3,5];case 4:if(!Js(u=r.sent()))throw u;return fr("LocalStore","Failed to update sequence numbers for target "+e+": "+u),[3,5];case 5:return i.Qa=i.Qa.remove(e),i.Ka.delete(o.target),[2]}})})}function oc(t,e,n){var r=mr(t),i=Sr.min(),o=hi();return r.persistence.runTransaction("Execute query","readonly",function(t){return function(t,e,n){var r=mr(t),i=r.Ka.get(n);return void 0!==i?Ws.resolve(r.Qa.get(i)):r.ra.qo(e,n)}(r,t,ws(e)).next(function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.ra.jo(t,e.targetId).next(function(t){o=t})}).next(function(){return r.Ua.Ui(t,e,n?i:Sr.min(),n?o:hi())}).next(function(t){return{documents:t,Xa:o}})})}function sc(t,e){var n=mr(t),r=mr(n.ra),i=n.Qa.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(t){return r.qe(t,e).next(function(t){return t?t.target:null})})}function uc(t){var e=mr(t);return e.persistence.runTransaction("Get new document changes","readonly",function(t){return function(t,e,n){var r=mr(t),i=ii(),o=Ku(n),s=aa(e),u=IDBKeyRange.lowerBound(o,!0);return s.ns({index:_a.readTimeIndex,range:u},function(t,e){var n=zu(r.serializer,e);i=i.rt(n.key,n),o=e.readTime}).next(function(){return{Za:i,readTime:Hu(o)}})}(e.ja,t,e.Wa)}).then(function(t){var n=t.Za;return e.Wa=t.readTime,n})}function ac(t){return Object(r.b)(this,void 0,void 0,function(){var e;return Object(r.d)(this,function(n){return[2,(e=mr(t)).persistence.runTransaction("Synchronize last document change read time","readonly",function(t){return function(t){var e=aa(t),n=Sr.min();return e.ns({index:_a.readTimeIndex,reverse:!0},function(t,e,r){e.readTime&&(n=Hu(e.readTime)),r.done()}).next(function(){return n})}(t)}).then(function(t){e.Wa=t})]})})}function cc(t){return Object(r.b)(this,void 0,void 0,function(){return Object(r.d)(this,function(e){if(t.code!==Ar.FAILED_PRECONDITION||t.message!==xu)throw t;return fr("LocalStore","Unexpectedly lost primary lease"),[2]})})}var hc=function(){function t(t,e,n,r,i,o){this.ln=t,this.tc=n,this.ec=r,this.nc=i,this.listener=o,this.state=0,this.sc=0,this.ic=null,this.stream=null,this.Ps=new Hs(t,e)}return t.prototype.rc=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.oc=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.ac()},t.prototype.stop=function(){return Object(r.b)(this,void 0,void 0,function(){return Object(r.d)(this,function(t){switch(t.label){case 0:return this.rc()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.cc=function(){this.state=0,this.Ps.reset()},t.prototype.uc=function(){var t=this;this.oc()&&null===this.ic&&(this.ic=this.ln.Pn(this.tc,6e4,function(){return t.hc()}))},t.prototype.lc=function(t){this._c(),this.stream.send(t)},t.prototype.hc=function(){return Object(r.b)(this,void 0,void 0,function(){return Object(r.d)(this,function(t){return this.oc()?[2,this.close(0)]:[2]})})},t.prototype._c=function(){this.ic&&(this.ic.cancel(),this.ic=null)},t.prototype.close=function(t,e){return Object(r.b)(this,void 0,void 0,function(){return Object(r.d)(this,function(n){switch(n.label){case 0:return this._c(),this.Ps.cancel(),this.sc++,3!==t?this.Ps.reset():e&&e.code===Ar.RESOURCE_EXHAUSTED?(pr(e.toString()),pr("Using maximum backoff delay to prevent overloading the backend."),this.Ps.mn()):e&&e.code===Ar.UNAUTHENTICATED&&this.nc.ni(),null!==this.stream&&(this.fc(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.dc(e)];case 1:return n.sent(),[2]}})})},t.prototype.fc=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.wc(this.sc),n=this.sc;this.nc.getToken().then(function(e){t.sc===n&&t.Tc(e)},function(n){e(function(){var e=new Nr(Ar.UNKNOWN,"Fetching auth token failed: "+n.message);return t.Ec(e)})})},t.prototype.Tc=function(t){var e=this,n=this.wc(this.sc);this.stream=this.Ic(t),this.stream.mc(function(){n(function(){return e.state=2,e.listener.mc()})}),this.stream.dc(function(t){n(function(){return e.Ec(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},t.prototype.ac=function(){var t=this;this.state=4,this.Ps.An(function(){return Object(r.b)(t,void 0,void 0,function(){return Object(r.d)(this,function(t){return this.state=0,this.start(),[2]})})})},t.prototype.Ec=function(t){return fr("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.wc=function(t){var e=this;return function(n){e.ln.fs(function(){return e.sc===t?n():(fr("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},t}(),lc=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).serializer=i,s}return Object(r.c)(e,t),e.prototype.Ic=function(t){return this.ec.Ac("Listen",t)},e.prototype.onMessage=function(t){this.Ps.reset();var e=function(t,e){var n;if("targetChange"in e){var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:yr()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.Ue?(br(void 0===e||"string"==typeof e),Kr.fromBase64String(e||"")):(br(void 0===e||e instanceof Uint8Array),Kr.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,u=s&&function(t){var e=void 0===t.code?Ar.UNKNOWN:Jr(t.code);return new Nr(e,t.message||"")}(s);n=new wi(r,i,o,u||null)}else if("documentChange"in e){var a=e.documentChange,c=io(t,a.document.name),h=to(a.document.updateTime),l=new is({mapValue:{fields:a.document.fields}}),f=new as(c,h,l,{});n=new mi(a.targetIds||[],a.removedTargetIds||[],f.key,f)}else if("documentDelete"in e){var p=e.documentDelete,d=io(t,p.document),v=p.readTime?to(p.readTime):Sr.min(),y=new cs(d,v);n=new mi([],p.removedTargetIds||[],y.key,y)}else if("documentRemove"in e){var b=e.documentRemove,m=io(t,b.document);n=new mi([],b.removedTargetIds||[],m,null)}else{if(!("filter"in e))return yr();var g=e.filter,w=new Yr(g.count||0);n=new gi(g.targetId,w)}return n}(this.serializer,t),n=function(t){if(!("targetChange"in t))return Sr.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?Sr.min():e.readTime?to(e.readTime):Sr.min()}(t);return this.listener.Rc(e,n)},e.prototype.Pc=function(t){var e={};e.database=uo(this.serializer),e.addTarget=function(t,e){var n,r=e.target;return(n=Gr(r)?{documents:fo(t,r)}:{query:po(t,r)}).targetId=e.targetId,e.resumeToken.X()>0?n.resumeToken=Zi(t,e.resumeToken):e.et.A(Sr.min())>0&&(n.readTime=Ji(t,e.et.P())),n}(this.serializer,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return yr()}}(0,e.tt);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.lc(e)},e.prototype.gc=function(t){var e={};e.database=uo(this.serializer),e.removeTarget=t,this.lc(e)},e}(hc),fc=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).serializer=i,s.Vc=!1,s}return Object(r.c)(e,t),Object.defineProperty(e.prototype,"yc",{get:function(){return this.Vc},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.Vc=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.fc=function(){this.Vc&&this.vc([])},e.prototype.Ic=function(t){return this.ec.Ac("Write",t)},e.prototype.onMessage=function(t){if(br(!!t.streamToken),this.lastStreamToken=t.streamToken,this.Vc){this.Ps.reset();var e=function(t,e){return t&&t.length>0?(br(void 0!==e),t.map(function(t){return function(t,e){var n=to(t.updateTime?t.updateTime:e);n.isEqual(Sr.min())&&(n=to(e));var r=null;return t.transformResults&&t.transformResults.length>0&&(r=t.transformResults),new qo(n,r)}(t,e)})):[]}(t.writeResults,t.commitTime),n=to(t.commitTime);return this.listener.bc(n,e)}return br(!t.writeResults||0===t.writeResults.length),this.Vc=!0,this.listener.Sc()},e.prototype.Dc=function(){var t={};t.database=uo(this.serializer),this.lc(t)},e.prototype.vc=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map(function(t){return ho(e.serializer,t)})};this.lc(n)},e}(hc),pc=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.ec=n,i.serializer=r,i.Cc=!1,i}return Object(r.c)(e,t),e.prototype.Nc=function(){if(this.Cc)throw new Nr(Ar.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.xc=function(t,e,n){var r=this;return this.Nc(),this.credentials.getToken().then(function(i){return r.ec.xc(t,e,n,i)}).catch(function(t){throw t.code===Ar.UNAUTHENTICATED&&r.credentials.ni(),t})},e.prototype.Fc=function(t,e,n){var r=this;return this.Nc(),this.credentials.getToken().then(function(i){return r.ec.Fc(t,e,n,i)}).catch(function(t){throw t.code===Ar.UNAUTHENTICATED&&r.credentials.ni(),t})},e.prototype.terminate=function(){this.Cc=!1},e}(function(){}),dc=function(){function t(t,e){this.rs=t,this.Oc=e,this.state="Unknown",this.Mc=0,this.kc=null,this.$c=!0}return t.prototype.Lc=function(){var t=this;0===this.Mc&&(this.Bc("Unknown"),this.kc=this.rs.Pn("online_state_timeout",1e4,function(){return t.kc=null,t.qc("Backend didn't respond within 10 seconds."),t.Bc("Offline"),Promise.resolve()}))},t.prototype.Uc=function(t){"Online"===this.state?this.Bc("Unknown"):(this.Mc++,this.Mc>=1&&(this.Qc(),this.qc("Connection failed 1 times. Most recent error: "+t.toString()),this.Bc("Offline")))},t.prototype.set=function(t){this.Qc(),this.Mc=0,"Online"===t&&(this.$c=!1),this.Bc(t)},t.prototype.Bc=function(t){t!==this.state&&(this.state=t,this.Oc(t))},t.prototype.qc=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.$c?(pr(e),this.$c=!1):fr("OnlineStateTracker",e)},t.prototype.Qc=function(){null!==this.kc&&(this.kc.cancel(),this.kc=null)},t}(),vc=function(t,e,n,i,o){var s=this;this.Kc=t,this.Wc=e,this.rs=n,this.jc={},this.Gc=[],this.zc=new Map,this.Hc=new Set,this.Jc=[],this.Yc=o,this.Yc.Xc(function(t){n.fs(function(){return Object(r.b)(s,void 0,void 0,function(){return Object(r.d)(this,function(t){switch(t.label){case 0:return Ic(this)?(fr("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return Object(r.b)(this,void 0,void 0,function(){var e;return Object(r.d)(this,function(n){switch(n.label){case 0:return(e=mr(t)).Hc.add(4),[4,bc(e)];case 1:return n.sent(),e.Zc.set("Unknown"),e.Hc.delete(4),[4,yc(e)];case 2:return n.sent(),[2]}})})}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.Zc=new dc(n,i)};function yc(t){return Object(r.b)(this,void 0,void 0,function(){var e,n;return Object(r.d)(this,function(r){switch(r.label){case 0:if(!Ic(t))return[3,4];e=0,n=t.Jc,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function bc(t){return Object(r.b)(this,void 0,void 0,function(){var e,n;return Object(r.d)(this,function(r){switch(r.label){case 0:e=0,n=t.Jc,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function mc(t,e){var n=mr(t);n.zc.has(e.targetId)||(n.zc.set(e.targetId,e),Oc(n)?Ec(n):Fc(n).oc()&&wc(n,e))}function gc(t,e){var n=mr(t),r=Fc(n);n.zc.delete(e),r.oc()&&_c(n,e),0===n.zc.size&&(r.oc()?r.uc():Ic(n)&&n.Zc.set("Unknown"))}function wc(t,e){t.tu.Ie(e.targetId),Fc(t).Pc(e)}function _c(t,e){t.tu.Ie(e),Fc(t).gc(e)}function Ec(t){t.tu=new Ei({Be:function(e){return t.jc.Be(e)},qe:function(e){return t.zc.get(e)||null}}),Fc(t).start(),t.Zc.Lc()}function Oc(t){return Ic(t)&&!Fc(t).rc()&&t.zc.size>0}function Ic(t){return 0===mr(t).Hc.size}function Tc(t){t.tu=void 0}function jc(t){return Object(r.b)(this,void 0,void 0,function(){return Object(r.d)(this,function(e){return t.zc.forEach(function(e,n){wc(t,e)}),[2]})})}function xc(t,e){return Object(r.b)(this,void 0,void 0,function(){return Object(r.d)(this,function(n){return Tc(t),Oc(t)?(t.Zc.Uc(e),Ec(t)):t.Zc.set("Unknown"),[2]})})}function Ac(t,e,n){return Object(r.b)(this,void 0,void 0,function(){var i,o,s;return Object(r.d)(this,function(u){switch(u.label){case 0:if(t.Zc.set("Online"),!(e instanceof wi&&2===e.state&&e.cause))return[3,6];u.label=1;case 1:return u.trys.push([1,3,,5]),[4,function(t,e){return Object(r.b)(this,void 0,void 0,function(){var n,i,o,s;return Object(r.d)(this,function(r){switch(r.label){case 0:n=e.cause,i=0,o=e.targetIds,r.label=1;case 1:return i<o.length?t.zc.has(s=o[i])?[4,t.jc.eu(s,n)]:[3,3]:[3,5];case 2:r.sent(),t.zc.delete(s),t.tu.removeTarget(s),r.label=3;case 3:r.label=4;case 4:return i++,[3,1];case 5:return[2]}})})}(t,e)];case 2:return u.sent(),[3,5];case 3:return i=u.sent(),fr("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),[4,Nc(t,i)];case 4:return u.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof mi?t.tu.pe(e):e instanceof gi?t.tu.Fe(e):t.tu.Se(e),n.isEqual(Sr.min()))return[3,13];u.label=7;case 7:return u.trys.push([7,11,,13]),[4,tc(t.Kc)];case 8:return o=u.sent(),n.A(o)>=0?[4,function(t,e){var n=t.tu.ke(e);return n.Gt.forEach(function(n,r){if(n.resumeToken.X()>0){var i=t.zc.get(r);i&&t.zc.set(r,i.st(n.resumeToken,e))}}),n.zt.forEach(function(e){var n=t.zc.get(e);if(n){t.zc.set(e,n.st(Kr.Z,n.et)),_c(t,e);var r=new Qr(n.target,e,1,n.sequenceNumber);wc(t,r)}}),t.jc.nu(n)}(t,n)]:[3,10];case 9:u.sent(),u.label=10;case 10:return[3,13];case 11:return fr("RemoteStore","Failed to raise snapshot:",s=u.sent()),[4,Nc(t,s)];case 12:return u.sent(),[3,13];case 13:return[2]}})})}function Nc(t,e,n){return Object(r.b)(this,void 0,void 0,function(){var i=this;return Object(r.d)(this,function(o){switch(o.label){case 0:if(!Js(e))throw e;return t.Hc.add(1),[4,bc(t)];case 1:return o.sent(),t.Zc.set("Offline"),n||(n=function(){return tc(t.Kc)}),t.rs.Ss(function(){return Object(r.b)(i,void 0,void 0,function(){return Object(r.d)(this,function(e){switch(e.label){case 0:return fr("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Hc.delete(1),[4,yc(t)];case 2:return e.sent(),[2]}})})}),[2]}})})}function kc(t,e){return e().catch(function(n){return Nc(t,n,e)})}function Sc(t){return Object(r.b)(this,void 0,void 0,function(){var e,n,i,o,s;return Object(r.d)(this,function(r){switch(r.label){case 0:e=mr(t),n=Uc(e),i=e.Gc.length>0?e.Gc[e.Gc.length-1].batchId:-1,r.label=1;case 1:if(!function(t){return Ic(t)&&t.Gc.length<10}(e))return[3,7];r.label=2;case 2:return r.trys.push([2,4,,6]),[4,nc(e.Kc,i)];case 3:return null===(o=r.sent())?(0===e.Gc.length&&n.uc(),[3,7]):(i=o.batchId,function(t,e){t.Gc.push(e);var n=Uc(t);n.oc()&&n.yc&&n.vc(e.mutations)}(e,o),[3,6]);case 4:return s=r.sent(),[4,Nc(e,s)];case 5:return r.sent(),[3,6];case 6:return[3,1];case 7:return Pc(e)&&Cc(e),[2]}})})}function Pc(t){return Ic(t)&&!Uc(t).rc()&&t.Gc.length>0}function Cc(t){Uc(t).start()}function Dc(t){return Object(r.b)(this,void 0,void 0,function(){return Object(r.d)(this,function(e){return Uc(t).Dc(),[2]})})}function Rc(t){return Object(r.b)(this,void 0,void 0,function(){var e,n,i;return Object(r.d)(this,function(r){for(e=Uc(t),n=0,i=t.Gc;n<i.length;n++)e.vc(i[n].mutations);return[2]})})}function Lc(t,e,n){return Object(r.b)(this,void 0,void 0,function(){var i,o;return Object(r.d)(this,function(r){switch(r.label){case 0:return i=t.Gc.shift(),o=Ou.from(i,e,n),[4,kc(t,function(){return t.jc.su(o)})];case 1:return r.sent(),[4,Sc(t)];case 2:return r.sent(),[2]}})})}function Mc(t,e){return Object(r.b)(this,void 0,void 0,function(){return Object(r.d)(this,function(n){switch(n.label){case 0:return e&&Uc(t).yc?[4,function(t,e){return Object(r.b)(this,void 0,void 0,function(){var n,i;return Object(r.d)(this,function(r){switch(r.label){case 0:return Xr(i=e.code)&&i!==Ar.ABORTED?(n=t.Gc.shift(),Uc(t).cc(),[4,kc(t,function(){return t.jc.iu(n.batchId,e)})]):[3,3];case 1:return r.sent(),[4,Sc(t)];case 2:r.sent(),r.label=3;case 3:return[2]}})})}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return Pc(t)&&Cc(t),[2]}})})}function Vc(t,e){return Object(r.b)(this,void 0,void 0,function(){var n;return Object(r.d)(this,function(r){switch(r.label){case 0:return n=mr(t),e?(n.Hc.delete(2),[4,yc(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Hc.add(2),[4,bc(n)]);case 3:r.sent(),n.Zc.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}})})}function Fc(t){var e=this;return t.ru||(t.ru=function(t,e,n){var r=mr(t);return r.Nc(),new lc(e,r.ec,r.credentials,r.serializer,n)}(t.Wc,t.rs,{mc:jc.bind(null,t),dc:xc.bind(null,t),Rc:Ac.bind(null,t)}),t.Jc.push(function(n){return Object(r.b)(e,void 0,void 0,function(){return Object(r.d)(this,function(e){switch(e.label){case 0:return n?(t.ru.cc(),Oc(t)?Ec(t):t.Zc.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.ru.stop()];case 2:e.sent(),Tc(t),e.label=3;case 3:return[2]}})})})),t.ru}function Uc(t){var e=this;return t.ou||(t.ou=function(t,e,n){var r=mr(t);return r.Nc(),new fc(e,r.ec,r.credentials,r.serializer,n)}(t.Wc,t.rs,{mc:Dc.bind(null,t),dc:Mc.bind(null,t),Sc:Rc.bind(null,t),bc:Lc.bind(null,t)}),t.Jc.push(function(n){return Object(r.b)(e,void 0,void 0,function(){return Object(r.d)(this,function(e){switch(e.label){case 0:return n?(t.ou.cc(),[4,Sc(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.ou.stop()];case 3:e.sent(),t.Gc.length>0&&(fr("RemoteStore","Stopping write stream with "+t.Gc.length+" pending writes"),t.Gc=[]),e.label=4;case 4:return[2]}})})})),t.ou}var qc=function(){function t(){this.au=new ei(Bc.cu),this.uu=new ei(Bc.hu)}return t.prototype.T=function(){return this.au.T()},t.prototype.Qo=function(t,e){var n=new Bc(t,e);this.au=this.au.add(n),this.uu=this.uu.add(n)},t.prototype.lu=function(t,e){var n=this;t.forEach(function(t){return n.Qo(t,e)})},t.prototype.Wo=function(t,e){this._u(new Bc(t,e))},t.prototype.fu=function(t,e){var n=this;t.forEach(function(t){return n.Wo(t,e)})},t.prototype.du=function(t){var e=this,n=new Lr(new Cr([])),r=new Bc(n,t),i=new Bc(n,t+1),o=[];return this.uu.Nt([r,i],function(t){e._u(t),o.push(t.key)}),o},t.prototype.wu=function(){var t=this;this.au.forEach(function(e){return t._u(e)})},t.prototype._u=function(t){this.au=this.au.delete(t),this.uu=this.uu.delete(t)},t.prototype.Tu=function(t){var e=new Lr(new Cr([])),n=new Bc(e,t),r=new Bc(e,t+1),i=hi();return this.uu.Nt([n,r],function(t){i=i.add(t.key)}),i},t.prototype.so=function(t){var e=new Bc(t,0),n=this.au.Ft(e);return null!==n&&t.isEqual(n.key)},t}(),Bc=function(){function t(t,e){this.key=t,this.Eu=e}return t.cu=function(t,e){return Lr.V(t.key,e.key)||_r(t.Eu,e.Eu)},t.hu=function(t,e){return _r(t.Eu,e.Eu)||Lr.V(t.key,e.key)},t}();function zc(t,e){return"firestore_clients_"+t+"_"+e}function Gc(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.Js()&&(r+="_"+e.uid),r}function Kc(t,e){return"firestore_targets_"+t+"_"+e}var Hc=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Iu=function(e,n,r){var i=JSON.parse(r),o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error),s=void 0;return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(s=new Nr(i.error.code,i.error.message)),o?new t(e,n,i.state,s):(pr("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.mu=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Wc=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Iu=function(e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new Nr(r.error.code,r.error.message)),i?new t(e,r.state,o):(pr("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.mu=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Qc=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Iu=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=fi(),s=0;i&&s<r.activeTargetIds.length;++s)i=Fr(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(pr("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),Yc=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Iu=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(pr("SharedClientState","Failed to parse online state: "+e),null)},t}(),Xc=function(){function t(){this.activeTargetIds=fi()}return t.prototype.Au=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Ru=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.mu=function(){var t={activeTargetIds:this.activeTargetIds.O(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Jc=function(){function t(t,e,n,r,i){this.window=t,this.ln=e,this.persistenceKey=n,this.Pu=r,this.gu=null,this.Oc=null,this.Xi=null,this.Vu=this.yu.bind(this),this.pu=new Zr(_r),this.yr=!1,this.vu=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.bu=zc(this.persistenceKey,this.Pu),this.Su=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.pu=this.pu.rt(this.Pu,new Xc),this.Du=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Cu=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.Nu=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.xu=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Fu=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.Vu)}return t.kn=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return Object(r.b)(this,void 0,void 0,function(){var t,e,n,i,o,s,u,a,c,h,l=this;return Object(r.d)(this,function(r){switch(r.label){case 0:return[4,this.gu.Ca()];case 1:for(t=r.sent(),e=0,n=t;e<n.length;e++)(i=n[e])!==this.Pu&&(o=this.getItem(zc(this.persistenceKey,i)))&&(s=Qc.Iu(i,o))&&(this.pu=this.pu.rt(s.clientId,s));for(this.Ou(),(u=this.storage.getItem(this.xu))&&(a=this.Mu(u))&&this.ku(a),c=0,h=this.vu;c<h.length;c++)this.yu(h[c]);return this.vu=[],this.window.addEventListener("unload",function(){return l.pa()}),this.yr=!0,[2]}})})},t.prototype.er=function(t){this.setItem(this.Su,JSON.stringify(t))},t.prototype.$u=function(){return this.Lu(this.pu)},t.prototype.Bu=function(t){var e=!1;return this.pu.forEach(function(n,r){r.activeTargetIds.has(t)&&(e=!0)}),e},t.prototype.qu=function(t){this.Uu(t,"pending")},t.prototype.Qu=function(t,e,n){this.Uu(t,e,n),this.Ku(t)},t.prototype.Wu=function(t){var e="not-current";if(this.Bu(t)){var n=this.storage.getItem(Kc(this.persistenceKey,t));if(n){var r=Wc.Iu(t,n);r&&(e=r.state)}}return this.ju.Au(t),this.Ou(),e},t.prototype.Gu=function(t){this.ju.Ru(t),this.Ou()},t.prototype.zu=function(t){return this.ju.activeTargetIds.has(t)},t.prototype.Hu=function(t){this.removeItem(Kc(this.persistenceKey,t))},t.prototype.Ju=function(t,e,n){this.Yu(t,e,n)},t.prototype.Xu=function(t,e,n){var r=this;e.forEach(function(t){r.Ku(t)}),this.currentUser=t,n.forEach(function(t){r.qu(t)})},t.prototype.Zu=function(t){this.th(t)},t.prototype.eh=function(){this.nh()},t.prototype.pa=function(){this.yr&&(this.window.removeEventListener("storage",this.Vu),this.removeItem(this.bu),this.yr=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return fr("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){fr("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){fr("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.yu=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(fr("SharedClientState","EVENT",n.key,n.newValue),n.key===this.bu)return void pr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ln.Ss(function(){return Object(r.b)(e,void 0,void 0,function(){var t,e,i,o,s,u;return Object(r.d)(this,function(r){if(this.yr){if(null!==n.key)if(this.Du.test(n.key)){if(null==n.newValue)return t=this.sh(n.key),[2,this.ih(t,null)];if(e=this.rh(n.key,n.newValue))return[2,this.ih(e.clientId,e)]}else if(this.Cu.test(n.key)){if(null!==n.newValue&&(i=this.oh(n.key,n.newValue)))return[2,this.ah(i)]}else if(this.Nu.test(n.key)){if(null!==n.newValue&&(o=this.uh(n.key,n.newValue)))return[2,this.hh(o)]}else if(n.key===this.xu){if(null!==n.newValue&&(s=this.Mu(n.newValue)))return[2,this.ku(s)]}else if(n.key===this.Su)(u=function(t){var e=Su.nr;if(null!=t)try{var n=JSON.parse(t);br("number"==typeof n),e=n}catch(t){pr("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==Su.nr&&this.Xi(u);else if(n.key===this.Fu)return[2,this.gu.lh()]}else this.vu.push(n);return[2]})})})}},Object.defineProperty(t.prototype,"ju",{get:function(){return this.pu.get(this.Pu)},enumerable:!1,configurable:!0}),t.prototype.Ou=function(){this.setItem(this.bu,this.ju.mu())},t.prototype.Uu=function(t,e,n){var r=new Hc(this.currentUser,t,e,n),i=Gc(this.persistenceKey,this.currentUser,t);this.setItem(i,r.mu())},t.prototype.Ku=function(t){var e=Gc(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.th=function(t){this.storage.setItem(this.xu,JSON.stringify({clientId:this.Pu,onlineState:t}))},t.prototype.Yu=function(t,e,n){var r=Kc(this.persistenceKey,t),i=new Wc(t,e,n);this.setItem(r,i.mu())},t.prototype.nh=function(){this.setItem(this.Fu,"value-not-used")},t.prototype.sh=function(t){var e=this.Du.exec(t);return e?e[1]:null},t.prototype.rh=function(t,e){var n=this.sh(t);return Qc.Iu(n,e)},t.prototype.oh=function(t,e){var n=this.Cu.exec(t),r=Number(n[1]);return Hc.Iu(new yu(void 0!==n[2]?n[2]:null),r,e)},t.prototype.uh=function(t,e){var n=this.Nu.exec(t),r=Number(n[1]);return Wc.Iu(r,e)},t.prototype.Mu=function(t){return Yc.Iu(t)},t.prototype.ah=function(t){return Object(r.b)(this,void 0,void 0,function(){return Object(r.d)(this,function(e){return t.user.uid===this.currentUser.uid?[2,this.gu._h(t.batchId,t.state,t.error)]:(fr("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])})})},t.prototype.hh=function(t){return this.gu.fh(t.targetId,t.state,t.error)},t.prototype.ih=function(t,e){var n=this,r=e?this.pu.rt(t,e):this.pu.remove(t),i=this.Lu(this.pu),o=this.Lu(r),s=[],u=[];return o.forEach(function(t){i.has(t)||s.push(t)}),i.forEach(function(t){o.has(t)||u.push(t)}),this.gu.dh(s,u).then(function(){n.pu=r})},t.prototype.ku=function(t){this.pu.get(t.clientId)&&this.Oc(t.onlineState)},t.prototype.Lu=function(t){var e=fi();return t.forEach(function(t,n){e=e.Ot(n.activeTargetIds)}),e},t}(),Zc=function(){function t(){this.wh=new Xc,this.Th={},this.Oc=null,this.Xi=null}return t.prototype.qu=function(t){},t.prototype.Qu=function(t,e,n){},t.prototype.Wu=function(t){return this.wh.Au(t),this.Th[t]||"not-current"},t.prototype.Ju=function(t,e,n){this.Th[t]=e},t.prototype.Gu=function(t){this.wh.Ru(t)},t.prototype.zu=function(t){return this.wh.activeTargetIds.has(t)},t.prototype.Hu=function(t){delete this.Th[t]},t.prototype.$u=function(){return this.wh.activeTargetIds},t.prototype.Bu=function(t){return this.wh.activeTargetIds.has(t)},t.prototype.start=function(){return this.wh=new Xc,Promise.resolve()},t.prototype.Xu=function(t,e,n){},t.prototype.Zu=function(t){},t.prototype.pa=function(){},t.prototype.er=function(t){},t.prototype.eh=function(){},t}(),$c=function(t){this.key=t},th=function(t){this.key=t},eh=function(){function t(t,e){this.query=t,this.Eh=e,this.Ih=null,this.Zt=!1,this.mh=hi(),this.Qt=hi(),this.Ah=As(t),this.Rh=new pi(this.Ah)}return Object.defineProperty(t.prototype,"Ph",{get:function(){return this.Eh},enumerable:!1,configurable:!0}),t.prototype.gh=function(t,e){var n=this,r=e?e.Vh:new di,i=e?e.Rh:this.Rh,o=e?e.Qt:this.Qt,s=i,u=!1,a=ds(this.query)&&i.size===this.query.limit?i.last():null,c=vs(this.query)&&i.size===this.query.limit?i.first():null;if(t.ut(function(t,e){var h=i.get(t),l=e instanceof as?e:null;l&&(l=xs(n.query,l)?l:null);var f=!!h&&n.Qt.has(h.key),p=!!l&&(l.Je||n.Qt.has(l.key)&&l.hasCommittedMutations),d=!1;h&&l?h.data().isEqual(l.data())?f!==p&&(r.track({type:3,doc:l}),d=!0):n.yh(h,l)||(r.track({type:2,doc:l}),d=!0,(a&&n.Ah(l,a)>0||c&&n.Ah(l,c)<0)&&(u=!0)):!h&&l?(r.track({type:0,doc:l}),d=!0):h&&!l&&(r.track({type:1,doc:h}),d=!0,(a||c)&&(u=!0)),d&&(l?(s=s.add(l),o=p?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))}),ds(this.query)||vs(this.query))for(;s.size>this.query.limit;){var h=ds(this.query)?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{Rh:s,Vh:r,ph:u,Qt:o}},t.prototype.yh=function(t,e){return t.Je&&e.hasCommittedMutations&&!e.Je},t.prototype.bi=function(t,e,n){var r=this,i=this.Rh;this.Rh=t.Rh,this.Qt=t.Qt;var o=t.Vh.qt();o.sort(function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return yr()}};return n(t)-n(e)}(t.type,e.type)||r.Ah(t.doc,e.doc)}),this.bh(n);var s=e?this.Sh():[],u=0===this.mh.size&&this.Zt?1:0,a=u!==this.Ih;return this.Ih=u,0!==o.length||a?{snapshot:new vi(this.query,t.Rh,i,o,t.Qt,0===u,a,!1),Dh:s}:{Dh:s}},t.prototype.Bs=function(t){return this.Zt&&"Offline"===t?(this.Zt=!1,this.bi({Rh:this.Rh,Vh:new di,Qt:this.Qt,ph:!1},!1)):{Dh:[]}},t.prototype.Ch=function(t){return!this.Eh.has(t)&&!!this.Rh.has(t)&&!this.Rh.get(t).Je},t.prototype.bh=function(t){var e=this;t&&(t.te.forEach(function(t){return e.Eh=e.Eh.add(t)}),t.ee.forEach(function(t){}),t.ne.forEach(function(t){return e.Eh=e.Eh.delete(t)}),this.Zt=t.Zt)},t.prototype.Sh=function(){var t=this;if(!this.Zt)return[];var e=this.mh;this.mh=hi(),this.Rh.forEach(function(e){t.Ch(e.key)&&(t.mh=t.mh.add(e.key))});var n=[];return e.forEach(function(e){t.mh.has(e)||n.push(new th(e))}),this.mh.forEach(function(t){e.has(t)||n.push(new $c(t))}),n},t.prototype.Nh=function(t){this.Eh=t.Xa,this.mh=hi();var e=this.gh(t.documents);return this.bi(e,!0)},t.prototype.xh=function(){return vi.jt(this.query,this.Rh,this.Qt,0===this.Ih)},t}(),nh=function(t,e,n){this.query=t,this.targetId=e,this.view=n},rh=function(t){this.key=t,this.Fh=!1},ih=function(){function t(t,e,n,r,i,o){this.Kc=t,this.Oh=e,this.Mh=n,this.kh=r,this.currentUser=i,this.$h=o,this.Lh={},this.Bh=new xr(function(t){return Ts(t)},Is),this.qh=new Map,this.Uh=[],this.Qh=new Zr(Lr.V),this.Kh=new Map,this.Wh=new qc,this.jh={},this.Gh=new Map,this.zh=Ma.vo(),this.onlineState="Unknown",this.Hh=void 0}return Object.defineProperty(t.prototype,"Jh",{get:function(){return!0===this.Hh},enumerable:!1,configurable:!0}),t}();function oh(t,e){return Object(r.b)(this,void 0,void 0,function(){var n,i,o,s,u;return Object(r.d)(this,function(r){switch(r.label){case 0:return n=Dh(t),(o=n.Bh.get(e))?(n.kh.Wu(o.targetId),i=o.view.xh(),[3,4]):[3,1];case 1:return[4,rc(n.Kc,ws(e))];case 2:return s=r.sent(),u=n.kh.Wu(s.targetId),[4,sh(n,e,s.targetId,"current"===u)];case 3:i=r.sent(),n.Jh&&mc(n.Oh,s),r.label=4;case 4:return[2,i]}})})}function sh(t,e,n,i){return Object(r.b)(this,void 0,void 0,function(){var o,s,u,a,c,h;return Object(r.d)(this,function(l){switch(l.label){case 0:return t.Yh=function(e,n,i){return function(t,e,n,i){return Object(r.b)(this,void 0,void 0,function(){var o,s,u;return Object(r.d)(this,function(r){switch(r.label){case 0:return(o=e.view.gh(n)).ph?[4,oc(t.Kc,e.query,!1).then(function(t){return e.view.gh(t.documents,o)})]:[3,2];case 1:o=r.sent(),r.label=2;case 2:return s=i&&i.Gt.get(e.targetId),u=e.view.bi(o,t.Jh,s),[2,(gh(t,e.targetId,u.Dh),u.snapshot)]}})})}(t,e,n,i)},[4,oc(t.Kc,e,!0)];case 1:return o=l.sent(),s=new eh(e,o.Xa),u=s.gh(o.documents),a=bi.Xt(n,i&&"Offline"!==t.onlineState),c=s.bi(u,t.Jh,a),gh(t,n,c.Dh),h=new nh(e,n,s),[2,(t.Bh.set(e,h),t.qh.has(n)?t.qh.get(n).push(e):t.qh.set(n,[e]),c.snapshot)]}})})}function uh(t,e){return Object(r.b)(this,void 0,void 0,function(){var n,i,o;return Object(r.d)(this,function(r){switch(r.label){case 0:return n=mr(t),i=n.Bh.get(e),(o=n.qh.get(i.targetId)).length>1?[2,(n.qh.set(i.targetId,o.filter(function(t){return!Is(t,e)})),void n.Bh.delete(e))]:n.Jh?(n.kh.Gu(i.targetId),n.kh.Bu(i.targetId)?[3,2]:[4,ic(n.Kc,i.targetId,!1).then(function(){n.kh.Hu(i.targetId),gc(n.Oh,i.targetId),bh(n,i.targetId)}).catch(cc)]):[3,3];case 1:r.sent(),r.label=2;case 2:return[3,5];case 3:return bh(n,i.targetId),[4,ic(n.Kc,i.targetId,!0)];case 4:r.sent(),r.label=5;case 5:return[2]}})})}function ah(t,e,n){return Object(r.b)(this,void 0,void 0,function(){var i,o,s,u;return Object(r.d)(this,function(r){switch(r.label){case 0:i=Rh(t),r.label=1;case 1:return r.trys.push([1,5,,6]),[4,function(t,e){var n,r=mr(t),i=kr.now(),o=e.reduce(function(t,e){return t.add(e.key)},hi());return r.persistence.runTransaction("Locally write mutations","readwrite",function(t){return r.Ga.Li(t,o).next(function(o){n=o;for(var s=[],u=0,a=e;u<a.length;u++){var c=a[u],h=Wo(c,n.get(c.key));null!=h&&s.push(new Jo(c.key,h,ss(h.proto.mapValue),Bo.exists(!0)))}return r.xi.Qr(t,i,s,e)})}).then(function(t){var e=t.wi(n);return{batchId:t.batchId,Ii:e}})}(i.Kc,e)];case 2:return o=r.sent(),i.kh.qu(o.batchId),function(t,e,n){var r=t.jh[t.currentUser.Ys()];r||(r=new Zr(_r)),r=r.rt(e,n),t.jh[t.currentUser.Ys()]=r}(i,o.batchId,n),[4,Eh(i,o.Ii)];case 3:return r.sent(),[4,Sc(i.Oh)];case 4:return r.sent(),[3,6];case 5:return s=r.sent(),u=uu(s,"Failed to persist write"),n.reject(u),[3,6];case 6:return[2]}})})}function ch(t,e){return Object(r.b)(this,void 0,void 0,function(){var n,i;return Object(r.d)(this,function(r){switch(r.label){case 0:n=mr(t),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,ec(n.Kc,e)];case 2:return i=r.sent(),e.Gt.forEach(function(t,e){var r=n.Kh.get(e);r&&(br(t.te.size+t.ee.size+t.ne.size<=1),t.te.size>0?r.Fh=!0:t.ee.size>0?br(r.Fh):t.ne.size>0&&(br(r.Fh),r.Fh=!1))}),[4,Eh(n,i,e)];case 3:return r.sent(),[3,6];case 4:return[4,cc(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}})})}function hh(t,e,n){var r=mr(t);if(r.Jh&&0===n||!r.Jh&&1===n){var i=[];r.Bh.forEach(function(t,n){var r=n.view.Bs(e);r.snapshot&&i.push(r.snapshot)}),function(t,e){var n=mr(t);n.onlineState=e;var r=!1;n.queries.forEach(function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].Bs(e)&&(r=!0)}),r&&du(n)}(r.Mh,e),i.length&&r.Lh.Rc(i),r.onlineState=e,r.Jh&&r.kh.Zu(e)}}function lh(t,e,n){return Object(r.b)(this,void 0,void 0,function(){var i,o,s,u,a,c;return Object(r.d)(this,function(r){switch(r.label){case 0:return(i=mr(t)).kh.Ju(e,"rejected",n),o=i.Kh.get(e),(s=o&&o.key)?(u=(u=new Zr(Lr.V)).rt(s,new cs(s,Sr.min())),a=hi().add(s),c=new yi(Sr.min(),new Map,new ei(_r),u,a),[4,ch(i,c)]):[3,2];case 1:return r.sent(),i.Qh=i.Qh.remove(s),i.Kh.delete(e),_h(i),[3,4];case 2:return[4,ic(i.Kc,e,!1).then(function(){return bh(i,e,n)}).catch(cc)];case 3:r.sent(),r.label=4;case 4:return[2]}})})}function fh(t,e){return Object(r.b)(this,void 0,void 0,function(){var n,i,o;return Object(r.d)(this,function(r){switch(r.label){case 0:n=mr(t),i=e.batch.batchId,r.label=1;case 1:return r.trys.push([1,4,,6]),[4,$a(n.Kc,e)];case 2:return o=r.sent(),yh(n,i,null),vh(n,i),n.kh.Qu(i,"acknowledged"),[4,Eh(n,o)];case 3:return r.sent(),[3,6];case 4:return[4,cc(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}})})}function ph(t,e,n){return Object(r.b)(this,void 0,void 0,function(){var i,o;return Object(r.d)(this,function(r){switch(r.label){case 0:i=mr(t),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,function(t,e){var n=mr(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",function(t){var r;return n.xi.Wr(t,e).next(function(e){return br(null!==e),r=e.keys(),n.xi.Yr(t,e)}).next(function(){return n.xi.no(t)}).next(function(){return n.Ga.Li(t,r)})})}(i.Kc,e)];case 2:return o=r.sent(),yh(i,e,n),vh(i,e),i.kh.Qu(e,"rejected",n),[4,Eh(i,o)];case 3:return r.sent(),[3,6];case 4:return[4,cc(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}})})}function dh(t,e){return Object(r.b)(this,void 0,void 0,function(){var n,i,o,s,u;return Object(r.d)(this,function(r){switch(r.label){case 0:Ic((n=mr(t)).Oh)||fr("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,function(t){var e=mr(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e.xi.zr(t)})}(n.Kc)];case 2:return-1===(i=r.sent())?[2,void e.resolve()]:((o=n.Gh.get(i)||[]).push(e),n.Gh.set(i,o),[3,4]);case 3:return s=r.sent(),u=uu(s,"Initialization of waitForPendingWrites() operation failed"),e.reject(u),[3,4];case 4:return[2]}})})}function vh(t,e){(t.Gh.get(e)||[]).forEach(function(t){t.resolve()}),t.Gh.delete(e)}function yh(t,e,n){var r=mr(t),i=r.jh[r.currentUser.Ys()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.jh[r.currentUser.Ys()]=i}}function bh(t,e,n){void 0===n&&(n=null),t.kh.Gu(e);for(var r=0,i=t.qh.get(e);r<i.length;r++){var o=i[r];t.Bh.delete(o),n&&t.Lh.Xh(o,n)}t.qh.delete(e),t.Jh&&t.Wh.du(e).forEach(function(e){t.Wh.so(e)||mh(t,e)})}function mh(t,e){var n=t.Qh.get(e);null!==n&&(gc(t.Oh,n),t.Qh=t.Qh.remove(e),t.Kh.delete(n),_h(t))}function gh(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof $c?(t.Wh.Qo(o.key,e),wh(t,o)):o instanceof th?(fr("SyncEngine","Document no longer in limbo: "+o.key),t.Wh.Wo(o.key,e),t.Wh.so(o.key)||mh(t,o.key)):yr()}}function wh(t,e){var n=e.key;t.Qh.get(n)||(fr("SyncEngine","New document in limbo: "+n),t.Uh.push(n),_h(t))}function _h(t){for(;t.Uh.length>0&&t.Qh.size<t.$h;){var e=t.Uh.shift(),n=t.zh.next();t.Kh.set(n,new rh(e)),t.Qh=t.Qh.rt(e,n),mc(t.Oh,new Qr(ws(ps(e.path)),n,2,Su.nr))}}function Eh(t,e,n){return Object(r.b)(this,void 0,void 0,function(){var i,o,s,u;return Object(r.d)(this,function(a){switch(a.label){case 0:return i=mr(t),o=[],s=[],u=[],i.Bh.T()?[3,3]:(i.Bh.forEach(function(t,r){u.push(i.Yh(r,e,n).then(function(t){if(t){i.Jh&&i.kh.Ju(r.targetId,t.fromCache?"not-current":"current"),o.push(t);var e=ku.Yi(r.targetId,t);s.push(e)}}))}),[4,Promise.all(u)]);case 1:return a.sent(),i.Lh.Rc(o),[4,function(t,e){return Object(r.b)(this,void 0,void 0,function(){var n,i,o,s,u,a,c,h;return Object(r.d)(this,function(r){switch(r.label){case 0:n=mr(t),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(t){return Ws.forEach(e,function(e){return Ws.forEach(e.Hi,function(r){return n.persistence.Lr.Qo(t,e.targetId,r)}).next(function(){return Ws.forEach(e.Ji,function(r){return n.persistence.Lr.Wo(t,e.targetId,r)})})})})];case 2:return r.sent(),[3,4];case 3:if(!Js(i=r.sent()))throw i;return fr("LocalStore","Failed to update sequence numbers: "+i),[3,4];case 4:for(o=0,s=e;o<s.length;o++)a=(u=s[o]).targetId,u.fromCache||(c=n.Qa.get(a),h=c.it(c.et),n.Qa=n.Qa.rt(a,h));return[2]}})})}(i.Kc,s)];case 2:a.sent(),a.label=3;case 3:return[2]}})})}function Oh(t,e){return Object(r.b)(this,void 0,void 0,function(){var n,i;return Object(r.d)(this,function(r){switch(r.label){case 0:return(n=mr(t)).currentUser.isEqual(e)?[3,3]:(fr("SyncEngine","User change. New user:",e.Ys()),[4,Za(n.Kc,e)]);case 1:return i=r.sent(),n.currentUser=e,function(t,e){t.Gh.forEach(function(t){t.forEach(function(t){t.reject(new Nr(Ar.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),t.Gh.clear()}(n),n.kh.Xu(e,i.Ja,i.Ya),[4,Eh(n,i.Ha)];case 2:r.sent(),r.label=3;case 3:return[2]}})})}function Ih(t,e){var n=mr(t),r=n.Kh.get(e);if(r&&r.Fh)return hi().add(r.key);var i=hi(),o=n.qh.get(e);if(!o)return i;for(var s=0,u=o;s<u.length;s++){var a=n.Bh.get(u[s]);i=i.Ot(a.view.Ph)}return i}function Th(t,e){return Object(r.b)(this,void 0,void 0,function(){var n,i,o;return Object(r.d)(this,function(r){switch(r.label){case 0:return[4,oc((n=mr(t)).Kc,e.query,!0)];case 1:return i=r.sent(),o=e.view.Nh(i),[2,(n.Jh&&gh(n,e.targetId,o.Dh),o)]}})})}function jh(t){return Object(r.b)(this,void 0,void 0,function(){var e;return Object(r.d)(this,function(n){return[2,uc((e=mr(t)).Kc).then(function(t){return Eh(e,t)})]})})}function xh(t,e,n,i){return Object(r.b)(this,void 0,void 0,function(){var o,s;return Object(r.d)(this,function(r){switch(r.label){case 0:return[4,function(t,e){var n=mr(t),r=mr(n.xi);return n.persistence.runTransaction("Lookup mutation documents","readonly",function(t){return r.jr(t,e).next(function(e){return e?n.Ga.Li(t,e):Ws.resolve(null)})})}((o=mr(t)).Kc,e)];case 1:return null===(s=r.sent())?[3,6]:"pending"!==n?[3,3]:[4,Sc(o.Oh)];case 2:return r.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(yh(o,e,i||null),vh(o,e),function(t,e){mr(mr(t).xi).Zr(e)}(o.Kc,e)):yr(),r.label=4;case 4:return[4,Eh(o,s)];case 5:return r.sent(),[3,7];case 6:fr("SyncEngine","Cannot apply mutation batch with id: "+e),r.label=7;case 7:return[2]}})})}function Ah(t,e){return Object(r.b)(this,void 0,void 0,function(){var n,i,o,s,u,a,c;return Object(r.d)(this,function(r){switch(r.label){case 0:return Dh(n=mr(t)),Rh(n),!0!==e||!0===n.Hh?[3,3]:(i=n.kh.$u(),[4,Nh(n,i.O())]);case 1:return o=r.sent(),n.Hh=!0,[4,Vc(n.Oh,!0)];case 2:for(r.sent(),s=0,u=o;s<u.length;s++)mc(n.Oh,u[s]);return[3,7];case 3:return!1!==e||!1===n.Hh?[3,7]:(a=[],c=Promise.resolve(),n.qh.forEach(function(t,e){n.kh.zu(e)?a.push(e):c=c.then(function(){return bh(n,e),ic(n.Kc,e,!0)}),gc(n.Oh,e)}),[4,c]);case 4:return r.sent(),[4,Nh(n,a)];case 5:return r.sent(),function(t){var e=mr(t);e.Kh.forEach(function(t,n){gc(e.Oh,n)}),e.Wh.wu(),e.Kh=new Map,e.Qh=new Zr(Lr.V)}(n),n.Hh=!1,[4,Vc(n.Oh,!1)];case 6:r.sent(),r.label=7;case 7:return[2]}})})}function Nh(t,e,n){return Object(r.b)(this,void 0,void 0,function(){var n,i,o,s,u,a,c,h,l,f,p,d,v;return Object(r.d)(this,function(r){switch(r.label){case 0:n=mr(t),i=[],o=[],s=0,u=e,r.label=1;case 1:return s<u.length?(c=void 0,(h=n.qh.get(a=u[s]))&&0!==h.length?[4,rc(n.Kc,ws(h[0]))]:[3,7]):[3,13];case 2:c=r.sent(),l=0,f=h,r.label=3;case 3:return l<f.length?(p=n.Bh.get(f[l]),[4,Th(n,p)]):[3,6];case 4:(d=r.sent()).snapshot&&o.push(d.snapshot),r.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,sc(n.Kc,a)];case 8:return v=r.sent(),[4,rc(n.Kc,v)];case 9:return c=r.sent(),[4,sh(n,kh(v),a,!1)];case 10:r.sent(),r.label=11;case 11:i.push(c),r.label=12;case 12:return s++,[3,1];case 13:return[2,(n.Lh.Rc(o),i)]}})})}function kh(t){return fs(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Sh(t){var e=mr(t);return mr(mr(e.Kc).persistence).Ca()}function Ph(t,e,n,i){return Object(r.b)(this,void 0,void 0,function(){var o,s,u;return Object(r.d)(this,function(r){switch(r.label){case 0:return(o=mr(t)).Hh?(fr("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!o.qh.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,uc(o.Kc)];case 3:return s=r.sent(),u=yi.Yt(e,"current"===n),[4,Eh(o,s,u)];case 4:return r.sent(),[3,8];case 5:return[4,ic(o.Kc,e,!0)];case 6:return r.sent(),bh(o,e,i),[3,8];case 7:yr(),r.label=8;case 8:return[2]}})})}function Ch(t,e,n){return Object(r.b)(this,void 0,void 0,function(){var i,o,s,u,a,c,h,l,f;return Object(r.d)(this,function(p){switch(p.label){case 0:if(!(i=Dh(t)).Hh)return[3,10];o=0,s=e,p.label=1;case 1:return o<s.length?i.qh.has(u=s[o])?(fr("SyncEngine","Adding an already active target "+u),[3,5]):[4,sc(i.Kc,u)]:[3,6];case 2:return a=p.sent(),[4,rc(i.Kc,a)];case 3:return c=p.sent(),[4,sh(i,kh(a),c.targetId,!1)];case 4:p.sent(),mc(i.Oh,c),p.label=5;case 5:return o++,[3,1];case 6:h=function(t){return Object(r.d)(this,function(e){switch(e.label){case 0:return i.qh.has(t)?[4,ic(i.Kc,t,!1).then(function(){gc(i.Oh,t),bh(i,t)}).catch(cc)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})},l=0,f=n,p.label=7;case 7:return l<f.length?[5,h(f[l])]:[3,10];case 8:p.sent(),p.label=9;case 9:return l++,[3,7];case 10:return[2]}})})}function Dh(t){var e=mr(t);return e.Oh.jc.nu=ch.bind(null,e),e.Oh.jc.Be=Ih.bind(null,e),e.Oh.jc.eu=lh.bind(null,e),e.Lh.Rc=fu.bind(null,e.Mh),e.Lh.Xh=pu.bind(null,e.Mh),e}function Rh(t){var e=mr(t);return e.Oh.jc.su=fh.bind(null,e),e.Oh.jc.iu=ph.bind(null,e),e}var Lh=function(){function t(){}return t.prototype.za=function(t){this.Zh=t},t.prototype.Ui=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.rn.length||1===t.rn.length&&t.rn[0].field.B())}(e)||n.isEqual(Sr.min())?this.tl(t,e):this.Zh.Li(t,r).next(function(s){var u=i.el(e,s);return(ds(e)||vs(e))&&i.ph(e.limitType,u,r,n)?i.tl(t,e):(lr()<=o.a.DEBUG&&fr("IndexFreeQueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),js(e)),i.Zh.Ui(t,e,n).next(function(t){return u.forEach(function(e){t=t.rt(e.key,e)}),t}))})},t.prototype.el=function(t,e){var n=new ei(As(t));return e.forEach(function(e,r){r instanceof as&&xs(t,r)&&(n=n.add(r))}),n},t.prototype.ph=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.A(r)>0)},t.prototype.tl=function(t,e){return lr()<=o.a.DEBUG&&fr("IndexFreeQueryEngine","Using full collection scan to execute query:",js(e)),this.Zh.Ui(t,e,Sr.min())},t}(),Mh=function(){function t(t,e){this.Fi=t,this.Lr=e,this.xi=[],this.nl=1,this.sl=new ei(Bc.cu)}return t.prototype.Ur=function(t){return Ws.resolve(0===this.xi.length)},t.prototype.Qr=function(t,e,n,r){var i=this.nl;this.nl++;var o=new Eu(i,e,n,r);this.xi.push(o);for(var s=0,u=r;s<u.length;s++){var a=u[s];this.sl=this.sl.add(new Bc(a.key,i)),this.Fi.Kr(t,a.key.path.S())}return Ws.resolve(o)},t.prototype.Wr=function(t,e){return Ws.resolve(this.il(e))},t.prototype.Gr=function(t,e){var n=this.rl(e+1),r=n<0?0:n;return Ws.resolve(this.xi.length>r?this.xi[r]:null)},t.prototype.zr=function(){return Ws.resolve(0===this.xi.length?-1:this.nl-1)},t.prototype.Hr=function(t){return Ws.resolve(this.xi.slice())},t.prototype.Mi=function(t,e){var n=this,r=new Bc(e,0),i=new Bc(e,Number.POSITIVE_INFINITY),o=[];return this.sl.Nt([r,i],function(t){var e=n.il(t.Eu);o.push(e)}),Ws.resolve(o)},t.prototype.qi=function(t,e){var n=this,r=new ei(_r);return e.forEach(function(t){var e=new Bc(t,0),i=new Bc(t,Number.POSITIVE_INFINITY);n.sl.Nt([e,i],function(t){r=r.add(t.Eu)})}),Ws.resolve(this.ol(r))},t.prototype.Gi=function(t,e){var n=e.path,r=n.length+1,i=n;Lr.G(i)||(i=i.child(""));var o=new Bc(new Lr(i),0),s=new ei(_r);return this.sl.xt(function(t){var e=t.key.path;return!!n.N(e)&&(e.length===r&&(s=s.add(t.Eu)),!0)},o),Ws.resolve(this.ol(s))},t.prototype.ol=function(t){var e=this,n=[];return t.forEach(function(t){var r=e.il(t);null!==r&&n.push(r)}),n},t.prototype.Yr=function(t,e){var n=this;br(0===this.al(e.batchId,"removed")),this.xi.shift();var r=this.sl;return Ws.forEach(e.mutations,function(i){var o=new Bc(i.key,e.batchId);return r=r.delete(o),n.Lr.eo(t,i.key)}).next(function(){n.sl=r})},t.prototype.Zr=function(t){},t.prototype.so=function(t,e){var n=new Bc(e,0),r=this.sl.Ft(n);return Ws.resolve(e.isEqual(r&&r.key))},t.prototype.no=function(t){return Ws.resolve()},t.prototype.al=function(t,e){return this.rl(t)},t.prototype.rl=function(t){return 0===this.xi.length?0:t-this.xi[0].batchId},t.prototype.il=function(t){var e=this.rl(t);return e<0||e>=this.xi.length?null:this.xi[e]},t}(),Vh=function(){function t(t,e){this.Fi=t,this.cl=e,this.docs=new Zr(Lr.V),this.size=0}return t.prototype.Ri=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.cl(e);return this.docs=this.docs.rt(r,{gi:e,size:s,readTime:n}),this.size+=s-o,this.Fi.Kr(t,r.path.S())},t.prototype.Vi=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.yi=function(t,e){var n=this.docs.get(e);return Ws.resolve(n?n.gi:null)},t.prototype.getEntries=function(t,e){var n=this,r=oi();return e.forEach(function(t){var e=n.docs.get(t);r=r.rt(t,e?e.gi:null)}),Ws.resolve(r)},t.prototype.Ui=function(t,e,n){for(var r=ui(),i=new Lr(e.path.child("")),o=this.docs._t(i);o.It();){var s=o.Et(),u=s.value,a=u.gi,c=u.readTime;if(!e.path.N(s.key.path))break;c.A(n)<=0||a instanceof as&&xs(e,a)&&(r=r.rt(a.key,a))}return Ws.resolve(r)},t.prototype.ul=function(t,e){return Ws.forEach(this.docs,function(t){return e(t)})},t.prototype._o=function(t){return new Fh(this)},t.prototype.wo=function(t){return Ws.resolve(this.size)},t}(),Fh=function(t){function e(e){var n=this;return(n=t.call(this)||this).To=e,n}return Object(r.c)(e,t),e.prototype.bi=function(t){var e=this,n=[];return this.Ii.forEach(function(r,i){i&&i.gi?n.push(e.To.Ri(t,i.gi,e.Ai(r))):e.To.Vi(r)}),Ws.xn(n)},e.prototype.pi=function(t,e){return this.To.yi(t,e)},e.prototype.vi=function(t,e){return this.To.getEntries(t,e)},e}(Iu),Uh=function(){function t(t){this.persistence=t,this.hl=new xr(function(t){return Br(t)},zr),this.lastRemoteSnapshotVersion=Sr.min(),this.highestTargetId=0,this.ll=0,this._l=new qc,this.targetCount=0,this.fl=Ma.po()}return t.prototype.De=function(t,e){return this.hl.forEach(function(t,n){return e(n)}),Ws.resolve()},t.prototype.Co=function(t){return Ws.resolve(this.lastRemoteSnapshotVersion)},t.prototype.No=function(t){return Ws.resolve(this.ll)},t.prototype.bo=function(t){return this.highestTargetId=this.fl.next(),Ws.resolve(this.highestTargetId)},t.prototype.xo=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ll&&(this.ll=e),Ws.resolve()},t.prototype.Oo=function(t){this.hl.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.fl=new Ma(e),this.highestTargetId=e),t.sequenceNumber>this.ll&&(this.ll=t.sequenceNumber)},t.prototype.Fo=function(t,e){return this.Oo(e),this.targetCount+=1,Ws.resolve()},t.prototype.ko=function(t,e){return this.Oo(e),Ws.resolve()},t.prototype.$o=function(t,e){return this.hl.delete(e.target),this._l.du(e.targetId),this.targetCount-=1,Ws.resolve()},t.prototype.Nr=function(t,e,n){var r=this,i=0,o=[];return this.hl.forEach(function(s,u){u.sequenceNumber<=e&&null===n.get(u.targetId)&&(r.hl.delete(s),o.push(r.Lo(t,u.targetId)),i++)}),Ws.xn(o).next(function(){return i})},t.prototype.Bo=function(t){return Ws.resolve(this.targetCount)},t.prototype.qo=function(t,e){var n=this.hl.get(e)||null;return Ws.resolve(n)},t.prototype.Uo=function(t,e,n){return this._l.lu(e,n),Ws.resolve()},t.prototype.Ko=function(t,e,n){this._l.fu(e,n);var r=this.persistence.Lr,i=[];return r&&e.forEach(function(e){i.push(r.eo(t,e))}),Ws.xn(i)},t.prototype.Lo=function(t,e){return this._l.du(e),Ws.resolve()},t.prototype.jo=function(t,e){var n=this._l.Tu(e);return Ws.resolve(n)},t.prototype.so=function(t,e){return Ws.resolve(this._l.so(e))},t}(),qh=function(){function t(t){this.serializer=t,this.dl=new Map,this.wl=new Map}return t.prototype.mo=function(t,e){return Ws.resolve(this.dl.get(e))},t.prototype.Ao=function(t,e){var n;return this.dl.set(e.id,{id:(n=e).id,version:n.version,createTime:to(n.createTime)}),Ws.resolve()},t.prototype.Ro=function(t,e){return Ws.resolve(this.wl.get(e))},t.prototype.Po=function(t,e){var n;return this.wl.set(e.name,{name:(n=e).name,query:Zu(n.bundledQuery),readTime:to(n.readTime)}),Ws.resolve()},t}(),Bh=function(){function t(t,e){var n=this;this.Tl={},this.Jo=new Su(0),this.Yo=!1,this.Yo=!0,this.Lr=t(this),this.ra=new Uh(this),this.Fi=new la,this.Ni=function(t,e){return new Vh(t,function(t){return n.Lr.El(t)})}(this.Fi),this.serializer=new Bu(e),this.oa=new qh(this.serializer)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.pa=function(){return this.Yo=!1,Promise.resolve()},Object.defineProperty(t.prototype,"yr",{get:function(){return this.Yo},enumerable:!1,configurable:!0}),t.prototype.fa=function(){},t.prototype.da=function(){},t.prototype.Oa=function(){return this.Fi},t.prototype.Na=function(t){var e=this.Tl[t.Ys()];return e||(e=new Mh(this.Fi,this.Lr),this.Tl[t.Ys()]=e),e},t.prototype.xa=function(){return this.ra},t.prototype.Fa=function(){return this.Ni},t.prototype.Ma=function(){return this.oa},t.prototype.runTransaction=function(t,e,n){var r=this;fr("MemoryPersistence","Starting transaction:",t);var i=new zh(this.Jo.next());return this.Lr.Il(),n(i).next(function(t){return r.Lr.ml(i).next(function(){return t})}).Cn().then(function(t){return i.Ci(),t})},t.prototype.Al=function(t,e){return Ws.Fn(Object.values(this.Tl).map(function(n){return function(){return n.so(t,e)}}))},t}(),zh=function(t){function e(e){var n=this;return(n=t.call(this)||this).Go=e,n}return Object(r.c)(e,t),e}(Au),Gh=function(){function t(t){this.persistence=t,this.Rl=new qc,this.Pl=null}return t.gl=function(e){return new t(e)},Object.defineProperty(t.prototype,"Vl",{get:function(){if(this.Pl)return this.Pl;throw yr()},enumerable:!1,configurable:!0}),t.prototype.Qo=function(t,e,n){return this.Rl.Qo(n,e),this.Vl.delete(n.toString()),Ws.resolve()},t.prototype.Wo=function(t,e,n){return this.Rl.Wo(n,e),this.Vl.add(n.toString()),Ws.resolve()},t.prototype.eo=function(t,e){return this.Vl.add(e.toString()),Ws.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.Rl.du(e.targetId).forEach(function(t){return n.Vl.add(t.toString())});var r=this.persistence.xa();return r.jo(t,e.targetId).next(function(t){t.forEach(function(t){return n.Vl.add(t.toString())})}).next(function(){return r.$o(t,e)})},t.prototype.Il=function(){this.Pl=new Set},t.prototype.ml=function(t){var e=this,n=this.persistence.Fa()._o();return Ws.forEach(this.Vl,function(r){var i=Lr.K(r);return e.yl(t,i).next(function(t){t||n.Vi(i)})}).next(function(){return e.Pl=null,n.apply(t)})},t.prototype.qa=function(t,e){var n=this;return this.yl(t,e).next(function(t){t?n.Vl.delete(e.toString()):n.Vl.add(e.toString())})},t.prototype.El=function(t){return 0},t.prototype.yl=function(t,e){var n=this;return Ws.Fn([function(){return Ws.resolve(n.Rl.so(e))},function(){return n.persistence.xa().so(t,e)},function(){return n.persistence.Al(t,e)}])},t}(),Kh=function(){function t(t){this.pl=t.pl,this.vl=t.vl}return t.prototype.mc=function(t){this.bl=t},t.prototype.dc=function(t){this.Sl=t},t.prototype.onMessage=function(t){this.Dl=t},t.prototype.close=function(){this.vl()},t.prototype.send=function(t){this.pl(t)},t.prototype.Cl=function(){this.bl()},t.prototype.Nl=function(t){this.Sl(t)},t.prototype.xl=function(t){this.Dl(t)},t}(),Hh={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Wh=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.i=e.i,n}return Object(r.c)(e,t),e.prototype.Ll=function(t,e,n,r){return new Promise(function(i,o){var s=new sr;s.listenOnce(ir.COMPLETE,function(){try{switch(s.getLastErrorCode()){case rr.NO_ERROR:var e=s.getResponseJson();fr("Connection","XHR received:",JSON.stringify(e)),i(e);break;case rr.TIMEOUT:fr("Connection",'RPC "'+t+'" timed out'),o(new Nr(Ar.DEADLINE_EXCEEDED,"Request time out"));break;case rr.HTTP_ERROR:var n=s.getStatus();if(fr("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var u=function(t){var e=t.toLowerCase().replace("_","-");return Object.values(Ar).indexOf(e)>=0?e:Ar.UNKNOWN}(r.status);o(new Nr(u,r.message))}else o(new Nr(Ar.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new Nr(Ar.UNAVAILABLE,"Connection failed."));break;default:yr()}}finally{fr("Connection",'RPC "'+t+'" completed.')}});var u=JSON.stringify(r);s.send(e,"POST",u,n,15)})},e.prototype.Ac=function(t,e){var n=[this.Ol,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new Zn,i={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.t.projectId+"/databases/"+this.t.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.i};this.$l(i.initMessageHeaders,e),Object(s.p)()||Object(s.r)()||Object(s.m)()||Object(s.n)()||Object(s.s)()||Object(s.l)()||(i.httpHeadersOverwriteParam="$httpHeaders");var o=n.join("");fr("Connection","Creating WebChannel: "+o,i);var u=r.createWebChannel(o,i),a=!1,c=!1,h=new Kh({pl:function(t){c?fr("Connection","Not sending because WebChannel is closed:",t):(a||(fr("Connection","Opening WebChannel transport."),u.open(),a=!0),fr("Connection","WebChannel sending:",t),u.send(t))},vl:function(){return u.close()}}),l=function(t,e){u.listen(t,function(t){try{e(t)}catch(t){setTimeout(function(){throw t},0)}})};return l(or.EventType.OPEN,function(){c||fr("Connection","WebChannel transport opened.")}),l(or.EventType.CLOSE,function(){c||(c=!0,fr("Connection","WebChannel transport closed"),h.Nl())}),l(or.EventType.ERROR,function(t){c||(c=!0,dr("Connection","WebChannel transport errored:",t),h.Nl(new Nr(Ar.UNAVAILABLE,"The operation could not be completed")))}),l(or.EventType.MESSAGE,function(t){var e;if(!c){var n=t.data[0];br(!!n);var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){fr("Connection","WebChannel received error:",r);var i=r.status,o=function(t){var e=Hr[t];if(void 0!==e)return Jr(e)}(i),s=r.message;void 0===o&&(o=Ar.INTERNAL,s="Unknown error status: "+i+" with message "+r.message),c=!0,h.Nl(new Nr(o,s)),u.close()}else fr("Connection","WebChannel received:",n),h.xl(n)}}),setTimeout(function(){h.Cl()},0),h},e}(function(){function t(t){this.Fl=t,this.t=t.t,this.Ol=(t.ssl?"https":"http")+"://"+t.host,this.Ml="projects/"+this.t.projectId+"/databases/"+this.t.database+"/documents"}return t.prototype.xc=function(t,e,n,r){var i=this.kl(t,e);fr("RestConnection","Sending: ",i,n);var o={};return this.$l(o,r),this.Ll(t,i,o,n).then(function(t){return fr("RestConnection","Received: ",t),t},function(e){throw dr("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e})},t.prototype.Fc=function(t,e,n,r){return this.xc(t,e,n,r)},t.prototype.$l=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.0.2",t["Content-Type"]="text/plain",e)for(var n in e.ti)e.ti.hasOwnProperty(n)&&(t[n]=e.ti[n])},t.prototype.kl=function(t,e){return this.Ol+"/v1/"+e+":"+Hh[t]},t}()),Qh=function(){function t(){var t=this;this.Bl=function(){return t.ql()},this.Ul=function(){return t.Ql()},this.Kl=[],this.Wl()}return t.prototype.Xc=function(t){this.Kl.push(t)},t.prototype.pa=function(){window.removeEventListener("online",this.Bl),window.removeEventListener("offline",this.Ul)},t.prototype.Wl=function(){window.addEventListener("online",this.Bl),window.addEventListener("offline",this.Ul)},t.prototype.ql=function(){fr("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.Kl;t<e.length;t++)(0,e[t])(0)},t.prototype.Ql=function(){fr("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.Kl;t<e.length;t++)(0,e[t])(1)},t.kn=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),Yh=function(){function t(){}return t.prototype.Xc=function(t){},t.prototype.pa=function(){},t}(),Xh=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return Object(r.b)(this,void 0,void 0,function(){return Object(r.d)(this,function(e){switch(e.label){case 0:return this.serializer=Tu(t.Fl.t),this.kh=this.jl(t),this.persistence=this.Gl(t),[4,this.persistence.start()];case 1:return e.sent(),this.zl=this.Hl(t),this.Kc=this.Jl(t),[2]}})})},t.prototype.Hl=function(t){return null},t.prototype.Jl=function(t){return Ja(this.persistence,new Lh,t.Yl,this.serializer)},t.prototype.Gl=function(t){return new Bh(Gh.gl,this.serializer)},t.prototype.jl=function(t){return new Zc},t.prototype.terminate=function(){return Object(r.b)(this,void 0,void 0,function(){return Object(r.d)(this,function(t){switch(t.label){case 0:return this.zl&&this.zl.stop(),[4,this.kh.pa()];case 1:return t.sent(),[4,this.persistence.pa()];case 2:return t.sent(),[2]}})})},t}(),Jh=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Xl=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Object(r.c)(e,t),e.prototype.initialize=function(e){return Object(r.b)(this,void 0,void 0,function(){return Object(r.d)(this,function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,ac(this.Kc)];case 2:return n.sent(),[4,this.Xl.initialize(this,e)];case 3:return n.sent(),[4,Rh(this.Xl.gu)];case 4:return n.sent(),[4,Sc(this.Xl.Oh)];case 5:return n.sent(),[2]}})})},e.prototype.Jl=function(t){return Ja(this.persistence,new Lh,t.Yl,this.serializer)},e.prototype.Hl=function(t){return new Lu(this.persistence.Lr.Rr,t.rs)},e.prototype.Gl=function(t){var e=Ya(t.Fl.t,t.Fl.persistenceKey),n=void 0!==this.cacheSizeBytes?Ru.Tr(this.cacheSizeBytes):Ru.mr;return new Ga(this.synchronizeTabs,e,t.clientId,n,t.rs,ru(),iu(),this.serializer,this.kh,!!this.forceOwnership)},e.prototype.jl=function(t){return new Zc},e}(Xh),Zh=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Xl=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Object(r.c)(e,t),e.prototype.initialize=function(e){return Object(r.b)(this,void 0,void 0,function(){var n,i=this;return Object(r.d)(this,function(o){switch(o.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return o.sent(),n=this.Xl.gu,this.kh instanceof Jc?(this.kh.gu={_h:xh.bind(null,n),fh:Ph.bind(null,n),dh:Ch.bind(null,n),Ca:Sh.bind(null,n),lh:jh.bind(null,n)},[4,this.kh.start()]):[3,3];case 2:o.sent(),o.label=3;case 3:return[4,this.persistence._a(function(t){return Object(r.b)(i,void 0,void 0,function(){return Object(r.d)(this,function(e){switch(e.label){case 0:return[4,Ah(this.Xl.gu,t)];case 1:return e.sent(),this.zl&&(t&&!this.zl.yr?this.zl.start(this.Kc):t||this.zl.stop()),[2]}})})})];case 4:return o.sent(),[2]}})})},e.prototype.jl=function(t){var e=ru();if(!Jc.kn(e))throw new Nr(Ar.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Ya(t.Fl.t,t.Fl.persistenceKey);return new Jc(e,t.rs,n,t.clientId,t.Yl)},e}(Jh),$h=function(){function t(){}return t.prototype.initialize=function(t,e){return Object(r.b)(this,void 0,void 0,function(){var n=this;return Object(r.d)(this,function(r){switch(r.label){case 0:return this.Kc?[3,2]:(this.Kc=t.Kc,this.kh=t.kh,this.Wc=this.Zl(e),this.Oh=this.t_(e),this.Mh=this.e_(e),this.gu=this.n_(e,!t.synchronizeTabs),this.kh.Oc=function(t){return hh(n.gu,t,1)},this.Oh.jc.s_=Oh.bind(null,this.gu),[4,Vc(this.Oh,this.gu.Jh)]);case 1:r.sent(),r.label=2;case 2:return[2]}})})},t.prototype.e_=function(t){return new cu},t.prototype.Zl=function(t){var e=Tu(t.Fl.t),n=new Wh(t.Fl);return function(t,e,n){return new pc(t,e,n)}(t.credentials,n,e)},t.prototype.t_=function(t){var e,n,r,i,o,s=this;return e=this.Kc,n=this.Wc,r=t.rs,i=function(t){return hh(s.gu,t,0)},o=Qh.kn()?new Qh:new Yh,new vc(e,n,r,i,o)},t.prototype.n_=function(t,e){return function(t,e,n,r,i,o,s){var u=new ih(t,e,n,r,i,o);return s&&(u.Hh=!0),u}(this.Kc,this.Oh,this.Mh,this.kh,t.Yl,t.$h,e)},t.prototype.terminate=function(){return function(t){return Object(r.b)(this,void 0,void 0,function(){var e;return Object(r.d)(this,function(n){switch(n.label){case 0:return e=mr(t),fr("RemoteStore","RemoteStore shutting down."),e.Hc.add(5),[4,bc(e)];case 1:return n.sent(),e.Yc.pa(),e.Zc.set("Unknown"),[2]}})})}(this.Oh)},t}(),tl=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.i_(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.i_(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.r_=function(){this.muted=!0},t.prototype.i_=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},t}(),el=function(t){this.o_=t};function nl(t,e,n){if(!n)throw new Nr(Ar.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function rl(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Nr(Ar.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function il(t,e,n,r){if(!0===e&&!0===r)throw new Nr(Ar.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function ol(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":yr()}function sl(t,e){if(t instanceof el&&(t=t.o_),!(t instanceof e)){if(e.name===t.constructor.name)throw new Nr(Ar.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=ol(t);throw new Nr(Ar.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function ul(t,e){if(e<=0)throw new Nr(Ar.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var al=function(t){this.a_=t},cl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.c)(e,t),e.prototype.c_=function(t){if(2!==t.u_)throw t.h_(1===t.u_?this.a_+"() can only appear at the top level of your update data":this.a_+"() cannot be used with set() unless you pass {merge:true}");return t.Qe.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(al);function hl(t,e,n){return new Ll({u_:3,l_:e.settings.l_,methodName:t.a_,__:n},e.t,e.serializer,e.ignoreUndefinedProperties)}var ll=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.c)(e,t),e.prototype.c_=function(t){return new Uo(t.path,new So)},e.prototype.isEqual=function(t){return t instanceof e},e}(al),fl=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).f_=n,r}return Object(r.c)(e,t),e.prototype.c_=function(t){var e=hl(this,t,!0),n=this.f_.map(function(t){return Bl(t,e)}),r=new Po(n);return new Uo(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(al),pl=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).f_=n,r}return Object(r.c)(e,t),e.prototype.c_=function(t){var e=hl(this,t,!0),n=this.f_.map(function(t){return Bl(t,e)}),r=new Do(n);return new Uo(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(al),dl=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).d_=n,r}return Object(r.c)(e,t),e.prototype.c_=function(t){var e=new Lo(t.serializer,Xi(t.serializer,this.d_));return new Uo(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(al),vl=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new Nr(Ar.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Nr(Ar.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.w_=t,this.T_=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this.w_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this.T_},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.w_===t.w_&&this.T_===t.T_},t.prototype.toJSON=function(){return{latitude:this.w_,longitude:this.T_}},t.prototype.I=function(t){return _r(this.w_,t.w_)||_r(this.T_,t.T_)},t}(),yl=function(){function t(t){this.E_=t}return t.fromBase64String=function(e){try{return new t(Kr.fromBase64String(e))}catch(e){throw new Nr(Ar.INVALID_ARGUMENT,"Failed to construct Bytes from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(Kr.fromUint8Array(e))},t.prototype.toBase64=function(){return this.E_.toBase64()},t.prototype.toUint8Array=function(){return this.E_.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this.E_.isEqual(t.E_)},t}(),bl=new Map,ml=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Nr(Ar.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Nr(Ar.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,il("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}();function gl(){if("undefined"==typeof Uint8Array)throw new Nr(Ar.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function wl(){if("undefined"==typeof atob)throw new Nr(Ar.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var _l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.c)(e,t),e.fromBase64String=function(t){wl();try{return new e(Kr.fromBase64String(t))}catch(t){throw new Nr(Ar.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+t)}},e.fromUint8Array=function(t){return gl(),new e(Kr.fromUint8Array(t))},e.prototype.toBase64=function(){return wl(),t.prototype.toBase64.call(this)},e.prototype.toUint8Array=function(){return gl(),t.prototype.toUint8Array.call(this)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}(yl),El=function(){function t(){}return t.prototype.I_=function(t,e){switch(void 0===e&&(e="none"),Ni(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Mi(t.integerValue||t.doubleValue);case 3:return this.m_(t.timestampValue);case 4:return this.A_(t,e);case 5:return t.stringValue;case 6:return this.R_(Vi(t.bytesValue));case 7:return this.P_(t.referenceValue);case 8:return this.g_(t.geoPointValue);case 9:return this.V_(t.arrayValue,e);case 10:return this.y_(t.mapValue,e);default:throw yr()}},t.prototype.y_=function(t,e){var n=this,r={};return Tr(t.fields||{},function(t,i){r[t]=n.I_(i,e)}),r},t.prototype.g_=function(t){return new vl(Mi(t.latitude),Mi(t.longitude))},t.prototype.V_=function(t,e){var n=this;return(t.values||[]).map(function(t){return n.I_(t,e)})},t.prototype.A_=function(t,e){switch(e){case"previous":var n=ji(t);return null==n?null:this.I_(n,e);case"estimate":return this.m_(xi(t));default:return null}},t.prototype.m_=function(t){var e=Li(t);return new kr(e.seconds,e.nanos)},t.prototype.p_=function(t,e){var n=Cr.k(t);br(jo(n));var r=new cr(n.get(1),n.get(3)),i=new Lr(n.v(5));return r.isEqual(e)||pr("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}(),Ol=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(r.c)(e,t),e.prototype.R_=function(t){return new _l(t)},e.prototype.P_=function(t){var e=this.p_(t,this.firestore.v_);return Sf.b_(e,this.firestore,null)},e}(El),Il=function(){function t(t,e,n,r,i){this.S_=t,this.D_=e,this.C_=n,this.N_=r,this.x_=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this.C_.path.C()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Al(this.S_,this.x_,this.C_)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this.N_},t.prototype.data=function(){if(this.N_){if(this.x_){var t=new Tl(this.S_,this.D_,this.C_,this.N_,null);return this.x_.fromFirestore(t)}return this.D_.I_(this.N_.sn())}},t.prototype.get=function(t){if(this.N_){var e=this.N_.data().field(jl("DocumentSnapshot.get",t));if(null!==e)return this.D_.I_(e)}},t}(),Tl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.c)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(Il);function jl(t,e){return"string"==typeof e?Ql(t,e):e instanceof el?e.o_.F_:e.F_}var xl=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new Nr(Ar.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.F_=new Rr(t)}return t.prototype.isEqual=function(t){return this.F_.isEqual(t.F_)},t}(),Al=function(){function t(t,e,n){this.x_=e,this.C_=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"O_",{get:function(){return this.C_.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this.C_.path.C()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this.C_.path.M()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new kl(this.firestore,this.x_,this.C_.path.S())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this.C_)},t}(),Nl=function(){function t(t,e,n){this.x_=e,this.M_=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this.M_)},t}(),kl=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,ps(r))||this).firestore=e,i.O_=r,i.type="collection",i}return Object(r.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.M_.path.C()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.M_.path.M()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.O_.S();return t.T()?null:new Al(this.firestore,null,new Lr(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this.O_)},e}(Nl);function Sl(t){var e=t.k_(),n=Tu(t.v_);return new Ml(t.v_,!!e.ignoreUndefinedProperties,n)}var Pl=/^__.*__$/,Cl=function(){function t(t,e,n){this.data=t,this.Qe=e,this.fieldTransforms=n}return t.prototype.L_=function(t,e){var n=[];return n.push(null!==this.Qe?new Jo(t,this.data,this.Qe,e):new Xo(t,this.data,e)),this.fieldTransforms.length>0&&n.push(new $o(t,this.fieldTransforms)),n},t}(),Dl=function(){function t(t,e,n){this.data=t,this.Qe=e,this.fieldTransforms=n}return t.prototype.L_=function(t,e){var n=[new Jo(t,this.data,this.Qe,e)];return this.fieldTransforms.length>0&&n.push(new $o(t,this.fieldTransforms)),n},t}();function Rl(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw yr()}}var Ll=function(){function t(t,e,n,r,i,o){this.settings=t,this.t=e,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.B_(),this.fieldTransforms=i||[],this.Qe=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"u_",{get:function(){return this.settings.u_},enumerable:!1,configurable:!0}),t.prototype.q_=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.t,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.Qe)},t.prototype.U_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.q_({path:n,__:!1});return r.Q_(t),r},t.prototype.K_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.q_({path:n,__:!1});return r.B_(),r},t.prototype.W_=function(t){return this.q_({path:void 0,__:!0})},t.prototype.h_=function(t){return Yl(t,this.settings.methodName,this.settings.j_||!1,this.path,this.settings.l_)},t.prototype.contains=function(t){return void 0!==this.Qe.find(function(e){return t.N(e)})||void 0!==this.fieldTransforms.find(function(e){return t.N(e.field)})},t.prototype.B_=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.Q_(this.path.get(t))},t.prototype.Q_=function(t){if(0===t.length)throw this.h_("Document fields must not be empty");if(Rl(this.u_)&&Pl.test(t))throw this.h_('Document fields cannot begin and end with "__"')},t}(),Ml=function(){function t(t,e,n){this.t=t,this.ignoreUndefinedProperties=e,this.serializer=n||Tu(t)}return t.prototype.G_=function(t,e,n,r){return void 0===r&&(r=!1),new Ll({u_:t,methodName:e,l_:n,path:Rr.$(),__:!1,j_:r},this.t,this.serializer,this.ignoreUndefinedProperties)},t}();function Vl(t,e,n,r,i,o){void 0===o&&(o={});var s=t.G_(o.merge||o.mergeFields?2:0,e,n,i);Kl("Data must be an object, but it was:",s,r);var u,a,c=zl(r,s);if(o.merge)u=new Fo(s.Qe),a=s.fieldTransforms;else if(o.mergeFields){for(var h=[],l=0,f=o.mergeFields;l<f.length;l++){var p=Hl(e,f[l],n);if(!s.contains(p))throw new Nr(Ar.INVALID_ARGUMENT,"Field '"+p+"' is specified in your field mask but missing from your input data.");Xl(h,p)||h.push(p)}u=new Fo(h),a=s.fieldTransforms.filter(function(t){return u.He(t.field)})}else u=null,a=s.fieldTransforms;return new Cl(new is(c),u,a)}function Fl(t,e,n,r){var i=t.G_(1,e,n);Kl("Data must be an object, but it was:",i,r);var o=[],s=new os;Tr(r,function(t,r){var u=Ql(e,t,n);r instanceof el&&(r=r.o_);var a=i.K_(u);if(r instanceof cl)o.push(u);else{var c=Bl(r,a);null!=c&&(o.push(u),s.set(u,c))}});var u=new Fo(o);return new Dl(s.Ye(),u,i.fieldTransforms)}function Ul(t,e,n,r,i,o){var s=t.G_(1,e,n),u=[Hl(e,r,n)],a=[i];if(o.length%2!=0)throw new Nr(Ar.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)u.push(Hl(e,o[c])),a.push(o[c+1]);for(var h=[],l=new os,f=u.length-1;f>=0;--f)if(!Xl(h,u[f])){var p=u[f],d=a[f];d instanceof el&&(d=d.o_);var v=s.K_(p);if(d instanceof cl)h.push(p);else{var y=Bl(d,v);null!=y&&(h.push(p),l.set(p,y))}}var b=new Fo(h);return new Dl(l.Ye(),b,s.fieldTransforms)}function ql(t,e,n,r){return void 0===r&&(r=!1),Bl(n,t.G_(r?4:3,e))}function Bl(t,e){if(t instanceof el&&(t=t.o_),Gl(t))return Kl("Unsupported field value:",e,t),zl(t,e);if(t instanceof al)return function(t,e){if(!Rl(e.u_))throw e.h_(t.a_+"() can only be used with update() and set()");if(!e.path)throw e.h_(t.a_+"() is not currently supported inside arrays");var n=t.c_(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(e.path&&e.Qe.push(e.path),t instanceof Array){if(e.settings.__&&4!==e.u_)throw e.h_("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=Bl(o[i],e.W_(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(t instanceof el&&(t=t.o_),null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Xi(e.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=kr.fromDate(t);return{timestampValue:Ji(e.serializer,n)}}if(t instanceof kr){var r=new kr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Ji(e.serializer,r)}}if(t instanceof vl)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof yl)return{bytesValue:Zi(e.serializer,t.E_)};if(t instanceof Al){var i=e.t,o=t.firestore.v_;if(!o.isEqual(i))throw e.h_("Document reference is for database "+o.projectId+"/"+o.database+" but should be for database "+i.projectId+"/"+i.database);return{referenceValue:eo(t.firestore.v_||e.t,t.C_.path)}}if(void 0===t&&e.ignoreUndefinedProperties)return null;throw e.h_("Unsupported field value: "+ol(t))}(t,e)}function zl(t,e){var n={};return jr(t)?e.path&&e.path.length>0&&e.Qe.push(e.path):Tr(t,function(t,r){var i=Bl(r,e.U_(t));null!=i&&(n[t]=i)}),{mapValue:{fields:n}}}function Gl(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof kr||t instanceof vl||t instanceof yl||t instanceof Al||t instanceof al)}function Kl(t,e,n){if(!Gl(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=ol(n);throw e.h_("an object"===r?t+" a custom object":t+" "+r)}}function Hl(t,e,n){if(e instanceof el&&(e=e.o_),e instanceof xl)return e.F_;if("string"==typeof e)return Ql(t,e);throw Yl("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var Wl=new RegExp("[~\\*/\\[\\]]");function Ql(t,e,n){if(e.search(Wl)>=0)throw Yl("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(xl.bind.apply(xl,Object(r.g)([void 0],e.split("."))))).F_}catch(i){throw Yl("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function Yl(t,e,n,r,i){var o=r&&!r.T(),s=void 0!==i,u="Function "+e+"() called with invalid data";n&&(u+=" (via `toFirestore()`)");var a="";return(o||s)&&(a+=" (found",o&&(a+=" in field "+r),s&&(a+=" in document "+i),a+=")"),new Nr(Ar.INVALID_ARGUMENT,(u+=". ")+t+a)}function Xl(t,e){return t.some(function(t){return t.isEqual(e)})}var Jl=function(){function t(t){this.Wc=t,this.z_=new Map,this.mutations=[],this.H_=!1,this.J_=null,this.Y_=new Set}return t.prototype.X_=function(t){return Object(r.b)(this,void 0,void 0,function(){var e,n=this;return Object(r.d)(this,function(i){switch(i.label){case 0:if(this.Z_(),this.mutations.length>0)throw new Nr(Ar.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return Object(r.b)(this,void 0,void 0,function(){var n,i,o,s,u,a;return Object(r.d)(this,function(r){switch(r.label){case 0:return n=mr(t),i=uo(n.serializer)+"/documents",o={documents:e.map(function(t){return ro(n.serializer,t)})},[4,n.Fc("BatchGetDocuments",i,o)];case 1:return s=r.sent(),u=new Map,s.forEach(function(t){var e=function(t,e){return"found"in e?function(t,e){br(!!e.found);var n=io(t,e.found.name),r=to(e.found.updateTime),i=new is({mapValue:{fields:e.found.fields}});return new as(n,r,i,{})}(t,e):"missing"in e?function(t,e){br(!!e.missing),br(!!e.readTime);var n=io(t,e.missing),r=to(e.readTime);return new cs(n,r)}(t,e):yr()}(n.serializer,t);u.set(e.key.toString(),e)}),a=[],[2,(e.forEach(function(t){var e=u.get(t.toString());br(!!e),a.push(e)}),a)]}})})}(this.Wc,t)];case 1:return[2,((e=i.sent()).forEach(function(t){t instanceof cs||t instanceof as?n.tf(t):yr()}),e)]}})})},t.prototype.set=function(t,e){this.write(e.L_(t,this.je(t))),this.Y_.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.L_(t,this.ef(t)))}catch(t){this.J_=t}this.Y_.add(t.toString())},t.prototype.delete=function(t){this.write([new ns(t,this.je(t))]),this.Y_.add(t.toString())},t.prototype.commit=function(){return Object(r.b)(this,void 0,void 0,function(){var t,e=this;return Object(r.d)(this,function(n){switch(n.label){case 0:if(this.Z_(),this.J_)throw this.J_;return t=this.z_,this.mutations.forEach(function(e){t.delete(e.key.toString())}),t.forEach(function(t,n){var r=Lr.K(n);e.mutations.push(new rs(r,e.je(r)))}),[4,function(t,e){return Object(r.b)(this,void 0,void 0,function(){var n,i,o;return Object(r.d)(this,function(r){switch(r.label){case 0:return n=mr(t),i=uo(n.serializer)+"/documents",o={writes:e.map(function(t){return ho(n.serializer,t)})},[4,n.xc("Commit",i,o)];case 1:return r.sent(),[2]}})})}(this.Wc,this.mutations)];case 1:return n.sent(),this.H_=!0,[2]}})})},t.prototype.tf=function(t){var e;if(t instanceof as)e=t.version;else{if(!(t instanceof cs))throw yr();e=Sr.min()}var n=this.z_.get(t.key.toString());if(n){if(!e.isEqual(n))throw new Nr(Ar.ABORTED,"Document version changed between two reads.")}else this.z_.set(t.key.toString(),e)},t.prototype.je=function(t){var e=this.z_.get(t.toString());return!this.Y_.has(t.toString())&&e?Bo.updateTime(e):Bo.Ge()},t.prototype.ef=function(t){var e=this.z_.get(t.toString());if(!this.Y_.has(t.toString())&&e){if(e.isEqual(Sr.min()))throw new Nr(Ar.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Bo.updateTime(e)}return Bo.exists(!0)},t.prototype.write=function(t){this.Z_(),this.mutations=this.mutations.concat(t)},t.prototype.Z_=function(){},t}(),Zl=function(){function t(t,e,n,r){this.rs=t,this.Wc=e,this.updateFunction=n,this.us=r,this.nf=5,this.Ps=new Hs(this.rs,"transaction_retry")}return t.prototype.run=function(){this.sf()},t.prototype.sf=function(){var t=this;this.Ps.An(function(){return Object(r.b)(t,void 0,void 0,function(){var t,e,n=this;return Object(r.d)(this,function(r){return t=new Jl(this.Wc),(e=this.rf(t))&&e.then(function(e){n.rs.fs(function(){return t.commit().then(function(){n.us.resolve(e)}).catch(function(t){n.af(t)})})}).catch(function(t){n.af(t)}),[2]})})})},t.prototype.rf=function(t){try{var e=this.updateFunction(t);return!Mr(e)&&e.catch&&e.then?e:(this.us.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.us.reject(t),null}},t.prototype.af=function(t){var e=this;this.nf>0&&this.cf(t)?(this.nf-=1,this.rs.fs(function(){return e.sf(),Promise.resolve()})):this.us.reject(t)},t.prototype.cf=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!Xr(e)}return!1},t}(),$l=function(){function t(t,e,n){var r=this;this.credentials=t,this.rs=e,this.Fl=n,this.user=yu.UNAUTHENTICATED,this.clientId=wr.u(),this.uf=function(){},this.oi=new Ks,this.credentials.si(function(t){fr("FirestoreClient","Received user=",t.uid),r.user.isEqual(t)||(r.user=t,r.uf(t)),r.oi.resolve()})}return t.prototype.getConfiguration=function(){return Object(r.b)(this,void 0,void 0,function(){return Object(r.d)(this,function(t){switch(t.label){case 0:return[4,this.oi.promise];case 1:return[2,(t.sent(),{rs:this.rs,Fl:this.Fl,clientId:this.clientId,credentials:this.credentials,Yl:this.user,$h:100})]}})})},t.prototype.hf=function(t){var e=this;this.uf=t,this.oi.promise.then(function(){return e.uf(e.user)})},t.prototype.lf=function(){if(this.rs.Vs)throw new Nr(Ar.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.rs.bs();var e=new Ks;return this.rs.ys(function(){return Object(r.b)(t,void 0,void 0,function(){var t,n;return Object(r.d)(this,function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this._f?[4,this._f.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.ff?[4,this.ff.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.ii(),e.resolve(),[3,6];case 5:return t=r.sent(),n=uu(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}})})}),e.promise},t}();function tf(t,e){return Object(r.b)(this,void 0,void 0,function(){var n,i=this;return Object(r.d)(this,function(o){switch(o.label){case 0:return t.rs.Ns(),fr("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),t.hf(function(n){return t.rs.Ss(function(){return Object(r.b)(i,void 0,void 0,function(){return Object(r.d)(this,function(t){switch(t.label){case 0:return[4,Za(e.Kc,n)];case 1:return t.sent(),[2]}})})})}),e.persistence.fa(function(){return t.terminate()}),t.ff=e,[2]}})})}function ef(t,e){return Object(r.b)(this,void 0,void 0,function(){var n,i;return Object(r.d)(this,function(o){switch(o.label){case 0:return t.rs.Ns(),[4,nf(t)];case 1:return n=o.sent(),fr("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return i=o.sent(),[4,e.initialize(n,i)];case 3:return o.sent(),t.hf(function(n){return t.rs.Ss(function(){return function(t,e){return Object(r.b)(this,void 0,void 0,function(){var n,i;return Object(r.d)(this,function(r){switch(r.label){case 0:return(n=mr(t)).rs.Ns(),fr("RemoteStore","RemoteStore received new credentials"),i=Ic(n),n.Hc.add(3),[4,bc(n)];case 1:return r.sent(),i&&n.Zc.set("Unknown"),[4,n.jc.s_(e)];case 2:return r.sent(),n.Hc.delete(3),[4,yc(n)];case 3:return r.sent(),[2]}})})}(e.Oh,n)})}),t._f=e,[2]}})})}function nf(t){return Object(r.b)(this,void 0,void 0,function(){return Object(r.d)(this,function(e){switch(e.label){case 0:return t.ff?[3,2]:(fr("FirestoreClient","Using default OfflineComponentProvider"),[4,tf(t,new Xh)]);case 1:e.sent(),e.label=2;case 2:return[2,t.ff]}})})}function rf(t){return Object(r.b)(this,void 0,void 0,function(){return Object(r.d)(this,function(e){switch(e.label){case 0:return t._f?[3,2]:(fr("FirestoreClient","Using default OnlineComponentProvider"),[4,ef(t,new $h)]);case 1:e.sent(),e.label=2;case 2:return[2,t._f]}})})}function of(t){return nf(t).then(function(t){return t.persistence})}function sf(t){return nf(t).then(function(t){return t.Kc})}function uf(t){return rf(t).then(function(t){return t.Oh})}function af(t){return rf(t).then(function(t){return t.gu})}function cf(t){return Object(r.b)(this,void 0,void 0,function(){var e,n;return Object(r.d)(this,function(r){switch(r.label){case 0:return[4,rf(t)];case 1:return e=r.sent(),[2,((n=e.Mh).Ls=oh.bind(null,e.gu),n.Us=uh.bind(null,e.gu),n)]}})})}function hf(t,e){var n=this,i=new Ks;return t.rs.fs(function(){return Object(r.b)(n,void 0,void 0,function(){var n;return Object(r.d)(this,function(r){switch(r.label){case 0:return n=ah,[4,af(t)];case 1:return[2,n.apply(void 0,[r.sent(),e,i])]}})})}),i.promise}function lf(t,e,n){return Object(r.b)(this,void 0,void 0,function(){var i,o,s;return Object(r.d)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t,e){var n=mr(t);return n.persistence.runTransaction("read document","readonly",function(t){return n.Ga.Oi(t,e)})}(t,e)];case 1:return(i=r.sent())instanceof as?n.resolve(i):i instanceof cs?n.resolve(null):n.reject(new Nr(Ar.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return o=r.sent(),s=uu(o,"Failed to get document '"+e+" from cache"),n.reject(s),[3,3];case 3:return[2]}})})}function ff(t,e,n,r,i){var o=new tl({next:function(o){e.fs(function(){return lu(t,s)});var u=o.docs.has(n);!u&&o.fromCache?i.reject(new Nr(Ar.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&o.fromCache&&r&&"server"===r.source?i.reject(new Nr(Ar.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new vu(ps(n.path),o,{includeMetadataChanges:!0,Hs:!0});return hu(t,s)}var pf=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).yf=new su,r.df="name"in e?e.name:"[DEFAULT]",r}return Object(r.c)(e,t),e.prototype.Vf=function(){return this.pf||Af(this),this.pf.terminate()},e}(function(){function t(t,e){this.df="(lite)",this.wf=new ml({}),this.Tf=!1,t instanceof cr?(this.v_=t,this.Ef=new mu):(this.If=t,this.v_=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Nr(Ar.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new cr(t.options.projectId)}(t),this.Ef=new gu(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this.If)throw new Nr(Ar.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.If},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mf",{get:function(){return this.Tf},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Af",{get:function(){return void 0!==this.Rf},enumerable:!1,configurable:!0}),t.prototype.Pf=function(t){if(this.Tf)throw new Nr(Ar.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this.wf=new ml(t),void 0!==t.credentials&&(this.Ef=function(t){if(!t)return new mu;switch(t.type){case"gapi":var e=t.client;return br(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new _u(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new Nr(Ar.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype.gf=function(){return this.wf},t.prototype.k_=function(){return this.Tf=!0,this.wf},t.prototype._delete=function(){return this.Rf||(this.Rf=this.Vf()),this.Rf},t.prototype.Vf=function(){return function(t){var e=bl.get(t);e&&(fr("ComponentProvider","Removing Datastore"),bl.delete(t),e.terminate())}(this),Promise.resolve()},t}());function df(t,e,n){var i=this,o=new Ks;return t.rs.enqueue(function(){return Object(r.b)(i,void 0,void 0,function(){var i;return Object(r.d)(this,function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),[4,tf(t,n)];case 1:return r.sent(),[4,ef(t,e)];case 2:return r.sent(),o.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===Ar.FAILED_PRECONDITION||t.code===Ar.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(i=r.sent()))throw i;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i),o.reject(i),[3,4];case 4:return[2]}})})}).then(function(){return o.promise})}function vf(t){if(t.mf||t.Af)throw new Nr(Ar.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var yf=function(t){function e(e,n,r,i,o,s){var u=this;return(u=t.call(this,e,n,r,i,s)||this).S_=e,u.vf=e,u.metadata=o,u}return Object(r.c)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this.N_){if(this.x_){var e=new bf(this.S_,this.D_,this.C_,this.N_,this.metadata,null);return this.x_.fromFirestore(e,t)}return this.D_.I_(this.N_.sn(),t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this.N_){var n=this.N_.data().field(jl("DocumentSnapshot.get",t));if(null!==n)return this.D_.I_(n,e.serverTimestamps)}},e}(Il),bf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.c)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(yf),mf=function(){function t(t,e,n,r){this.S_=t,this.D_=e,this.bf=r,this.metadata=new Cf(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.bf.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this.bf.docs.forEach(function(r){t.call(e,new bf(n.S_,n.D_,r.key,r,new Cf(n.bf.Qt.has(r.key),n.bf.fromCache),n.query.x_))})},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this.bf.Wt)throw new Nr(Ar.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.Sf&&this.Df===e||(this.Sf=function(t,e){if(t.bf.Ut.T()){var n=0;return t.bf.docChanges.map(function(e){return{type:"added",doc:new bf(t.S_,t.D_,e.doc.key,e.doc,new Cf(t.bf.Qt.has(e.doc.key),t.bf.fromCache),t.query.x_),oldIndex:-1,newIndex:n++}})}var r=t.bf.Ut;return t.bf.docChanges.filter(function(t){return e||3!==t.type}).map(function(e){var n=new bf(t.S_,t.D_,e.doc.key,e.doc,new Cf(t.bf.Qt.has(e.doc.key),t.bf.fromCache),t.query.x_),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:gf(e.type),doc:n,oldIndex:i,newIndex:o}})}(this,e),this.Df=e),this.Sf},t}();function gf(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return yr()}}function wf(t,e){return t instanceof yf&&e instanceof yf?t.S_===e.S_&&t.C_.isEqual(e.C_)&&(null===t.N_?null===e.N_:t.N_.isEqual(e.N_))&&t.x_===e.x_:t instanceof mf&&e instanceof mf&&t.S_===e.S_&&function(t,e){return t instanceof Nl&&e instanceof Nl&&t.firestore===e.firestore&&Is(t.M_,e.M_)&&t.x_===e.x_}(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t.bf.isEqual(e.bf)}var _f=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(r.c)(e,t),e.prototype.R_=function(t){return new yl(t)},e.prototype.P_=function(t){var e=this.p_(t,this.firestore.v_);return new Al(this.firestore,null,e)},e}(El);function Ef(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o=sl(t.firestore,pf),s=Sl(o);return e instanceof el&&(e=e.o_),Of(o,("string"==typeof e||e instanceof xl?Ul(s,"updateDoc",t.C_,e,n,r):Fl(s,"updateDoc",t.C_,e)).L_(t.C_,Bo.exists(!0)))}function Of(t,e){return hf(xf(t),e)}function If(t,e,n){var r=n.docs.get(e.C_),i=new _f(t);return new yf(t,i,e.C_,r,new Cf(n.hasPendingWrites,n.fromCache),e.x_)}var Tf=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){vf(t);var n=xf(t),r=t.k_(),i=new $h;return df(n,i,new Jh(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t.o_,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){vf(t);var e=xf(t),n=t.k_(),r=new $h;return df(e,r,new Zh(r,n.cacheSizeBytes))}(t.o_)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t.mf&&!t.Af)throw new Nr(Ar.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new Ks;return t.yf.ys(function(){return Object(r.b)(e,void 0,void 0,function(){var e;return Object(r.d)(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,function(t){return Object(r.b)(this,void 0,void 0,function(){return Object(r.d)(this,function(e){switch(e.label){case 0:return Qs.kn()?[4,Qs.delete(t+"main")]:[2,Promise.resolve()];case 1:return e.sent(),[2]}})})}(Ya(t.v_,t.df))];case 1:return i.sent(),n.resolve(),[3,3];case 2:return e=i.sent(),n.reject(e),[3,3];case 3:return[2]}})})}),n.promise}(t.o_)},t}(),jf=function(t){function e(e,n,r){var i=this;return(i=t.call(this,n)||this).Cf=r,i.INTERNAL={delete:function(){return i.terminate()}},e instanceof cr||(i.Nf=e),i}return Object(r.c)(e,t),Object.defineProperty(e.prototype,"v_",{get:function(){return this.o_.v_},enumerable:!1,configurable:!0}),e.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this.o_.gf()),t)).merge,this.o_.Pf(t)},e.prototype.useEmulator=function(t,e){"firestore.googleapis.com"!==this.o_.gf().host&&dr("Host has been set in both settings() and useEmulator(), emulator host will be used"),this.settings({host:t+":"+e,ssl:!1,merge:!0})},e.prototype.enableNetwork=function(){return function(t){var e=this;return t.rs.enqueue(function(){return Object(r.b)(e,void 0,void 0,function(){var e,n;return Object(r.d)(this,function(r){switch(r.label){case 0:return[4,of(t)];case 1:return e=r.sent(),[4,uf(t)];case 2:return n=r.sent(),[2,(e.da(!0),function(t){var e=mr(t);return e.Hc.delete(0),yc(e)}(n))]}})})})}(xf(this.o_))},e.prototype.disableNetwork=function(){return function(t){var e=this;return t.rs.enqueue(function(){return Object(r.b)(e,void 0,void 0,function(){var e,n;return Object(r.d)(this,function(i){switch(i.label){case 0:return[4,of(t)];case 1:return e=i.sent(),[4,uf(t)];case 2:return n=i.sent(),[2,(e.da(!1),function(t){return Object(r.b)(this,void 0,void 0,function(){var e;return Object(r.d)(this,function(n){switch(n.label){case 0:return(e=mr(t)).Hc.add(0),[4,bc(e)];case 1:return n.sent(),e.Zc.set("Offline"),[2]}})})}(n))]}})})})}(xf(this.o_))},e.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&il("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Cf.enableMultiTabIndexedDbPersistence(this):this.Cf.enableIndexedDbPersistence(this,n)},e.prototype.clearPersistence=function(){return this.Cf.clearIndexedDbPersistence(this)},e.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.app._removeServiceInstance("firestore-exp"),this.o_._delete()},e.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new Ks;return t.rs.fs(function(){return Object(r.b)(e,void 0,void 0,function(){var e;return Object(r.d)(this,function(r){switch(r.label){case 0:return e=dh,[4,af(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}})})}),n.promise}(xf(this.o_))},e.prototype.onSnapshotsInSync=function(t){return function(t,e){var n=this,i=xf(t),o=ju(e)?e:{next:e},s=new tl(o);return t.yf.fs(function(){return Object(r.b)(n,void 0,void 0,function(){var t;return Object(r.d)(this,function(e){switch(e.label){case 0:return t=function(t,e){mr(t).$s.add(e),e.next()},[4,cf(i)];case 1:return t.apply(void 0,[e.sent(),s]),[2]}})})}),function(){s.r_(),t.yf.fs(function(){return Object(r.b)(n,void 0,void 0,function(){var t;return Object(r.d)(this,function(e){switch(e.label){case 0:return t=function(t,e){mr(t).$s.delete(e)},[4,cf(i)];case 1:return t.apply(void 0,[e.sent(),s]),[2]}})})})}}(this.o_,t)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this.Nf)throw new Nr(Ar.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Nf},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){return nl("Firestore.collection","path",t),xf(this.o_),new zf(Cr.k(t),this,null)},e.prototype.doc=function(t){return nl("Firestore.doc","path",t),xf(this.o_),Sf.xf(Cr.k(t),this,null)},e.prototype.collectionGroup=function(t){if(nl("Firestore.collectionGroup","collectionId",t),t.indexOf("/")>=0)throw new Nr(Ar.INVALID_ARGUMENT,"Invalid collection ID '"+t+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return xf(this.o_),new Uf(function(t){return new ls(Cr.$(),t)}(t),this,null)},e.prototype.runTransaction=function(t){var e=this;return function(t,e){var n=this,i=new Ks;return t.rs.fs(function(){return Object(r.b)(n,void 0,void 0,function(){var n;return Object(r.d)(this,function(r){switch(r.label){case 0:return[4,function(t){return rf(t).then(function(t){return t.Wc})}(t)];case 1:return n=r.sent(),new Zl(t.rs,n,e,i).run(),[2]}})})}),i.promise}(xf(this.o_),function(n){return t(new Nf(e,n))})},e.prototype.batch=function(){return xf(this.o_),new kf(this)},e}(el);function xf(t){return t.pf||Af(t),t.pf.lf(),t.pf}function Af(t){var e=t.k_(),n=function(t,e,n){return new ar(t,e,n.host,n.ssl,n.experimentalForceLongPolling,n.experimentalAutoDetectLongPolling)}(t.v_,t.df,e);t.pf=new $l(t.Ef,t.yf,n)}var Nf=function(){function t(t,e){this.S_=t,this.Ff=e,this.Of=Sl(this.S_.o_)}return t.prototype.get=function(t){var e=this,n=Gf(0,t,this.S_),r=new Ol(this.S_);return this.Ff.X_([n.C_]).then(function(t){if(!t||1!==t.length)return yr();var i=t[0];if(i instanceof cs)return new Df(e.S_,new yf(e.S_.o_,r,n.C_,null,new Cf(!1,!1),n.x_));if(i instanceof as)return new Df(e.S_,new yf(e.S_.o_,r,n.C_,i,new Cf(!1,!1),n.x_));throw yr()})},t.prototype.set=function(t,e,n){var r=Gf(0,t,this.S_);n=rl("Transaction.set",n);var i=Kf(r.x_,e,n),o=Vl(this.Of,"Transaction.set",r.C_,i,null!==r.x_,n);return this.Ff.set(r.C_,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=Gf(0,t,this.S_);return e instanceof el&&(e=e.o_),o="string"==typeof e||e instanceof xl?Ul(this.Of,"Transaction.update",s.C_,e,n,r):Fl(this.Of,"Transaction.update",s.C_,e),this.Ff.update(s.C_,o),this},t.prototype.delete=function(t){var e=Gf(0,t,this.S_);return this.Ff.delete(e.C_),this},t}(),kf=function(){function t(t){this.S_=t,this.Mf=[],this.kf=!1,this.Of=Sl(this.S_.o_)}return t.prototype.set=function(t,e,n){this.$f();var r=Gf(0,t,this.S_);n=rl("WriteBatch.set",n);var i=Kf(r.x_,e,n),o=Vl(this.Of,"WriteBatch.set",r.C_,i,null!==r.x_,n);return this.Mf=this.Mf.concat(o.L_(r.C_,Bo.Ge())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this.$f();var o,s=Gf(0,t,this.S_);return e instanceof el&&(e=e.o_),o="string"==typeof e||e instanceof xl?Ul(this.Of,"WriteBatch.update",s.C_,e,n,r):Fl(this.Of,"WriteBatch.update",s.C_,e),this.Mf=this.Mf.concat(o.L_(s.C_,Bo.exists(!0))),this},t.prototype.delete=function(t){this.$f();var e=Gf(0,t,this.S_);return this.Mf=this.Mf.concat(new ns(e.C_,Bo.Ge())),this},t.prototype.commit=function(){return this.$f(),this.kf=!0,this.Mf.length>0?hf(xf(this.S_.o_),this.Mf):Promise.resolve()},t.prototype.$f=function(){if(this.kf)throw new Nr(Ar.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}(),Sf=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r.D_=new Ol(e),r}return Object(r.c)(e,t),e.xf=function(t,n,r){if(t.length%2!=0)throw new Nr(Ar.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.M()+" has "+t.length);return new e(n,new Al(n.o_,r,new Lr(t)))},e.b_=function(t,n,r){return new e(n,new Al(n.o_,r,t))},Object.defineProperty(e.prototype,"id",{get:function(){return this.o_.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new zf(this.o_.O_.S(),this.firestore,this.o_.x_)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.o_.path},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){if(nl("DocumentReference.collection","path",t),!t)throw new Nr(Ar.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var e=Cr.k(t);return new zf(this.o_.O_.child(e),this.firestore,null)},e.prototype.isEqual=function(t){return t instanceof el&&(t=t.o_),t instanceof Al&&(n=t,((e=this.o_)instanceof Al||e instanceof kl)&&(n instanceof Al||n instanceof kl)&&e.firestore===n.firestore&&e.path===n.path&&e.x_===n.x_);var e,n},e.prototype.set=function(t,e){e=rl("DocumentReference.set",e);try{return function(t,e,n){var r=sl(t.firestore,pf),i=Kf(t.x_,e,n);return Of(r,Vl(Sl(r),"setDoc",t.C_,i,null!==t.x_,n).L_(t.C_,Bo.Ge()))}(this.o_,t,e)}catch(t){throw Pf(t,"setDoc","DocumentReference.set")}},e.prototype.update=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];try{return 1===arguments.length?Ef(this.o_,t):Ef.apply(void 0,Object(r.g)([this.o_,t,e],n))}catch(t){throw Pf(t,"updateDoc","DocumentReference.update")}},e.prototype.delete=function(){return Of(sl((t=this.o_).firestore,pf),[new ns(t.C_,Bo.Ge())]);var t},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var i=function(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!ju(r))return r}return{}}(e),o=function(e,n){var r,i,o;return{next:function(e){o.next&&o.next(function(e){return new Df(t.firestore,new yf(t.firestore.o_,t.D_,e.C_,e.N_,e.metadata,t.o_.x_))}(e))},error:null===(r=(o=ju(e[0])?e[0]:ju(e[1])?e[1]:"function"==typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===r?void 0:r.bind(o),complete:null===(i=o.complete)||void 0===i?void 0:i.bind(o)}}(e);return function(t){for(var e,n,i,o=this,s=[],u=1;u<arguments.length;u++)s[u-1]=arguments[u];var a={includeMetadataChanges:!1},c=0;"object"!=typeof s[c]||ju(s[c])||(a=s[c],c++);var h,l,f,p={includeMetadataChanges:a.includeMetadataChanges};if(ju(s[c])){var d=s[c];s[c]=null===(e=d.next)||void 0===e?void 0:e.bind(d),s[c+1]=null===(n=d.error)||void 0===n?void 0:n.bind(d),s[c+2]=null===(i=d.complete)||void 0===i?void 0:i.bind(d)}if(t instanceof Al)l=sl(t.firestore,pf),f=ps(t.C_.path),h={next:function(e){s[c]&&s[c](If(l,t,e))},error:s[c+1],complete:s[c+2]};else{l=sl(t.firestore,pf),f=t.M_;var v=new _f(l);h={next:function(e){s[c]&&s[c](new mf(l,v,t,e))},error:s[c+1],complete:s[c+2]},Ff(t.M_)}var y=xf(l),b=new tl(h),m=new vu(f,b,p);return l.yf.fs(function(){return Object(r.b)(o,void 0,void 0,function(){var t;return Object(r.d)(this,function(e){switch(e.label){case 0:return t=hu,[4,cf(y)];case 1:return[2,t.apply(void 0,[e.sent(),m])]}})})}),function(){b.r_(),l.yf.fs(function(){return Object(r.b)(o,void 0,void 0,function(){var t;return Object(r.d)(this,function(e){switch(e.label){case 0:return t=lu,[4,cf(y)];case 1:return[2,t.apply(void 0,[e.sent(),m])]}})})})}}(this.o_,i,o)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){var e=this,n=sl(t.firestore,pf),i=xf(n),o=new _f(n),s=new Ks;return n.yf.fs(function(){return Object(r.b)(e,void 0,void 0,function(){return Object(r.d)(this,function(e){switch(e.label){case 0:return[4,sf(i)];case 1:return[4,lf(e.sent(),t.C_,s)];case 2:return e.sent(),[2]}})})}),s.promise.then(function(e){return new yf(n,o,t.C_,e,new Cf(e instanceof as&&e.Je,!0),t.x_)})}(this.o_):"server"===(null==t?void 0:t.source)?function(t){var e=this,n=sl(t.firestore,pf),i=xf(n),o=new Ks;return n.yf.fs(function(){return Object(r.b)(e,void 0,void 0,function(){return Object(r.d)(this,function(e){switch(e.label){case 0:return[4,cf(i)];case 1:return[4,ff(e.sent(),n.yf,t.C_,{source:"server"},o)];case 2:return e.sent(),[2]}})})}),o.promise.then(function(e){return If(n,t,e)})}(this.o_):function(t){var e=this,n=sl(t.firestore,pf),i=xf(n),o=new Ks;return n.yf.fs(function(){return Object(r.b)(e,void 0,void 0,function(){return Object(r.d)(this,function(e){switch(e.label){case 0:return[4,cf(i)];case 1:return[4,ff(e.sent(),n.yf,t.C_,{source:"default"},o)];case 2:return e.sent(),[2]}})})}),o.promise.then(function(e){return If(n,t,e)})}(this.o_)).then(function(t){return new Df(e.firestore,new yf(e.firestore.o_,e.D_,t.C_,t.N_,t.metadata,e.o_.x_))})},e.prototype.withConverter=function(t){return new e(this.firestore,this.o_.withConverter(t))},e}(el);function Pf(t,e,n){return t.message=t.message.replace(e+"()",n+"()"),t}var Cf=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Df=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).S_=e,r}return Object(r.c)(e,t),Object.defineProperty(e.prototype,"ref",{get:function(){return new Sf(this.S_,this.o_.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this.o_.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this.o_.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return this.o_.exists()},enumerable:!1,configurable:!0}),e.prototype.data=function(t){return this.o_.data(t)},e.prototype.get=function(t,e){return this.o_.get(t,e)},e.prototype.isEqual=function(t){return wf(this.o_,t.o_)},e}(el),Rf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.c)(e,t),e.prototype.data=function(t){return this.o_.data(t)},e}(Df);function Lf(t,e,n){if(n instanceof el&&(n=n.o_),"string"==typeof n){if(""===n)throw new Nr(Ar.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!ms(e)&&-1!==n.indexOf("/"))throw new Nr(Ar.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(Cr.k(n));if(!Lr.G(r))throw new Nr(Ar.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return Fi(t,new Lr(r))}if(n instanceof Al)return Fi(t,n.C_);throw new Nr(Ar.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+ol(n)+".")}function Mf(t,e){if(!Array.isArray(t)||0===t.length)throw new Nr(Ar.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new Nr(Ar.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function Vf(t,e,n){if(!n.isEqual(e))throw new Nr(Ar.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}function Ff(t){if(vs(t)&&0===t.rn.length)throw new Nr(Ar.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Uf=function(){function t(t,e,n){this.M_=t,this.firestore=e,this.x_=n,this.Lf=Sl(e.o_),this.D_=new Ol(e)}return t.prototype.where=function(e,n,r){var i=Hl("Query.where",e),o=function(t,e,n,r,i,o,s){var u;if(i.B()){if("array-contains"===o||"array-contains-any"===o)throw new Nr(Ar.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){Mf(s,o);for(var a=[],c=0,h=s;c<h.length;c++)a.push(Lf(r,t,h[c]));u={arrayValue:{values:a}}}else u=Lf(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||Mf(s,o),u=ql(n,"Query.where",s,"in"===o||"not-in"===o);var l=Ns.create(i,o,u);return function(t,e){if(e.cn()){var n=bs(t);if(null!==n&&!n.isEqual(e.field))throw new Nr(Ar.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=ys(t);null!==r&&Vf(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw new Nr(Ar.INVALID_ARGUMENT,i===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,l),l}(this.M_,0,this.Lf,this.firestore.v_,i,n,r);return new t(function(t,e){var n=t.filters.concat([e]);return new ls(t.path,t.collectionGroup,t.rn.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(this.M_,o),this.firestore,this.x_)},t.prototype.orderBy=function(e,n){var r;if(void 0===n||"asc"===n)r="asc";else{if("desc"!==n)throw new Nr(Ar.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+n+"', expected 'asc' or 'desc'.");r="desc"}var i=Hl("Query.orderBy",e),o=function(t,e,n){if(null!==t.startAt)throw new Nr(Ar.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new Nr(Ar.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Bs(e,n);return function(t,e){if(null===ys(t)){var n=bs(t);null!==n&&Vf(0,n,e.field)}}(t,r),r}(this.M_,i,r);return new t(function(t,e){var n=t.rn.concat([e]);return new ls(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(this.M_,o),this.firestore,this.x_)},t.prototype.limit=function(e){return ul("Query.limit",e),new t(_s(this.M_,e,"F"),this.firestore,this.x_)},t.prototype.limitToLast=function(e){return ul("Query.limitToLast",e),new t(_s(this.M_,e,"L"),this.firestore,this.x_)},t.prototype.startAt=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=this.Bf("Query.startAt",e,n,!0);return new t(Es(this.M_,i),this.firestore,this.x_)},t.prototype.startAfter=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=this.Bf("Query.startAfter",e,n,!1);return new t(Es(this.M_,i),this.firestore,this.x_)},t.prototype.endBefore=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=this.Bf("Query.endBefore",e,n,!0);return new t(Os(this.M_,i),this.firestore,this.x_)},t.prototype.endAt=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=this.Bf("Query.endAt",e,n,!1);return new t(Os(this.M_,i),this.firestore,this.x_)},t.prototype.isEqual=function(e){return e instanceof t&&this.firestore===e.firestore&&Is(this.M_,e.M_)&&this.x_===e.x_},t.prototype.withConverter=function(e){return new t(this.M_,this.firestore,e)},t.prototype.Bf=function(t,e,n,r){if(e instanceof Df)return function(t,e,n,r,i){if(!r)throw new Nr(Ar.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,u=gs(t);s<u.length;s++){var a=u[s];if(a.field.B())o.push(Fi(e,r.key));else{var c=r.field(a.field);if(Ti(c))throw new Nr(Ar.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+a.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var h=a.field.M();throw new Nr(Ar.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+h+"' (used as the orderBy) does not exist.")}o.push(c)}}return new Vs(o,i)}(this.M_,this.firestore.v_,t,e.o_.N_,r);var i=[e].concat(n);return function(t,e,n,r,i,o){var s=t.rn;if(i.length>s.length)throw new Nr(Ar.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var u=[],a=0;a<i.length;a++){var c=i[a];if(s[a].field.B()){if("string"!=typeof c)throw new Nr(Ar.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!ms(t)&&-1!==c.indexOf("/"))throw new Nr(Ar.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var h=t.path.child(Cr.k(c));if(!Lr.G(h))throw new Nr(Ar.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+h+"' is not because it contains an odd number of segments.");var l=new Lr(h);u.push(Fi(e,l))}else{var f=ql(n,r,c);u.push(f)}}return new Vs(u,o)}(this.M_,this.firestore.v_,this.Lf,t,i,r)},t.prototype.onSnapshot=function(){for(var t,e,n,i=this,o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];var u={},a=0;if("object"!=typeof o[a]||ju(o[a])||(u=o[a],a++),ju(o[a])){var c=o[a];o[a]=null===(t=c.next)||void 0===t?void 0:t.bind(c),o[a+1]=null===(e=c.error)||void 0===e?void 0:e.bind(c),o[a+2]=null===(n=c.complete)||void 0===n?void 0:n.bind(c)}var h={next:function(t){o[a]&&o[a](new Bf(i.firestore,new mf(i.firestore.o_,i.D_,new Nl(i.firestore.o_,i.x_,i.M_),t)))},error:o[a+1],complete:o[a+2]};return Ff(this.M_),function(t,e,n,i){var o=this,s=new tl(i),u=new vu(e,s,n);return t.rs.fs(function(){return Object(r.b)(o,void 0,void 0,function(){var e;return Object(r.d)(this,function(n){switch(n.label){case 0:return e=hu,[4,cf(t)];case 1:return[2,e.apply(void 0,[n.sent(),u])]}})})}),function(){s.r_(),t.rs.fs(function(){return Object(r.b)(o,void 0,void 0,function(){var e;return Object(r.d)(this,function(n){switch(n.label){case 0:return e=lu,[4,cf(t)];case 1:return[2,e.apply(void 0,[n.sent(),u])]}})})})}}(xf(this.firestore.o_),this.M_,u,h)},t.prototype.get=function(t){var e=this;Ff(this.M_);var n=xf(this.firestore.o_);return(t&&"cache"===t.source?function(t,e){var n=this,i=new Ks;return t.rs.fs(function(){return Object(r.b)(n,void 0,void 0,function(){var n;return Object(r.d)(this,function(o){switch(o.label){case 0:return n=function(t,e,n){return Object(r.b)(this,void 0,void 0,function(){var i,o,s,u,a,c;return Object(r.d)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,oc(t,e,!0)];case 1:return i=r.sent(),o=new eh(e,i.Xa),s=o.gh(i.documents),u=o.bi(s,!1),n.resolve(u.snapshot),[3,3];case 2:return a=r.sent(),c=uu(a,"Failed to execute query '"+e+" against cache"),n.reject(c),[3,3];case 3:return[2]}})})},[4,sf(t)];case 1:return[2,n.apply(void 0,[o.sent(),e,i])]}})})}),i.promise}(n,this.M_):function(t,e,n){var i=this;void 0===n&&(n={});var o=new Ks;return t.rs.fs(function(){return Object(r.b)(i,void 0,void 0,function(){var i;return Object(r.d)(this,function(r){switch(r.label){case 0:return i=function(t,e,n,r,i){var o=new tl({next:function(n){e.fs(function(){return lu(t,s)}),n.fromCache&&"server"===r.source?i.reject(new Nr(Ar.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new vu(n,o,{includeMetadataChanges:!0,Hs:!0});return hu(t,s)},[4,cf(t)];case 1:return[2,i.apply(void 0,[r.sent(),t.rs,e,n,o])]}})})}),o.promise}(n,this.M_,t)).then(function(t){return new Bf(e.firestore,new mf(e.firestore.o_,e.D_,new Nl(e.firestore.o_,e.x_,e.M_),t))})},t}(),qf=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).S_=e,r}return Object(r.c)(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return this.o_.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"doc",{get:function(){return new Rf(this.S_,this.o_.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"oldIndex",{get:function(){return this.o_.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"newIndex",{get:function(){return this.o_.oldIndex},enumerable:!1,configurable:!0}),e}(el),Bf=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).S_=e,r}return Object(r.c)(e,t),Object.defineProperty(e.prototype,"query",{get:function(){return new Uf(this.o_.query.M_,this.S_,this.o_.query.x_)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this.o_.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this.o_.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this.o_.empty},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"docs",{get:function(){var t=this;return this.o_.docs.map(function(e){return new Rf(t.S_,e)})},enumerable:!1,configurable:!0}),e.prototype.docChanges=function(t){var e=this;return this.o_.docChanges(t).map(function(t){return new qf(e.S_,t)})},e.prototype.forEach=function(t,e){var n=this;this.o_.forEach(function(r){t.call(e,new Rf(n.S_,r))})},e.prototype.isEqual=function(t){return wf(this.o_,t.o_)},e}(el),zf=function(t){function e(e,n,r){var i=this;if((i=t.call(this,ps(e),n,r)||this).O_=e,e.length%2!=1)throw new Nr(Ar.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+e.M()+" has "+e.length);return i}return Object(r.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.M_.path.C()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.M_.path.S();return t.T()?null:Sf.xf(t,this.firestore,null)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.M_.path.M()},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){0===arguments.length&&(t=wr.u()),nl("CollectionReference.doc","path",t);var e=Cr.k(t);return Sf.xf(this.M_.path.child(e),this.firestore,this.x_)},e.prototype.add=function(t){var e=this.x_?this.x_.toFirestore(t):t,n=this.doc();return Sf.b_(n.o_.C_,this.firestore,null).set(e).then(function(){return n})},e.prototype.withConverter=function(t){return new e(this.O_,this.firestore,t)},e}(Uf);function Gf(t,e,n){var r=sl(e,Al);if(r.firestore!==n.o_)throw new Nr(Ar.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}function Kf(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var Hf=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.call(this,new(xl.bind.apply(xl,Object(r.g)([void 0],e))))||this}return Object(r.c)(e,t),e.documentId=function(){return new e(Rr.q().M())},e.prototype.isEqual=function(t){return t instanceof el&&(t=t.o_),t instanceof xl&&this.o_.F_.isEqual(t.F_)},e}(el),Wf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.c)(e,t),e.serverTimestamp=function(){var t=new ll("serverTimestamp");return t.a_="FieldValue.serverTimestamp",new e(t)},e.delete=function(){var t=new cl("deleteField");return t.a_="FieldValue.delete",new e(t)},e.arrayUnion=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new fl("arrayUnion",t)}).apply(void 0,t);return r.a_="FieldValue.arrayUnion",new e(r)},e.arrayRemove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new pl("arrayRemove",t)}).apply(void 0,t);return r.a_="FieldValue.arrayRemove",new e(r)},e.increment=function(t){var n=function(t){return new dl("increment",t)}(t);return n.a_="FieldValue.increment",new e(n)},e.prototype.isEqual=function(t){return this.o_.isEqual(t.o_)},e}(el),Qf={Firestore:jf,GeoPoint:vl,Timestamp:kr,Blob:_l,Transaction:Nf,WriteBatch:kf,DocumentReference:Sf,DocumentSnapshot:Df,Query:Uf,QueryDocumentSnapshot:Rf,QuerySnapshot:Bf,CollectionReference:zf,FieldPath:Hf,FieldValue:Wf,setLogLevel:function(t){hr.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};function Yf(t){!function(t,e){t.INTERNAL.registerComponent(new ur.a("firestore",function(t){return function(t,e){return new jf(t,new pf(t,e),new Tf)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))},"PUBLIC").setServiceProps(Object.assign({},Qf)))}(t),t.registerVersion("@firebase/firestore","2.0.2")}Yf(i.a)},zIRd:function(t,e,n){"use strict";var r,i,o=n("os0x"),s=n("qOnz"),u=n("/6Yf"),a=n("q/0M"),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),h=new s.b("app","Firebase",c),l="@firebase/app",f="[DEFAULT]",p=((i={})[l]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),d=new a.b("@firebase/app"),v=function(){function t(t,e,n){var r,i,a=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Object(s.h)(t),this.container=new u.b(e.name),this._addComponent(new u.a("app",function(){return a},"PUBLIC"));try{for(var c=Object(o.h)(this.firebase_.INTERNAL.components.values()),h=c.next();!h.done;h=c.next())this._addComponent(h.value)}catch(l){r={error:l}}finally{try{h&&!h.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map(function(t){return t.delete()}))}).then(function(){t.isDeleted_=!0})},t.prototype._getService=function(t,e){return void 0===e&&(e=f),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=f),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){d.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw h.create("app-deleted",{appName:this.name_})},t}();v.prototype.name&&v.prototype.options||v.prototype.delete||console.log("dc");var y=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=f);var u=o.name;if("string"!=typeof u||!u)throw h.create("bad-app-name",{appName:String(u)});if(Object(s.f)(e,u))throw h.create("duplicate-app",{appName:u});var a=new t(n,o,r);return e[u]=a,a},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=p[t])&&void 0!==r?r:t;n&&(i+="-"+n);var o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){var a=['Unable to register library "'+i+'" with version "'+e+'":'];return o&&a.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),o&&s&&a.push("and"),s&&a.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void d.warn(a.join(" "))}c(new u.a(i+"-version",function(){return{library:i,version:e}},"VERSION"))},setLogLevel:a.c,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw h.create("invalid-log-argument",{appName:name});Object(a.d)(t,e)},apps:null,SDK_VERSION:"8.0.1",INTERNAL:{registerComponent:c,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(t=t||f,!Object(s.f)(e,t))throw h.create("no-app",{appName:t});return e[t]}function c(u){var a,c,l=u.name;if(n.has(l))return d.debug("There were multiple attempts to register component "+l+"."),"PUBLIC"===u.type?r[l]:null;if(n.set(l,u),"PUBLIC"===u.type){var f=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[l])throw h.create("invalid-app-argument",{appName:l});return t[l]()};void 0!==u.serviceProps&&Object(s.i)(f,u.serviceProps),r[l]=f,t.prototype[l]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,l).apply(this,u.multipleInstances?t:[])}}try{for(var p=Object(o.h)(Object.keys(e)),v=p.next();!v.done;v=p.next())e[v.value]._addComponent(u)}catch(y){a={error:y}}finally{try{v&&!v.done&&(c=p.return)&&c.call(p)}finally{if(a)throw a.error}}return"PUBLIC"===u.type?r[l]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map(function(t){return e[t]})}}),i.App=t,r}(v);return e.INTERNAL=Object(o.a)(Object(o.a)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Object(s.i)(e,t)},createSubscribe:s.g,ErrorFactory:s.b,deepExtend:s.i}),e}(),b=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null}).filter(function(t){return t}).join(" ")},t}();if(Object(s.k)()&&void 0!==self.firebase){d.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var m=self.firebase.SDK_VERSION;m&&m.indexOf("LITE")>=0&&d.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var g=y.initializeApp;y.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Object(s.q)()&&d.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),g.apply(void 0,t)};var w=y;!function(t,e){t.INTERNAL.registerComponent(new u.a("platform-logger",function(t){return new b(t)},"PRIVATE")),t.registerVersion(l,"0.6.13",void 0),t.registerVersion("fire-js","")}(w),e.a=w}}]);